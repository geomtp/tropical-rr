\documentclass[a4paper,dvipdfmx,reqno,12pt]{amsart}
\synctex=1
%
%%%% packages
\usepackage[utf8]{inputenc}
\usepackage[dvipdfmx]{graphicx,color}%for images
\usepackage{bm}%fonts
\usepackage{tikz-cd}%
\usetikzlibrary{cd}
\usetikzlibrary{calc}
\usepackage{amsmath,amsthm,amstext,amsfonts,amsbsy}% ほぼ必須
\usepackage{amssymb}
\usepackage{latexsym}% ほぼ必須
\usepackage{makecell}%表のセル内で改行するためのパッケージ
\usepackage{algpseudocode,algorithm}%疑似コード用
\usepackage{todonotes}%comments
\usepackage[margin=0.8in]{geometry}
\usepackage{layout}
\usepackage[T1]{fontenc}%font encoding
\usepackage{physics}
\usepackage{braket}%after physics
\usepackage{mathtools,thmtools}
\usepackage{imakeidx}%before hyperref for pagebackref
\usepackage[pagebackref,dvipdfmx]{hyperref}
\usepackage[capitalize]{cleveref}
\hypersetup{
     colorlinks = true,
     citecolor  = blue,
     linkcolor  = blue, 
     urlcolor   = blue, 
}
%\usepackage{pxjahyper}%for hyperref in Japanese
\usepackage{bookmark}
\usepackage{dynkin-diagrams}

%%%% imakeidx
\makeindex
\makeindex[name=not, title=Index, columns=2]
\makeindex[name=sym, title=Symbol, columns=3]
\makeindex[name=ref, title=Ref, columns=3]

\newcommand{\ind}[2]{\emph{#1}\index{1{#2}@{#1}}}
\newcommand{\indset}[3]{$#1 \deq #2 $ \index{0{#3}@$#1$} }
\newcommand{\indse}[2]{{$#1$}\index{0{#2}@{$#1$}}}

%%%%
\usepackage{pgf,tikz,pgfplots}
\pgfplotsset{compat=1.15}
\usetikzlibrary{arrows}



%%%%


%%%% theoremstyle

\theoremstyle{definition}
\newtheorem{Thm}{Theorem}[section]
\newtheorem*{Thm*}{Theorem}
\newtheorem{Def}[Thm]{Definition}
\newtheorem{Def*}{Definition}
\newtheorem{Eg}[Thm]{Example}
\newtheorem*{Eg*}{Example}
\newtheorem{Prop}[Thm]{Proposition}
\newtheorem*{Prop*}{Proposition}
\newtheorem{Note}[Thm]{Note}
\newtheorem*{Note*}{Note}
\newtheorem{Ntc}[Thm]{Notice}
\newtheorem*{Ntc*}{Notice}
\newtheorem{Lem}[Thm]{Lemma}
\newtheorem*{Lem*}{Lemma}
\newtheorem{DefProp}[Thm]{Definition and Proposition}
\newtheorem*{DefProp*}{Definition and Proposition}
\newtheorem{Fact}[Thm]{Fact}
\newtheorem*{Fact*}{Fact}
\newtheorem{Ques}[Thm]{Question}
\newtheorem*{Ques*}{Question}
\newtheorem{Cite}[Thm]{Citation}
\newtheorem*{Cite*}{Citation}
\newtheorem{Conj}[Thm]{Conjecture}
\newtheorem*{Conj*}{Conjecture}
\newtheorem{Rule}[Thm]{Rule}
\newtheorem*{Rule*}{Rule}
\newtheorem{Not}[Thm]{Notation}
\newtheorem*{Not*}{Notation}
\newtheorem{Cor}[Thm]{Corollary}
\newtheorem*{Cor*}{Corollary}
\newtheorem{Rmk}[Thm]{Remark}
\newtheorem*{Rmk*}{Remark}
\newtheorem{Cond}[Thm]{Condition}
\newtheorem*{Cond*}{Condition}
\newtheorem{Conv}[Thm]{Convention}
\newtheorem*{Conv*}{Convention}
%%%% newcommand

%%%logic symbol
\newcommand{\deq}{\coloneqq}

\newcommand{\dbraket}[1]{\hspace{-1.5pt}\braket{\hspace{-2.2pt}\braket{#1}\hspace{-2.2pt}}}

\newcommand{\textcmd}[1]{\texttt{\symbol{"5C}#1}}

%%special sets
\newcommand{\emp}{\varnothing}%emptyset
\newcommand{\C}{\mathbb{C}}%complex number
\newcommand{\Ha}{\mathbb{H}}%quaternion
\newcommand{\F}{\mathbb{F}}%field
\newcommand{\R}{\mathbb{R}}%real number
\newcommand{\Q}{\mathbb{Q}}%rational number
\newcommand{\Z}{\mathbb{Z}}%integer
\newcommand{\N}{\mathbb{N}_{0}}%natural number
\newcommand{\Pj}{\mathbb{P}}%bold p
\newcommand{\vep}{\varepsilon}%varepsilon

%%%%

\newcommand{\mb}[1]{\mathbb{#1}}%blackboard bold (for math mode)
\newcommand{\mcal}[1]{\mathcal{#1}}%
\newcommand{\mf}[1]{\mathfrak{#1}}%

\newcommand{\opn}[1]{\operatorname{#1}}
\newcommand{\catn}[1]{\mathbf{#1}}

\newcommand{\abk}[1]{\langle {#1} \rangle}%angle bracket 
\newcommand{\Abk}[1]{\left \langle {#1} \right \rangle}%angle bracket (auto sizing)
\newcommand{\dabk}[1]{\langle\! \langle {#1}\rangle \! \rangle}%double angle bracket
\newcommand{\Dabk}[1]{\left \langle \! \left \langle {#1} \right \rangle \! \right \rangle}%double angle bracket
\newcommand{\Sbk}[1]{\left[ {#1} ]\right }% square bracket [] (auto sizing)
\newcommand{\Cbk}[1]{\left \{ {#1}\right \}}% curly bracket {} (auto sizing)
\newcommand{\dcbk}[1]{\{\!\!\{ {#1}\}\!\!\}} % double curly bracket {{}} 
\newcommand{\Dcbk}[1]{\left \{\!\! \left \{ {#1} \right\} \!\!\right \}} % double curly bracket {{}} (auto sizing)
\newcommand{\Paren}[1]{\left ( {#1} \right )}%parenthesis () (auto sizing)
\newcommand{\dparen}[1]{(\!({#1})\!)}%double parenthesis
\newcommand{\xto}[1]{\xrightarrow{#1}}
\newcommand{\xgets}[1]{\xleftarrow{#1}}
\newcommand{\hookto}{\hookrightarrow}


%%%% 

%%%% mathabx.sty (font) 
\DeclareFontFamily{U}{matha}{\hyphenchar\font45}
\DeclareFontShape{U}{matha}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * matha
      <10.95> matha10 <12> <14.4> <17.28> <20.74> <24.88> matha12
      }{}
\DeclareSymbolFont{matha}{U}{matha}{m}{n}

\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * mathb
      <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
      }{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}

\DeclareFontFamily{U}{mathx}{\hyphenchar\font45}
\DeclareFontShape{U}{mathx}{m}{n}{
      <5> <6> <7> <8> <9> <10>
      <10.95> <12> <14.4> <17.28> <20.74> <24.88>
      mathx10
      }{}
\DeclareSymbolFont{mathx}{U}{mathx}{m}{n}

%DeclareMathSymbol (from mathabx.sty)
\DeclareMathSymbol{\bigboxslash}{\mathop}{mathx}{"FE}
\DeclareMathSymbol{\bigboxtimes}{\mathop}{mathx}{"D2}
%%%%

%%%% MnSymbol.sty (font)
\DeclareFontFamily{U}{MnSymbolC}{}
\DeclareFontShape{U}{MnSymbolC}{m}{n}{
  <-6> MnSymbolC5
  <6-7> MnSymbolC6
  <7-8> MnSymbolC7
  <8-9> MnSymbolC8
  <9-10> MnSymbolC9
  <10-12> MnSymbolC10
  <12-> MnSymbolC12}{}
\DeclareFontShape{U}{MnSymbolC}{b}{n}{
  <-6> MnSymbolA-Bold5
  <6-7> MnSymbolC-Bold6
  <7-8> MnSymbolC-Bold7
  <8-9> MnSymbolC-Bold8
  <9-10> MnSymbolC-Bold9
  <10-12> MnSymbolC-Bold10
  <12-> MnSymbolC-Bold12}{}

\DeclareSymbolFont{MnSyC}{U}{MnSymbolC}{m}{n}

%%%% DeclareMathSymbol (from MnSymbol.sty)

\DeclareMathSymbol{\tplus}{\mathbin}{MnSyC}{43}
\DeclareMathSymbol{\aplus}{\mathbin}{MnSyC}{190}

%%%% renewcommand




%%%% footnote

\newcommand{\cfootnote}[1]{\footnote{#1}}

\newcommand{\TB}{\mcal{T}_{B_0}}
\newcommand{\TBZ}{\mcal{T}_{\Z,B_0}}
\newcommand{\AffS}{{\mathop{\mcal{A}\!f\!\!f\!}\nolimits}}
\newcommand{\FBZ}{\mcal{F}_{\Z,B}}
\newcommand{\FB}{\mcal{F}_{B}}
\newcommand{\simto}{ 
\mathrel{\raisebox{0.13em}{${\sim}$}}
\kern -0.75em \mathrel{\raisebox{-0.11em}{${\scriptstyle \to}$}}  
}
%%%% from 

%%%% from  https://tex.stackexchange.com/questions/183702/formatting-back-references-in-bibliography-bibtex
\renewcommand*{\backrefalt}[4]{
    \ifcase #1 [Not cited.]%
        \or        [Cited on p.#2.]%
        \else      [Cited on p.#2.]%
    \fi}


\usepackage{mathrsfs}
\usepackage{upgreek}
\numberwithin{equation}{section}
\title{On counting lattice points in some tropical spaces and beyond
}
\author[Y. Tsutsui]{Yuki Tsutsui}
\address{Graduate School of Mathematical Sciences,
The University of Tokyo, 3-8-1 Komaba, Meguro-Ku,
Tokyo, 153-8914, Japan}
\email{tyuki@ms.u-tokyo.ac.jp}
\date{\today}

\begin{document}

\begin{abstract}
We consider a tropical version of counting lattices point for 
line bundles on tropical curves and integral affine manifold
with a Hessian form.
\end{abstract}
\maketitle
\section{Introduction}

One of main topics of tropical geometry is that 
how to calculate algebraic data on algebraic varieties
from tropical varieties with additional data.
In particular, we may expect that we can calculate
 some invariants of algebraic varieties
which is (generically) invariant for tropicalization
(or degeneration) from tropical variety.

For instance, the tropicalization of an $n$-dimensional
algebraic subvariety of an algebraic split torus 
is an $n$-dimensional polyhedral complex 
(e.g. 
\cite[Theorem 3.2.3]{maclaganIntroductionTropicalGeometry2015a}).

We will explain 

\subsection{Tropical Riemann--Roch theorem}

the Hirzebruch--Riemann--Roch theorem and the Grothendieck--
Riemann--Roch theorem are monumental works in
 algebraic geometry (or complex geometry).

The difficulty of homological algebra over idempotent 
semiring relates 
with the difficulty of higher dimensional
Riemann--Roch theorem for 
tropical varieties.

Tropical Riemann--Roch theorem for tropical curves 
is proved in \cite{gathmannRiemannRochTheoremTropical2008a}
as an extension of Riemann--Roch theorem for graphs 
\cite{MR2355607}.

The rank $r(D)$ of the linear system of a divisor $D$ 
on tropical curve in 
\cite{gathmannRiemannRochTheoremTropical2008a}
is \emph{not} an invariant of $\mb{T}$-modules\footnote{
In fact, in \cite[Example 6.5]{yoshitomi2011generators} 
the author give a simple example of divisors on 
tropical curves such that 
the rank of a divisor is different even though 
the $\mathbb{T}$-semimodule of the global section of 
tropical line bundle $\mcal{O}_C(D)$ is isomorphic.}
but this is truly one of good analog of classical one,
see \cite[Lemma 2.4]{MR2448666}.
The rank of linear system is generalized by Cartwright
\cite{MR4131998,MR4251610}.
Cartwright defines an invariant 
$h^{0}(\Delta,D)$ for a divisor on tropical complex
which a certain analog of the dimension of
the $0$-th cohomology of a line bundle on algebraic 
variety.
in \cite[Definition 3.1]{MR4251610}.
If $\dim \Delta=1$, then $h^{0}(\Delta,D)=r(D)+1$
\cite[Proposition 3.3]{MR4251610}, and thus $h^{0}(\Delta,D)$
is a generalization of $r(D)+1$ for tropical complexes. 
Cartwright conjectured the Riemann--Roch inequality
$h^{0}(\Delta,D)+h^{0}(\Delta,K_{\Delta}-D)\geq 
\frac{D(D-K)}{2}+\chi_{\opn{top}}(\Delta)$.
On the other hand, a tropical analog of Riemann--Roch theorem
for higher dimensional tropical manifolds 
(or tropical complexes) is not formulated
since there hasn't been any good definition of 
Euler characteristic of line bundles on tropical 
manifolds as an extension of the above notions yet.

In \cite{MR3903579},
One of main difference between them is that 
the rank of linear system of tropical curves is
not the invariant of $\mb{T}$-modules.\footnote{}

The other dimensions of $\mb{T}$-modules 
(which are invariant for $\mb{T}$-modules) are defined for 
some authors (e.g. \cite[Definition 2.3]{mikhalkinTropicalCurvesTheir2008a}
and \cite[p.8]{yoshitomi2011generators}) but 
these dimensions have no tropical analog of 
Riemann--Roch formula like 
\cite{MR2355607,gathmannRiemannRochTheoremTropical2008a}.

One of standard (but very hard) approach is that 
constructing 
The homotopical algebra of semimodules is 
studied recently in 
\href{https://arxiv.org/abs/2202.01573}{[2202.01573] Proto-exact categories of modules over semirings and hyperrings}
but the structure of the associated 
stable $\infty$-category of the proto-exact structure
is not studied yet.
\footnote{The nerve of a proto-exact category
forms an exact $\infty$-category 
\cite[Example 7.2.3]{MR3970975} and there exists the
stable hull of it 
\cite{https://doi.org/10.48550/arxiv.2010.04957}.}

From successes of tropical homology \cite{itenbergTropicalHomology2019b}, we 
may expect the existence of transformation from 
line bundles on tropical manifold to complexes of
constructible sheaves whose Euler number 
represents that of line bundle, but we need to 
be careful of that we also can observe that
the derived category $\opn{D}_{c}^{b}(B)$
of constructible sheaves on 
tropical manifold $B$ does not seem like a tropical 
analog of the derived category of coherent 
sheaves on algebraic variety directly.\footnote{One of reasons
comes from the result in \cite{MR2449059,MR2565051} and 
homological mirror symmetry for 
the derived category of coherent sheaves on complex split $n$-torus 
$(\C^{\times})^{n}$ and the derived wrapped Fukaya category of $T^{*}(S^{1})^{n}$
by \cite{MR2822213}.
Therefore, $\opn{D}_c^{b}((S^{1})^{n})$ should behave like 
the derived category of coherent sheaves on $(\C^{\times})^{n}$
but not like of some complex tori.
We will see another reason in \cref{a}.}


\subsection{Lattice polytopes}

We consider about 

Counting points on a certain region is a classical problem.

Since Euler number of line bundle is invariant for 
degeneration (e.g. \cite[p.50]{}) and thus we can calculate
the Euler number (or the dimension of global section)
 of many interesting ample line bundles
by a degeneration to a toric variety or a union of toric
varieties. 

(For instance, let $X\to \opn{Spec}(\Z_{p})$ be a
projective scheme over $\Z_{p}$ and $\mcal{L}$
be a line bundle on $X$ that is flat over $\Z_{p}$.
Then, $\chi_{\kappa(s)}(X_s;\mcal{L}_s)=\chi_{\kappa(\eta)}(X_{\eta};\mcal{L}_{\eta})$

Roughly speaking, this means that
we can calculate the Euler number of line bundles on
a projective scheme over $\Q_p$ from that on a 
projective scheme over $\mb{F}_p$.  

This interpretation works for integral affine manifold 
with singularities $B$ as a lattice point of $B$. 

We want to focus on the following Proposition which is related with
BS=RR problems.

Lattice polytopes naturally appear from tropical toric
varieties as follows: 

\begin{Prop}
Let $P$ be a convex lattice polytope and
$f=\log (\sum_{n\in P\cap \Z^{n}} \opn{exp}(\abk{n,x}))\colon \R^{n}\to \R$ be 
a Laurent polynomial function over the log semiring. Then,
 the differential
$df:\R^{n}\to (\R^{n})^{\vee}$ is an embedding onto $\opn{relint}(P)$
\cite[p.124 Exercise]{MR1301331}.
Besides, the quotient map $q: \R^{n}\to \R^{n}/\Z^{n}$ induces the following
equation.
\begin{align}
\sharp (q(df)\cap 0_{\R^{n}})=\sharp (\opn{int}(P)\cap \Z^{n}). 
\end{align}
Here, $0_{{\R}^{n}}$ is the zero section of $\check{X}(\R^{n})$.
\end{Prop}

\begin{Eg}
Let $f:\R \to \R; x\mapsto \log (1+e^{x})$ be a soft 
plus function. When we take a dequantization of $f$,
we get a ReLU $f^{\opn{trop}}(x)=\max\{0,x\}$ which 
is frequently used in machine learning.
The differential is a sigmoid function 
$df(x)=\frac{e^{x}}{1+e^{x}}$ and 
the image of $df$ is the open interval $(0,1)$.\footnote{
the softmax function also are appreared 
naturally in a similar way 
when we consider tropical projective spaces.}
\end{Eg}

We can naturally extend this proposition for tropical projective toric 
varieties and then the extension map is called the \emph{tropical moment map}
$\mu_{P}^{\opn{trop}}: X_{P}^{\opn{trop}}\simto P$ 
\cite[Definition 2.1 (2)]{MR2428356}.

Instead of moment map for Hamiltonian action of Lie group, we
need not assume convex lattice polytope is not Delzant.
This is a tropical analog of algebraic moment map 
(e.g. \cite[\textsection 12.2]{coxToricVarieties2011a}) for toric varieties.
We can generalize the above proposition as follows;
\begin{align}
\sharp (q(\mu_P^{\opn{trop}}) \cap 0_{X_P^{\opn{trop}}})
=\sharp (P \cap \Z^{n}).
\end{align}

From construction of tropical moment map for lattice polytope,
it seems that generic rational section of line bundle on 
toric variety (over log semifield).
In fact, we can define a "Cartier data" on toric variety
associated with the Laurent polynomial over log semiring like 
the following example. 
\begin{Eg} \label{eg: TP1Cartier}
Take two continuous functions on 
$f_{1,n}\colon \mb{T}\to \mb{T};x \mapsto \log (1+e^{nx})$,
$f_{2,n}\colon \mb{R}\cup\{+\infty\}\to \mb{R}\cup\{+\infty\};
x\mapsto \log(e^{-nx}+1)=\log(1+e^{nx})-nx$ on two open 
subsets of $\mb{T}P^{1}$. These function is the given 
by the pullback of a smooth function on $\R_{>1}$ by the 
exponential map $\opn{exp}:\mb{T}\to \R_{\geq 0} (\subset \R)$.
$\{f_{i,n}\}_{i=1,2}$ defines an element 
$D_n\deq (f_{1,n}-f_{2,n})\in 
H^{1}(\mb{T}P^1;\mcal{O}_{\mb{T}P^1}^{\times})\simeq \Z$
as a \v{C}ech cocycle.
Then, we have 
$\sharp([0,n]\cap \Z)=\opn{deg}(D_n)+1=\opn{deg}(D_n)+\chi_{\opn{top}}(\mb{T}P^1)$.
\end{Eg}


These data is very similar with elements of 
$\opn{CaDiv}^{\infty}(X_{P}^{\opn{trop}})\deq H^{0}(X_{P}^{\opn{trop}};
\mcal{A}^{0,0}_{X_{P}^{\opn{trop}}}/
\mathcal{O}^{\times}_{X_{P}^{\opn{trop}}})$.\footnote{
Be careful that this data is not an element
of $\opn{CaDiv}^{\infty}(X_{P}^{\opn{trop}})$ since
 the former collection of smooth function is not constant
at the neighborhood of the corner of $X_{P}^{\opn{trop}}$,
i.e., the fixed point of the torus action of tropical 
toric varieties.
We need extend $\mcal{A}^{0,0}_{X_{P}^{\opn{trop}}}$
suitably to treat as a truly analog of Cartier data by
the pullback of a smooth function on $\R_{\geq 0}^{n}$ via 
the exponential map $\opn{exp}\colon \mb{T}^{n}\to \R_{\geq 0}^{n}$.}



$\opn{CaDiv}^{\infty}(X_{P}^{\opn{trop}})$ is a
smooth version of the group of tropical Cartier divisor
$\opn{CaDiv}(X_{P}^{\opn{trop}})$ 
\cite[Definition 4.2]{jellLefschetzTheoremTropical2018a}
which is defined by the sheaf of $(0,0)$-super forms 
$\mcal{A}^{0,0}_X$ on 
polyhedral spaces.

This observation gives an ex

Another important point is that $q\circ df$ is also a Lagrangian
submanifold of the torus fibration $\check{X}(\R^{n})\deq \R^{n}\times (\R^{n})^{\vee}/(\Z^{n})^{\vee}$.


These Lagrangian submanifolds are called
\emph{Lagrangian sections} \index{Lagrangian section@Lagrangian section}
which is well-studied in the field of homological 
mirror symmetry 
(e.g. \cite{MR1882331}).
In particular, Lagrangian sections are mirror of line bundles on
mirror varieties. 
In this paper, we consider a 
This gives an interesting insight which is inspired from
Strominger--Yau--Zaslow conjecture 
(SYZ conjecture for short).
(See \cref{rmk: floer-coherent-problem} 
for detail about it.)

The following question is not formulated as a mathematical 
conjecture since we don't know the definition of Todd 
class of $n(\geq 3)$ dimensional tropical manifolds,
but we write it for showing a slogan of formulation 
of a tropical analog of Riemann-Roch theorem.

\begin{Conj}[{Tropical Mirror Riemann--Roch Problem}]
Let $B$ be a compact tropical manifold and $\mcal{L}$
be a line bundle on it. Suppose $B$ has the Todd class
$\opn{td}(B) \in \mb{H}^{\bullet}(B;\mcal{F}_{\Z, B}^{\bullet})$.
 Let $s$ be a "generic"
extended smooth Cartier data satisfying a admissible condition 
\cref{cond: admissible} which represents of $\mcal{L}$
and its graded $\Z$-module $\opn{MF}^{\bullet}(s)$
of it. Then,

\begin{align}
\chi(B,s)  \deq \chi(\opn{MF}^{\bullet}(s))=\int_B \opn{ch}(\mcal{L})\opn{td}(B).
\end{align}
where $\int_B$ is the trace map $\mb{H}^{\bullet}(B;\mcal{F}_{\Z, B}^{\bullet})\to \Z$.
In particular, when $\mcal{L}=\mcal{O}_B$ then
$\chi(\opn{MF}^{\bullet}(s))=\chi_{\opn{top}}(B)$?
\end{Conj}

Here, $\opn{ch}(\mcal{L})$ is a tropical analog of 
the Chern character of $\mcal{L}$.
We don't discuss the tropical Todd class
$\opn{td}(B)$ of tropical manifolds in general, 
but this should be essentially defined from the theory of 
Chern--Schwartz--MacPherson cycles for matroids 
\cite[Previous work]{lopezdemedranoChernSchwartzMacPhersonCyclesMatroids2020}.
See also \cite[5.3]{mikhalkinTropicalGeometryIts2006} and
\cite[Definition 3.20]{shawTropicalSurfaces2015a}.

In this paper, we give a partial answer for compact tropical curves 
and integral affine manifolds with Hessian form
as test plays of the above question:

\begin{Thm}[{,\cref{thm: HesseRR}}] \label{thm: main}
Let $B$ be a compact tropical curve $C$ (resp. integral 
affine manifold $B$
with a Hessian form) and $s=\{(U_i,f_i)\}_{i\in I}$ an admissible 
locally real analytic 
Cartier data on $C$ (resp. $B$). Then,
\begin{align}
\chi(C,s)=\int_C c_1(D_s)+c_1(-K_C), \quad \chi(B,s)=\int_B \frac{c_1(D_s)^{n}}{n!}
\end{align}
where $\chi(C,s)$ (resp. $\chi(B,s)$) is the number of weighted lattice
points on $s$ (see \cref{def: weighted_lattice_points}) and $D_s$ is the divisor class of $s$.
\end{Thm}

The condition of admissibility is that every cotangent vector 
is not in hyperplanes defined by the span of microsupport of
cotangent sheaf of $C$. 


We note that this theorem has already essentially proved for some
literature as a trivial corollary of homological mirror symmetry 
in \cite{MR4301560} and \cite{auroux2022lagrangian} (see \cref{rmk: curve_mirror} and \cref{rmk: integral_mirror} 
for more details) but we reprove it in tropical  
geometrical setting as a test play of another approach 
for a tropical analog of Riemann--Roch formula for 
good tropical spaces. This approach is different
from classical approach such like 
\cite{MR2355607,gathmannRiemannRochTheoremTropical2008a,mikhalkinTropicalCurvesTheir2008a} but
a toy model of homological mirror conjecture in the sense
of \cite[{\textsection 7}]{auroux2022lagrangian}.

\begin{Rmk}
We expect our approach works for various style 
of tropical spaces and develop a certain tropical 
analog of Ehrhart theory. 
\end{Rmk}

\textit{Acknowledgments:}
We also thank for Kentaro Yamaguchi for explaining about
\cite{MR4234675} and his results of master thesis 
\cite{yamaguchimaster}. We thank for Yuto Yamamoto for
explaining about the radiance obstruction of integral 
affine manifold with singularities and Gross--Siebert
programs.
This work was supported by JSPS KAKENHI 
Grant Number 21J14529.

This paper is organized as follows:

\begin{Note}[Guide for reading this paper]
  In order to reveal the relationships between our study
  and other topics, we cannot avoid introducing various
  notions. However, our results are almost elementary
in the case of tropical curves,
  so we write down a shortcut course of this paper as below:
\end{Note}

\begin{Not}

  We will use the following notation in this paper:
  For every continuous function $f\colon X\to \R$,

  $\{f<f(v)\}\deq \set{x\in X\mid f(x)< f(v)}$

  $\{f\geq f(v)\}\deq \set{x\in X\mid f(x)\geq f(v)}$

  $X\sqcup_{f,g}Y$: the pushout of the diagram
  $X\xgets{f} A\xto{g} Y$

  $\opn{Crit}(f)$: the subset of critical points of a
  $C^{1}$-function on a smooth manifold.

$A_X$: the constant sheaf on $X$ with fiber $A$.
\end{Not}

\begin{Note}
  We also impose the following assumption for simplicity in this paper:

  Any topological space is locally compact and locally
  contractible except schemes.


  We mainly use min-plus algebra.

  \footnote{We write down the reason of this in \cref{rmk: mix vs max}.}


\end{Note}

\section{The cohomological local Morse datum}
In this section we recall some elementary results
for cohomological local Morse data from
\cite{MR2031639,MR1299726,MR4294126}.



\subsection{Sheaf theory on locally compact 
Hausdorff spaces.}
\cite{iversenCohomologySheaves1986a,MR1299726,MR1269324,MR2050072}

The notion and symbols for 
sheaf theory mainly follows from \cite{MR1299726}, 
but some notations are different from that.

In this section, we suppose $A$ is a PID. Then, the Grothendieck 
group $K_0(A)$ of $A$ is isomorphic to $\Z$. From this, 
we can define the rank $\opn{rk}_A M$ of 
a finitely generated $A$-module.
If $M^{\bullet}$ is a bounded $\Z$-graded finitely generated $A$-module,
then we can define the Euler characteristic 
$\chi(M^{\bullet})\deq \sum_{i\in \Z}(-1)^{i}\opn{rk}_A M^{i}$.
If $(M^{\bullet},d)$ is a bounded chain complex of finitely 
generated $A$-module, then 
$\chi(M^{\bullet})=\chi(H^{\bullet}(M^{\bullet}))$.


Let $X$ be a topological space, $Z$ a locally closed 
subset of $X$
and $i\colon Z\to X$ be the inclusion map.

Since the global homological 
dimension of $A$ \cite[Exercise I.28]{MR1299726} is finite,
the weak global dimension of $A_X$ \cite[Definition 2.6.2]{MR1299726} is also finite.

\begin{align}
\mcal{F}|_{Z}\deq i^{-1}\mcal{F}, \quad 
\mcal{F}_Z\deq i_! i^{-1}\mcal{F}, \quad 
A_{Z\subset X}\deq i_! A_Z
\end{align}
where $i_!$ is the functor of 
direct image with proper supports. \cite[(2.5.1)]{MR1299726}.
The symbol $A_{Z\subset X}$ is not used in \cite{MR1299726} 
but in \cite{MR932640}.
From \cite[Proposition 2.5.4]{MR1299726}, $i_!$ is exact 
and $\mcal{F}_Z$ is isomorphic to the sheaf defined in
\cite[p.93]{MR1299726}.

Let $\Gamma_{Z}(\mcal{F})$ be the sheaf of sections of 
$\mcal{F}$ supported by $Z$
\cite[Definition 2.3.8]{MR1299726} and 
$\Gamma_{Z}(X;\mcal{F})$. This sheaf is defined as follows:

(i) Let $U$ be a open subset of $X$ such that $U$ contains
$Z$ as a closed subset of $U$ then we write
\begin{align}
  \Gamma_Z(U;\mcal{F})\deq \opn{Ker}(\mcal{F}(U) \to 
\mcal{F}(U\setminus Z))
\end{align}

(ii) If $V$ is an open subset of $U$ contain $Z$ then
$\Gamma_{Z}(U;\mcal{F})\simeq \Gamma_{Z}(V;\mcal{F})$
via the canonical morphism. Therefore, we can define
$\Gamma_{Z}(X;\mcal{F})\deq \Gamma_{Z}(U;\mcal{F})$.

(iii) The sheaf $\Gamma_{Z}(\mcal{F})$ is defined as the presheaf 
$U\mapsto \Gamma_{Z\cap U}(U;\mcal{F})$ on $X$.

$\Gamma_Z(X;\cdot)$ is a left exact functor from 
$\opn{Mod}(A_X)$ to $\opn{Mod}(A)$,
and $\Gamma_{Z}(\cdot)$ is a left exact functor from
$\opn{Mod}(A_X)$ to $\opn{Mod}(A_X)$ 
\cite[Proposition 2.3.9 (i)]{MR1299726}.

Let $f\colon Y\to X$ be a continuous map and 
$\mcal{G}\in\opn{Ob}(\opn{Mod}(A_Y))$.
Then, $\Gamma_Zf_*\mcal{G}\simeq f_*\Gamma_{f^{-1}(Z)}\mcal{G}$
\cite[(2.3.20)]{MR1299726}.
Let $X$ be a topological space and $Z$ be a locally closed
There exists the following exact triangle 
\cite[(2.6.32)]{MR1299726}:
\begin{align} \label{eq: exactlocal}
  R\Gamma_{Z'}(\mcal{F})\to R\Gamma_{Z}(\mcal{F})\to 
R\Gamma_{Z\setminus Z'}(\mcal{F})\xto{[1]} R\Gamma_{Z'}(\mcal{F})[1]
\end{align}



We mention two elementary properties 
about stalks of $R\Gamma_{Z}(\mcal{F})$.

\subsection{Local index}

The following stalk complex (or graded module) is 
the most important notion
for this paper which is naturally appeared from 
microlocal sheaf theory 
which is called "local Morse datum" in \cite[p.271]{MR2031639} 
or microlocal stalk in \cite{MR4132582}.
\begin{Def}[{Cohomological local Morse datum}]
Let $f\colon X\to \R$ be a $C^{1}$-function on a smooth manifold $X$ and has 
at most one critical point $x$.
\begin{align}
\opn{LMD}(\mcal{F},f,x)\deq R\Gamma_{\{f\geq f(x)\}}
(\mcal{F})_x, \quad \opn{MF}^{\bullet}(\mcal{F},f,x)\deq 
H^{\bullet}(\opn{LMD}(\mcal{F},f,x)).
\end{align}
\end{Def}
The notation comes from \cite[p.271]{MR2031639}
\begin{Rmk}
We don't assume $f$ satisfies some 
"Morse condition" since
 we need to use some $C^{\infty}$-function
which is \emph{not} a Morse function in the sense of 
stratified Morse theory (e.g. \cite[Part 1.2.1]{MR932724}). 
We also note that we need to use 
the graded module $\opn{MF}^{\bullet}(\mcal{F},f,x)$ instead of 
the complex $\opn{LMD}(\mcal{F},f,x)$ in order to define
a graded module associated with line bundle on tropical
spaces. See also \cref{rmk: cartier module} for more about 
this reason.
\end{Rmk}

Let $i\colon U\to X$ be an open inclusion.

From \cref{eq: exactlocal}, 


Here, $\tilde{H}^{i-1}(X;A)$ is the reduced (singular) cohomology group
of $X$(cf. \cite[p.199]{hatcherAlgebraicTopology2002a}).
We note $\tilde{H}^{-1}(\emp;A)=A$ and $\tilde{H}^{i}(\emp;A)=0$
for any $i\in \N$ from definition.

\begin{Eg}[{Real Milnor fiber}] \label{eg:}
We mainly follow from \cite[3.2]{MR3779558} for this example.

Let $f\colon \R^{n}\to \R$ be a real polynomial function
which has at most one critical point $x$.
Let's calculate 
$\chi (\opn{MF}^{\bullet}(\Z,f,x))
=\chi(\tilde{H}^{\bullet-1}(\{f<f(x)\};\Z))$.
Let $B_{\vep,x}\deq \set{y\in \R^{n}\mid \|x-y\|\leq \vep}$,
$S_{\vep,x}=\partial B_{\vep,x}$ and 
$\opn{Cone}(X)$ the cone of a topological space $X$
\cite[Example 4.4]{hatcherAlgebraicTopology2002a}.

There exists a homeomorphism of pairs of
topological spaces:
\begin{align}
(B_{\vep,x},B_{\vep,x}\cap V(f))\simeq 
(\opn{Cone}(S_{\vep,x}),\opn{Cone}(S_{\vep,x}\cap V(f)))
\end{align}
for sufficienly small $\vep>0$
\cite[Theorem 2.10]{MR0239612}.
From this $B_{\vep,x}\cap\{f<f(x)\}$ is homeomorphic to
$(S_{\vep,x}\cap \{f<f(x)\})\times (0,\vep]$.
Besides, $S_{\vep,x}\cap \{f<f(x)\}\simeq 
f^{-1}(-\delta)\cap B_{\vep,x}$
for sufficiently small $\vep>\delta>0$ 
\cite[Lemma 5.10]{MR0239612}.
$f^{-1}(-\delta)\cap B_{\vep,x}$ is called 
the (negative) \emph{real Milnor fibre}.
By Khimshiashvili [Himšiašvili] formula \cite{MR0458467}, we have
\begin{align} \label{eq: Khim}
  \chi(\opn{MF}^{\bullet}(\Z,f,x))
=1-\chi(f^{-1}(-\delta)\cap B_{\vep,x})
=\opn{ind}_{\opn{PH}}(\opn{grad} f,x).
\end{align}
Here, $\opn{ind}_{\opn{PH}}(\opn{grad} f,x)$ is the 
Poincare--Hopf index of the gradient of $f$ for the standard 
inner product on $\R^{n}$.
We can generalize the above for real analytic functions with 
at most isolated singular points.
\end{Eg}

\begin{Eg}[{\cite[p.22]{MR2031639}}]
  A polynomial function $f\colon \R^{n}\to \R;(x_1,\ldots,x_n)\mapsto x_1^{2}+\cdots+x_n^{2}$
  $X=S=\R^{n}$
  \begin{align}
    \opn{CF}^{\bullet}(f;\Z_S)\simeq \tilde{H}^{\bullet-1}(\emp;\Z_S),
    \quad \opn{CF}^{\bullet}(-f;\Z_S) \simeq \tilde{H}^{\bullet-1}(S^{n-1};\Z_S).
  \end{align}
\end{Eg}
The equation $\chi(\opn{MF}^{\bullet}(\Z,f,x))=
\opn{ind}_{\opn{PH}}(\opn{grad} f,x)$ can be considered 
as the intersection $\sharp ([df]\cap [T^{*}_M M])$ of cycles in $T^{*}M$,
and this is a special case of
microlocal index theroem:

\begin{Thm}[{\cite[Theorem 9.5.6]{MR1299726}}]

\begin{align}
\chi(\opn{LMD}(\mcal{F},f,x))
=\sharp ([\opn{graph}(f)]\cap \opn{CC}(\mcal{F}))
\end{align}
\end{Thm}

\begin{Eg}
Let $M$ be a compact integral affine manifold and $S$  
a compact rational polyhedral subspace in $M$. 
\begin{align}
\chi(H^{\bullet}(M;\iota_*A_S))
=\sharp ([\opn{graph}(f)]\cap \opn{CC}(\iota_* A_S))
=\sharp (\opn{CC}(A_M)\cap \opn{CC}(\iota_* A_S))
\end{align}
Therefore, this is a certain sheaf theoretic version of 
Pincar\'e--Hopf theorem for some polyhedral spaces. Under
the philosophy of this paper, $H^{\bullet}(M;\iota_*A_S)\simeq 
\opn{Ext}^{\bullet}(A_M,\iota_*A_S)$
 should be considered as a
certain analog of 
$\opn{Ext}^{\bullet}(\mcal{O}_X,\iota_*\mcal{O}_Z)$ for closed embedding of 
scheme.
\end{Eg}

\begin{Rmk}
The microlocal index formula is generalized for more general 
class of functions, see \cite{}.
\end{Rmk}



\begin{Rmk}

\end{Rmk}

\begin{Eg}
Let $f$ be a 


\end{Eg}

Let $M$ be a free $\Z$-module of finite rank and 
$M_{\R}\deq M\otimes_{\Z}\R$.

\begin{Def}[{\cite{MR4294126}}]

\end{Def}

Every PL set is subanalytic, and thus 
we can use the theory of microsupport of sheaves
effectively.
Let $\mcal{F}$ be a 

We will develop this without condition 

\begin{Cond}[{locally analytic}]
Let 
$f\colon U \to \R$ be a smooth function on a open subset of $\R^{n}$.
$f$ is locally analytic if there exists an analytic function
$f_0\colon V\to \R$ and a diffeomorphism $\phi\colon U \to V$ such 
that $f=f_0\circ \phi $
\end{Cond}

\begin{Rmk}
Of course, this condition is tentative since various important
features work under weaker condition for functions by using 
some good o-minimal structure on $\R$ or Stratified Morse theory. We mainly use this condition for
simplicity of our claims and revealing a similarity between
graded module of our sense and Floer complex of Lagrangian 
submanifolds.
\end{Rmk}

Every real analytic function is \emph{nondepraved} 
\cite[Part I, Definition. 2.3,]{MR932724} and
every nondepraved function $f\colon \to \R$ satisfies Whitney b-condition
for the pair $(\{f(x)=0\},x)$. Such a function satisfies the 
following condition

Let $S$ be a rational PL set in $\R^{n}$ and
$f$.

\begin{Rmk}[{A vanishing properties
for some good fan}]
$f\colon M_{\R}\to \R$ be a strictly convex
$C^{1}$-function on $M_{\R}$ with the minimum point $x$
 and $S$ be the support of 
a polyhedral complex $\Sigma$ whose contains $x$.
One of trivial but remarkable point is that
\begin{align}
\opn{MF}^{\bullet}(A_S,f,x)\not\simeq (-1)^{n}
\opn{MF}^{\bullet}(A_S,-f,x)
\end{align}
except for special cases such like \cref{eq: Khim}.
We will see this
We note $\opn{MF}^{\bullet}(\Q_S,-f,x) \simeq 
H^{\bullet}(S,S\setminus \{x\};\Q)\simeq 
(H^{-\bullet}(\upomega_S^{\bullet}))_x$ since
$H^{-i}(\upomega_S^{\bullet})$ is the sheafication of
the presheaf $U\mapsto H_{c}^{i}(U;k)^{\vee}=H^{i}(S,S\setminus U;k)^{\vee}$
 \cite[]{iversenCohomologySheaves1986a} and fundamental properties of the direct limit of topological spaces \cite[Proposition 3.33]{hatcherAlgebraicTopology2002a}. 
If $S$ is a purely tropical $n$-manifold, then 
$\opn{MF}^{\bullet}(A_S,-f,x)\simeq H^{n}(S,S\setminus\{x\},\Q)[-n]$
since the shellability of the link of Bergman fan, see also
\cite[Theorem 6.2]{gross2019sheaftheoretic}.
The vanishing property of the local cohomology is conjectured for
tropicalization of very affine algebraic variety by Hacking in
\cite{MR2452307}.
In other words, the dualizing complex of tropicalization of 
algebraic variety should be a shift of a single sheaf 
by Hacking conjecture. 

Hacking also prove that conjecture is true for a suitable condition
\cite[Theorem 2.5]{MR2452307}.
Since any tropical varieties is connected
  through codimension $1$ \cite[Theorem 3.3.5]{maclaganIntroductionTropicalGeometry2015a}
  this conjecture is true when $\dim S \leq 2$.

This phenominon gives a certain analog of Kodaira vanishing theorem for 
positive line bundles, see 
also \cref{eg: kodaira}.
\end{Rmk}

\subsection{admissible condition}

To generalize cohomological local Morse datum for
smooth Cartier data $\{f_i\}_{i\in I}$, we
need additional condition for $f_i$ in order 
to give a well-defined definition of graded modules.
In this paper, we only gives the admissible condition for 
rational polyhedral spaces.

To define it, we use the notion of the micro-support of
sheaves \cite[Chapter V]{MR1299726}.

Let $X$ be a real analytic manifold and let
$\mcal{F}\in\opn{Ob}(\opn{D}^{b}(A_X))$ and
$\opn{SS}(\mcal{F})$ the micro-support of $\mcal{F}$
\cite[Definition 5.1.2]{MR1299726}.
As remarked in \cite[Remark 5.1.6]{MR1299726},
$\opn{SS}(\mcal{F})$ depends only on the 
$C^{1}$-structure of $X$.\footnote{この一文ほぼ丸々引用の文だけどだい
大丈夫?}
In particular, 
the forgetful functor 
$\psi_X \colon \opn{D}^{b}(A_X)\to \opn{D}^{b}(\Z_X)$
preserves the microsupport of $\mcal{F}$ 
\cite[Remark 5.1.5]{MR1299726}.
For simplicity,
$\opn{SS}(\mcal{F})_x\deq \opn{SS}(\mcal{F}) \cap T^{*}_x X$.
From definition of the micro-support of sheaves, 
$\opn{SS}(\mcal{F}|_{U})_x=\opn{SS}(\mcal{F})_x$
for any open neighborhood $U$ of $x$ via the canonical 
isomorphism $T^{*}_xX\to T^{*}_xU$.

If $M$ is a closed submanifold of $X$, then
$\opn{SS}(A_M)=T^{*}_M X$ \cite[Proposition 5.3.2]{MR1299726}.

\begin{Def}
Let $(S,x)$ be a 
\end{Def}

\begin{Cond}[{admissibility}] \label{cond: admissible}
Let $U_x$ be an open neighborhood of a point $x$ in a rational polyhedral
space $S (\subset M_{\R})$. 
Suppose $\dim M_{\R}=\dim \mathbf{F}_{S,x}$. In this case,
we can identify $M$ with $\mathbf{F}_{S,x}^{\Z}$.
A smooth function $f\colon U_x \to \R$ is \emph{admissible} at $x$ 
if $(x,df(x))\notin (\opn{span}_{\R}(\opn{SS}(A_S)_x)+M^{\vee})\setminus M^{\vee}$.
\end{Cond}

% \begin{Rmk}
% $\opn{span}_{\R}(\opn{SS}(A_S))$ is equal to the orthogonal vector space of
% the linearity space of $S$ at $x$, i.e., the maximal vector space
% which is containded in $S$ at $x$ locally. 
% We use the language of microsupport for revealing the 
% reason of the condition of admissibility.
% \end{Rmk}

\begin{Eg}
Let $S=V(\max\{x_1,\ldots,x_n,1\})$ an $n+1$-valent graph in $\R^{n}$.
$\opn{span}_{\R}(\opn{SS}(A_S)_x)=(\R^{n})^{\vee}$.
Fix $x\deq (0,\ldots,0)$.
A smooth function $f\colon U_x\to \R$ is admissible at $x$
if and only if $d(x)\in (\Z^{n})^{\vee}$.
\end{Eg}


From definition, $f$ is admissible at $x$ then $f+m$ is also admissible for 
any $m\in \mcal{O}^{\times}_{M_{\R}}(M_{\R})$.  
Thus, we can generalize the admissibility condition for
smooth Cartier divisor $\opn{CaDiv}^{\infty}(S)\deq H^{0}(S;\mcal{A}^{0,0}_S/\mcal{O}^{\times}_S)$.
\begin{Cond}[{admissible smooth Cartier divisor}]
Let $S$ be a rational polyhedral space such that any atlas is 
in for some $\R^{n}$. A smooth Cartier divisor 
$\{f_i\}_{i\in I}\in \opn{CaDiv}^{\infty}(S)$ is admissible 
if each $f_i$ is admissible at any point in $S$.
\end{Cond}

We assume that every (rational) polyhedral space satisfies 
the following condition,
but we expect that the condition is not necessary
in general.

\begin{Cond} \label{cond: good}

\begin{align}
\opn{span}_{\R}\opn{SS}(S)_x=\opn{Lin}(S,x)^{\bot}
\end{align}
\end{Cond}

\begin{Eg}
Every metric graph of finite length and 
smooth tropical hypersurfaces in $\R^{n}$ satisfies
\cref{cond: good} obviously.
\end{Eg}

Take a projection $M^{\vee}\to 
M^{\vee}/(\opn{span}_{\R}(\opn{SS}(A_S)_x))\cap M^{\vee}$.
Since $S$ is a rational polyhedral space and thus 
$\opn{SS}(\Z_S)$ is a rational PL set. 
$M^{\vee}/(\opn{span}_{\R}(\opn{SS}(A_S)_x))\cap M^{\vee}$
is a free module. 
Then, $df(x)\in M^{\vee}$ if and only if 
$df(x)\in M^{\vee}/(\opn{span}_{\R}(\opn{SS}(A_S)_x))\cap M^{\vee}$
for any admissible function at $x$. Thus, there exists a canonical
shift $\tilde{f}_x\colon U_x\to \R$ of $f$ such that
$d\tilde{f}_x(x)=0$.

\begin{Def}[{Stratified torus fibration and Lagrangian}]
Let $S$ be a compact rational polyhedral space such that 
the image of any atlas is 
in for some $\R^{n}$. 
Suppose $S$ satisfies \label{cond: good}.
Then the stratified torus 
fibration is the following set
\begin{align}
\check{X}(S)\deq \bigcup_{x\in S} 
(\mathbf{F}_{S,x}^{\Z}/(\opn{span}_{\R}
(\opn{SS}(A_S)_x))\cap \mathbf{F}_{S,x}^{\Z})\otimes_{\Z} \R/\Z.
\end{align}
Let $s=\{f_i\}_{i\in I}$ be a admissible smooth Cartier divisor. 
The stratified Lagrangian is the image of the differential  $\{df_i\}_{i\in I}$ in $\check{X}(S)$
by fiberwise projection.
\end{Def}

\begin{Eg}[{metric graph}]
The stratified torus fibration $\check{X}(C)$ is very
similar with the stratified space associated
with a trivalent metric graph \cite{auroux2022lagrangian}, but
there exist some minor differences.
\end{Eg}

\begin{Def}
Let $S$ be a rational polyhedral space such that the image of
any atlas is in for some $\R^{n}$.
Let $s=\{(U_i,f_i)\}_{i\in I}$ be a admissible smooth Cartier divisor such that
the following set is finite;
\begin{align}
s_0 \cap s\deq \set{x\in S\mid \opn{pr}_x^{S}(df_i(x))=0 
\text{ for some } i\in I}
\end{align}
\begin{align}
\opn{MF}^{\bullet}(S;s,A)\deq 
\bigoplus_{x\in s_0 \cap s} 
\opn{MF}^{\bullet}(A_{S\cap U_i},\tilde{f}_{i,x},x), \quad
\opn{MF}^{\bullet}(S;s)=\opn{MF}^{\bullet}(S;s,\Z)
\end{align}
\end{Def}



\begin{Rmk} \label{rmk: cartier module}
We stress that we should not consider 
$\opn{MF}^{\bullet}(S;s,A)$ as the cohomology of $s$ just
a graded module 
since we need to define the differentials $\mf{m}_1$ of 
$\opn{MF}^{\bullet}(S;s,A)$ from the view point of 
Floer cohomology. We don't have, however,
the definition of the true differential of 
$\opn{MF}^{\bullet}(S;s,A)$ in general except when
$\opn{MF}^{\bullet}(S;s,A)$ is equal to a Floer complex
of Lagrangian submanifolds (e.g. \cite[5.2]{MR1882331}).
\end{Rmk}

\begin{Eg} \label{eg: kodaira}
A admissible smooth Cartier divisor $s=\{f_i\}_{i\in I}$ is 
\emph{Bohr--Sommerfeld type} or \emph{Hessian type} if
$f_i$ is strictly convex for any $i\in I$. Then,
\begin{align}
  \opn{MF}^{\bullet}(S;s,\Q)\simeq \bigoplus_{x\in s_0 \cap s} \Q[0], \quad
 \opn{MF}^{\bullet}(S;-s,\Q)\simeq \bigoplus_{x\in s_0\cap -s} 
H^{n}(S,S\setminus\{x\};\Q)[-n]
\end{align}
In this case, the cohomology of 
$\opn{MF}^{\bullet}(S;s,\Q)$ is independent of the choice of 
differential of $\opn{MF}^{\bullet}(S;s,\Q)$.
This is a tropical analog of Kodaira's vanishing theorem
for a (multiple of) positive form, i.e., a holomorphic line bundle $\mcal{L}$ with a 
K\"ahler form on a complex manifold $M$: 
\begin{align}
H^{\bullet}(M;\mcal{L}^{-1})\simeq H^{n}(M;\mcal{L}^{-1})[-n].
\end{align}
The name of Bohr--Sommerfeld type comes from 
the set $s_0\cap s$ can be considered as the set of 
Bohr--Sommerfeld point if $S$ is a strictly integral affine manifold 
with a Hessian form by Strominger--Yau--Zaslow mirror pair.
See \cref{sec: BSRR} for more details.
\end{Eg}

The following proposition is an analog of \'{e}tale multiplicity of Euler characteristics
(cf. \cite[Proposition 1.1.28]{MR2095471}).

\begin{Prop}
Let $f:S' \to S$ be a covering map of $S$.
Then, $\chi(\opn{MF}^{\bullet}(S';f^{*}(s),A))=
\opn{deg}(f)\chi(\opn{MF}^{\bullet}(S;s,A))$.
\end{Prop}

The proof of this proposition is trivial from definition.

\begin{Conj} \label{conj: conj}
Let $S$ be a compact tropical manifold such that any atlas is in for some 
$\R^{n}$ and has the Todd class $\opn{td}(S)$ of $S$ 
defined by the theory of Chern--Schwartz--MacPherson
cycles
\cite[Previous work]{lopezdemedranoChernSchwartzMacPhersonCyclesMatroids2020}.
Let $s$ be a admissible smooth Cartier divisor such that
$s_0\cap s$ is finite. Then, 
\begin{align}
\chi(\opn{MF}^{\bullet}(S;s,A))=\int_{S}\opn{ch}(s)\opn{td}(S)
\end{align}
\end{Conj}
We will prove it for some special cases.

\begin{Rmk}
Obviously, $\opn{MF}^{\bullet}(S;s,A)$ is not finitely
generated and this is not invariant for linearly 
equivalent smooth Cartier divisors
if $S$ is not compact.
This corresponds that Morse homology does not work
for non-compact manifolds such like for compact manifolds.
\end{Rmk}

\begin{Rmk}
A canonical topological semifield isomorphism 
$(\R_{\geq 0},+,\cdot)\simto 
(\mb{T},\oplus_{\opn{log}},+);x\mapsto \log(x)$
induces a homeomorphism $\R_{\geq 0}^{n}\simeq \mb{T}^{n}$
naturally and we can define a smooth function on 
$\mb{T}^{n}$ by the pullback of the smooth function on 
$\R_{\geq 0}^{n}$ such that its derivative at $x$ in
the stalk of the sheaf of affine function
(with a real valued slope) on $\mb{T}^{n}$.
 By repeating
the construction of the sheaf of super $(0,0)$-forms on 
rational polyhedral spaces, we can extend a sheaf of
smooth function on rational polyhedral spaces and
\cref{conj: conj}.\footnote{
The differential of such a smooth function 
need to be in the stalk of the sheaf of affine function 
with real valued slope since 
$\frac{df\circ \opn{exp}}{dx_i}=
\frac{df}{dy_i}e^{x_i}\mapsto 0$ at 
$x_i\mapsto 0$.}
 For instance, \cref{eg: TP1Cartier} satisfies 
these conditions. We can generalize about it for toric
varieties and this gives a tropical theoretic interpretation 
of the wrapped Fukaya category for the mirror of
(complete) toric varieties by \cite{MR2871160}.
For instance, let $U_{x}$ be a small open neighborhood of 
a given point $x$ in a tropical toric open strata $O(\sigma)$
 corresponds to a convex cone $\sigma$ of a fan.
Then, the slope of a smooth function $f$ on $U_{x}$ at $x$
should be in $\sigma^{\bot}$ since the set of intertible element
in the dual cone $\sigma^{\vee}$ of $\sigma$ is $\sigma^{\bot}$.
This condition corresponds to the condition for the Lagrangian
in $\opn{Fuk}(T^{*}M_{\R}/M;\overline{\Lambda}_{\sigma})$ 
\cite[3.1]{MR2871160} since
the condition $df(x')\in\sigma^{\bot}$ for all 
$x'\in U_x\cap O(\sigma)$ gives 
$(df|_{U_{x}\setminus X_{\sigma}})^{\infty}\subset 
-\overline{\Lambda}_{\sigma}^{\infty}$.
In other words, the stratified Lagrangian submanifold 
of a smooth Cartier divisor on a tropical toric variety
can be considered as 
an object of wrapped Fukaya category in the sense of
\cite{MR2871160} naturally. This interpretation is 
an intermediate of wrapped Fukaya categorical approach by
\cite{MR2871160}
and Morse categorical approach of moment polytopes
(e.g. \cite{MR4234675}).
We will discuss it in detail in the future.

Our tropical Lagrangian section for toric varieties is 
different from that of \cite{MR2240909,MR2529936}.
See also \cite[Appendix C.2.]{MR2871160} for relationships
between \cite{MR2871160} and \cite{MR2240909,MR2529936}.
We also note the mirror symmetry between the derived category of
coherent sheaves on toric varieties $X_{\Sigma}$ and
the wrapped Fukaya category 
$\opn{Fuk}(T^{*}M_{\R}/M;\overline{\Lambda}_{\Sigma})$
is solved by \cite{MR4132582}.
\end{Rmk}

\begin{Rmk}[{Ehrhart reciprocity revisit}]
Let $s$ be a admissible smooth Cartier divisor on 
tropical toric varieties in the sense of the above Remark.
$\chi(X_{\Sigma},-s,A)=(-1)^{n}\sharp (\opn{int}(\mu_s(X_{\Sigma}))\cap \Z^{n})$ since
the Local Morse data at boundary lattice point is trivial.
This is another interpretation of Ehrhart reciprocity of 
lattice polytopes.
\end{Rmk}

\section{Proof for compact tropical curves}
In this section, we prove \cref{thm: main} for 
compact tropical curves
(see \cite{mikhalkinTropicalCurvesTheir2008a} 
for the definition of tropical curves).
Our proof is highly effected from 
\cite{knill2012graph,MR2676658,auroux2022lagrangian}.
\footnote{Our proof idea comes from 
\cite{knill2012graph,MR2676658} at first.  
The current proof is modified after reading 
\cite{auroux2022lagrangian}.}.
We also follow the notation used in 
\cite{auroux2022lagrangian}.

\begin{Def}[{Continuous section}]
Let $C$ be a tropical curve and 
$C_{0}\deq \{x\in C\mid \opn{val}(x)=2\}$.

\begin{align}
\check{X}(C_0)\deq T^{*}C_0/T^{*}_{\Z}C_0, \quad 
X_0(C)\deq \check{X}(C_0)\sqcup_{i,s}C
\end{align}

\end{Def}

\begin{Thm}


\end{Thm}

\begin{Rmk} \label{rmk: curve_mirror}
When $C$ is a trivalent metric graph, 
our Lagrangian sections are 
almost the same with that of fiberwise wrapped Fukaya category 
$\mcal{F}(M)$ \cite[3.1]{auroux2022lagrangian}.
Here, $M$ is the
union of $\C P^{1}$'s whose intersection complex is $C$, 
i.e., every edge of $C$ corresponds
$\C P^{1}$ and every trivalent vertex of $C$ corresponds
to the intersection points of some three $\C P^{1}$'s.
The mirror manifold of $M$ is an algebraic curve $X_K$
from Mumford's construction using the dual intersection
complex $C$.

The local model of $M$ comes from the critical locus
of the potential function of a (A-side) Landau--Ginzburg 
model $(\C^{3},-xyz)$. There exists a (Orlov) functor
from $\opn{Fuk}(\C^{3},-xyz)$ 
to $\opn{wFuk}((\C^{\times})^2)$ which is compatible
with the pushforward 
$i_*\colon \opn{Perf}(V(1+x_1+x_2))\to \opn{Perf}((K^{\times})^{2})$. 
of the inclusion $i\colon V(1+x_1+x_2)\hookto (K^{\times})^2$
via mirror functors (see \cite[2.]{auroux2022lagrangian}
for more details). 

The mirror space $M$ of $X_K$ can be considered as a 
topological compactification of $\check{X}_0(C)$.

By a slight modification of $\check{X}_0(C)$, every 
stratified smooth Lagrangian section of $\check{X}(C)$ 
can be considered as an object of $\mcal{F}(M)$

The main difference between our setting and 
that of \cite{auroux2022lagrangian} 
is the definition of graded space $\opn{CF}(C,s)$. 
Our approach has no good definition 
of $m^{d}$-operations but we define $\opn{CF}(C,s)$ 
without Hamiltonian
perturbations.
\end{Rmk}

The stratified torus fibration of Riemann surface is 
closely related with pants decomposition, and thus
Auroux--Efimov--Katzarkov in \cite{auroux2022lagrangian} expect the mirror symmetry 
for projective hypersurfaces since they have higher 
dimensional pants decomposition \cite{MR2079993} along
tropical hypersurfaces.
As a toy model of this question, we also pose a 
following question as a higher version of the 
above correspondence.
\begin{Ques}
Is there exists an analog of the correspondence of the 
localization of index for
hypersurfaces of projective space and pants decomposition 
in \cite{MR2079993}?
\end{Ques}
We also expect that the above question has a generalization
for more general algebraic varieties.
\begin{Def} \label{def: weighted_lattice_points}

\end{Def}

By imitating of the objects of fiberwise wrapped Fukaya category 
in \cite{auroux2022lagrangian}, we can define a tropical 
analogue of vector bundles.
\begin{Eg}[{Multi-section}]

This is a tropical analog of 
\end{Eg}

\subsection{Relationships between a localization of 
index on compact Riemann surfaces.}

We mention the relationship between Pick's formula of tropical curves and
\cite[6]{MR2676658}.

For simplicity, we assume $B$ is a compact trivalent tropical curve.

On the other hand, we can construct a typical tropical curve
(Reeb graph) from a Morse function on Riemann surface
\cite[3.2.2]{kontsevichAffineStructuresNonArchimedean2006a}.

$X_0(B)$  can be considered as a subset of a compact Riemann surface
\footnote{By philosophy of SYZ mirror symmetry,
  we should consider Lagrangian section as a mirror of complex line bundle
  and we also explain about it for tropical tori in \cref{a}.
}.

Under the above interpretation, a very admissible Lagrangian section can be considered as a data of $U(1)$-holonomy of each fiber $\check{\pi}_{B_0}^{-1}(p)$.
The following equation is a correspondence about local index $\opn{ind}_v$ and the Local Riemann-Roch number under the above identification \cite[Theorem 6.7]{MR2676658}.
\begin{align}
   & [BS^{+}]=\opn{ind}_v(s_{2,0}),
  \quad [BS^{-}]=\opn{ind}_v(s_{0,2}),
  \quad [D^{+}]=\opn{ind}_v(s_{1,0}),
  \quad [D^{-}]=\opn{ind}_v(s_{0,1}), \\
   & [P^{S}]=\opn{ind}_v(s_{2,1}),
  \quad [P^{L}]=\opn{ind}_v(s_{1,2}).
\end{align}
From this our theorem for tropical curve can be proved from the theory of localization of index and classical Riemann-Roch formula.
\begin{Ques}
  Can we generalize the above correspondence for pants decomposition of
  complex algebraic hypersurfaces in \cite{MR2079993} and line bundles?
\end{Ques}

\section{Proof for integral affine manifold with Hessian form.}

In this section,
we recall the notion of affine manifolds from
following
\cite{heMR2293045,goldmanRadianceObstructionParallel1984a,kontsevichAffineStructuresNonArchimedean2006a,
  grossMirrorSymmetryLogarithmic2006a} and 
\cite[Chapter 6]{aspinwallDirichletBranesMirror2009}.

We write some background from 

We recall 

\begin{Def}

\end{Def}


\begin{Eg}

\end{Eg}

\begin{Rmk}
The following fact is one of most important things 
for integral affine manifold with a Hessian form.
By \cite[Corollary 2.3]{MR714338} and 
\cite[Corollary 8.3.4 (2)]{MR2293045},
every closed special Hessian manifold $B_0$ has 
a flat Riemannian metric $g$ such that 
its Levi--Civita connection is 
equal to affine connection of $B_0$ \cite[Corollary 8.3.7]{MR2293045}. 
By Bieberbach theorem, every closed flat Riemannian manifold 
is covered by a Riemannian flat torus and thus every closed 
integral Hessian manifold is a unramified cover of 
a tropical torus as mentioned in \cite[5.2]{MR1882331}.
\end{Rmk}

\begin{Rmk}
The integral affine structure itself is a very strict condition.

\ind{Chern's conjecture}{Chern's conjecture} states every closed affine manifold $B_0$ has zero topological Euler number $\chi_{\opn{top}}(B_0)$.
If $B_0$ is a closed flat Riemannian manifold, Chern's conjecture is true from Chern--Gauss--Bonnet formula.
This conjecture is true for special affine manifold \cite{MR3665000}.
Therefore, every closed integral affine manifold satisfies Chern's conjecture since the orientable double over of an integral affine manifold has a compatible special integral affine structure.

\ind{Markus's conjecture}{Markus conjecture} states every closed
special affine manifold is complete (in the sense of $(G,X)$-manifold)
if and only if its orientable double cover 
has a compatible special affine structure \cite[p.53]{markus1963cosmological}.

\footnote{We have not check the original source of Chern's conjecture yet. Our knowledge about these conjectures
  mainly comes from \cite{goldmanRadianceObstructionParallel1984a}
  and \cite{MR3665000}.
}
\end{Rmk}

\begin{Rmk}[{Relationships between symplectic geometry}]
Integral affine manifolds naturally appear 
as a base space of Lagrangian torus fibration 
\cite{duistermaatGlobalActionangleCoordinates1980a}. 
Besides, the deformation space of 
special Lagrangian submanifolds of
a Calabi-Yau $n$-fold with a nowhere vanishing 
holomorphic $n$-form has 
an integral affine structure with 
a Hessian metric by McLean's theorem \cite{MR1664890}.

Every integral affine manifold has the following canonical
\end{Rmk}

We can consider the sheaf theoretic definition of 
integral affine manifold as explained 
in \cite[2.1]{kontsevichAffineStructuresNonArchimedean2006a} 
and thus integral affine manifold is a special case of 
tropical manifold.

From now on, we follow about tropical homology and sheaf 
theory for tropical manifolds
from \cite{MR3903579,gross2019sheaftheoretic}.

\subsection{Tropical homology, Tropical superform and Cartier data}

In the case of affine manifold, this sheaf is already
studied in the field of Hessian geometry as a vector bundle
with a flat connection
(e.g. \cite[Chapter 7]{MR2293045}).


Here, $\mcal{F}_{\Z, B}^{0}=\R_B$. 
$\mcal{F}_{B}^{\bullet}$ is a certain analog of analytic
de Rham complex of complex manifold.

\footnote{以下では\cite{gross2019sheaftheoretic}での結果を
用いるがその定理は$\mcal{F}_X^{p}$に対してではなく
\cite{gross2019sheaftheoretic}における
$\Omega_X^{p}$に対するものである。だが、両者
はloopless matroidから由来する場合は両者は一致する。
\cite[Remark 2.8]{gross2019sheaftheoretic}}

$\Omega_X^{\bullet}$ has a canonical dga structure, 
and thus its hypercohomology 
$\mb{H}^{\bullet}(B;\mcal{F}_{B}^{\bullet})$ is a 
graded-commutative algebra. 
This is a tropical analog of the singular cohomology
$H^{\bullet}(X;\C)$ for a complex manifold $X$ since 
the analytic de Rham theorem $\C_X \simeq \Omega_X^{\bullet}$ 
gives isomorphism 
$H^{\bullet}(X;\C)\simeq \mb{H}^{\bullet}(X;\Omega_X^{\bullet})$
of graded algebras. 

An elementary but remarkable fact of 
$\mcal{F}_{B}^{\bullet}$ is that $\mcal{F}_{B}^{\bullet}\simeq 
\bigoplus_{i\in \Z}\mcal{F}_B^{i}[-i]$, i.e., the differential 
of $\mcal{F}_{B}^{\bullet}$ is trivial unlike the analytic de Rham complex
of complex manifolds, see \cite[Corollary 2.15]{epub36262}.
Therefore, we can calculate the multiplication of 
$\mb{H}^{\bullet}(B;\mcal{F}_B^{\bullet})$ by 
cup product of each $H^{q}(B;\mcal{F}_B^{p})$.

Let $f\colon B\to B'$ be a morphism of rational polyhedral 
space. Then, this induces the pullback $f^{-1}\colon 
\mb{H}^{\bullet}(B';\mcal{F}_{\Z, B'}^{\bullet})\to 
\mb{H}^{\bullet}(B;\mcal{F}_{\Z, B}^{\bullet})$
and this is a graded ring homomorphism \cite[Proposition 4.17]{gross2019sheaftheoretic}. 
\subsubsection{Tropical Cartier data}

The canonical monomorphism $\mcal{O}^{\times}_B \to \mcal{A}^{0,0}_B$
induces the following commutative diagram 
\footnote{Several similar diagrams for some tropical spaces and 
similar spaces appear
  in literature, e.g. \cite[p.468]{aspinwallDirichletBranesMirror2009}
 and \cite[Definition 1.45]{grossMirrorSymmetryLogarithmic2006a}}:

\begin{equation} \label{eq: smoothcartier}
  \begin{tikzcd}
    & 0 \arrow[d]    & 0 \arrow[d]           &                      &   \\
    & \mb{R}_{B} \arrow[r,equal] \arrow[d]                & \mb{R}_{B} \arrow[d]           &                      &   \\
    0 \arrow[r] & \mcal{O}_{B}^{\times} \arrow[r] \arrow[d]         & \mcal{A}^{0,0}_B \arrow[r] \arrow[d] & \mcal{A}^{0,0}_B / \mcal{O}_{B}^{\times}  \arrow[r] \arrow[d,equal] & 0 \\
    0 \arrow[r] & \FBZ^{1} \arrow[r] \arrow[d] & \mcal{Z}^{1}_{B} \arrow[r] \arrow[d]  & \mcal{Z}^{1}_{B}/\FBZ^{1} \arrow[r]   & 0 \\
    & 0 & 0 &  &
  \end{tikzcd}
\end{equation}
Here every row and column of the diagram (\ref{eq: smoothcartier}) is exact
and $\mcal{A}_{B}^{0,0}/\mcal{O}^{\times}_B
  \simeq \mcal{Z}^{1}_B/\mcal{F}_{\Z,B}^{1}$ from the snake lemma.
The right column exact sequence of \cref{eq: smoothcartier} is called
the \ind{tropical exponential exact sequence}{tropicalexponentialexactsequence}, 
(e.g. ).

The middle row is a smooth version of the following short exact sequence.
\begin{align}
  0 \to \mcal{O}^{\times}_B \to \mcal{M}_B^{\times} \to \mcal{D}iv_{B}\to 0
\end{align}
$H^{1}(B;\mcal{M}_{B}^{\times})=0$, 
and thus 
$\opn{Pic}(B)\deq H^{1}(B,\mcal{O}^{\times}_B)\simeq  
\opn{Im} (\delta \colon H^{0}(B,\mcal{D}iv_{B})\to 
H^{1}(B, \mcal{O}^{\times}_B))$ \cite[Lemma 4.5, Proposition 4.6]{jellLefschetzTheoremTropical2018a}.

We can see the similar proposition for 
$\opn{CaDiv}^{\infty}(B)$ since 
$\mcal{A}^{0,0}_B$ is acyclic.

Let $f\colon X\to Y$ be a morphism of 
two rational polyhedral spaces.
From definition of morphism of rational polyhedral space
and a natural morphism of superforms 
\cite[Lemma 2.21]{MR3903579},
$f$ induces the pullback 
$f^{*}\colon \opn{CaDiv}^{\infty}(Y)\to \opn{CaDiv}^{\infty}(X)$ 
and $c_1(f^{*}s)=f^{*}(c_1(s))$ from the diagram
(\ref{eq: smoothcartier}). 
In particular, we have
$c_1(f^{*}(s)^{n}=f^{*}(c_1(s)^{n})$ for every $D\in\opn{CaDiv}^{\infty}(Y)$.


\begin{Def}[Smooth Cartier data]
  A \ind{very admissible smooth Cartier data}{very admissible smooth Cartier data} $s=\{f_i\}$ is an element of
  $H^{0}(B;\mcal{A}_B^{0,0}/\mcal{O}_{B}^{\times})
    \simeq H^{0}(B;\mcal{Z}^{1}_B/\mcal{F}_{\Z,B}^{1})$ such
that every $f_i$ is admissible.
\end{Def}

\subsection{Verdier duality and Borel--Moore homology
for tropical spaces}



There exists a natural isomorphism $\mcal{F}_X^{n-p}[n]\to 
\mcal{D}(\mcal{F}_{X}^{p})$ where 
$\mcal{D}(\mcal{F}^{\bullet})
=R\mcal{H}om(\mcal{F};\upomega_X^{\bullet})$
\cite[Theorem 6.2]{gross2019sheaftheoretic}.

In particular, the natural isomorphism $\mcal{F}_{\Z, X}^{n}[n]\to 
\mcal{D}(\mcal{F}_{\Z, X}^{0})=\upomega_B^{\bullet}$
can be considered as the element of $H_{n,n}^{\opn{BM}}(X;\Z)$ 
from definition. 
We call this element as the \emph{fundamental class} of $X$ 
and it denotes by $[X]$. The fundamental class of tropical
manifold was defined from the locally constant function on 
$X_{\opn{reg}}$. (See \cite[Definition 4.8]{jellLefschetzTheoremTropical2018a}.)
If $X=\opn{pt}$, $H_{0,0}^{\opn{BM}}(\opn{pt};\Z)=\opn{End}(\Z)\simeq \Z$.
Therefore, $H^{n,n}(X;\Z)\xto{\cdot \cap [X]} H_{0,0}^{\opn{BM}}(X;\Z)
\xto{f_!} H_{0,0}^{\opn{BM}}(\opn{pt};\Z)$ defines
the 
When $B$ is an integral affine manifold of dimension $n$, 
$\upomega^{\bullet}_{B}\simeq \opn{or}_{B}^{\Z}[n]$ 
\cite[]{}.
and the fundamental class of $B$ is a $\Z$-orientation of $B$
when $B$ is orientable.



If $B_0$ is a integral affine manifold, 
$\mcal{O}^{\times}_{B_0}$ is a locally constant sheaf and the quotient sheaf $\mcal{W}^{1}_{\Z,B_0}$ is a $\Z$-local system on $B_0$.

\begin{Not}
  Usually, integral affine manifolds are used as a special case of integral affine manifold with singularities and we also want to treat like this in many cases.
  Therefore, we write $\AffS_{\Z,B_0}\deq \mcal{O}^{\times}_{B_0}$, $\mcal{T}_{\Z,B_0}\deq \mcal{W}_{\Z,B_0}^{1}$ in this section for integral affine manifolds. We also use this notation for integral affine manifold with singularities.
\end{Not}

From now on we recall the commutative diagram (\ref{eq: smoothcartier})
 for integral affine manifolds.

Of course, $\mcal{A}_{B_0}^{0,0}=\mcal{C}^{\infty}(B_0)$ and
 $\mcal{Z}^{1}_{B_0}$ is the sheaf of closed $1$-form on $B_0$.



We note the sheaf $\mcal{Z}^{1}_{B_0}$ can be considered as the sheaf 
$\opn{Lag}(T^{*}B_0)$ of Lagrangian sections 
$s:U \to T^{*}U$ for open set $U \subset B_0$, 
see some standard textbook for symplectic geometry 
such as \cite[3.2]{MR1853077}.

Another important thing is that 
$\mcal{Z}^{1}(B_0)/\mcal{T}_{\Z,B_0}^{\vee}$
 (resp. $\mcal{C}^{\infty}(T^{*}B_0)/\mcal{T}_{\Z,B_0}^{\vee}$) 
is isomorphic to the sheaf of germs of Lagrangian sections 
(resp. smooth sections ) of the Lagrangian torus fibration 
$\check{f}_{B_0}\colon \check{X}(B_0)\to B_0$ 
\cite[(2.7), (2.11)]{duistermaatGlobalActionangleCoordinates1980a}.


Thus, the commutative diagram (\ref{eq: smoothcartier}) is written like this 
(e.g. \cite[p.468]{aspinwallDirichletBranesMirror2009}):

\begin{equation} \label{eq:affinecartier}
  \begin{tikzcd}
    & 0 \arrow[d]    & 0 \arrow[d]           &                      &   \\
    & \mb{R}_{B_0} \arrow[r,equal] \arrow[d]                & \mb{R}_{B_0} \arrow[d]           &                      &   \\
    0 \arrow[r] & \AffS_{\Z,B_0} \arrow[r] \arrow[d]         & \mcal{C}^{\infty}(B_0) \arrow[r] \arrow[d] & \mcal{C}^{\infty}(B_0)/\AffS_{\Z,B_0}  \arrow[r] \arrow[d,equal] & 0 \\
    0 \arrow[r] & \mcal{T}_{\Z,B_0}^{\vee} \arrow[r] \arrow[d] & \opn{Lag}(T^{*}B_0) \arrow[r] \arrow[d]  & \opn{Lag}(\check{X}(B_0)) \arrow[r]   & 0 \\
    & 0 & 0 &  &
  \end{tikzcd}
\end{equation}


\begin{Rmk}
When $s=df$, $\chi(B,s)=\chi_{\opn{top}}(B)=0$ is 
truly a special case of Poincar\'e--Hopf theorem for $B$.
We also note there exists another tropical analog of Poincar\'e--Hopf theorem
  \cite{rau2020tropical}. This analogue is about tropical Euler characteristic
$\chi_{\opn{trop}}(B)\deq \chi(\mb{H}^{\bullet}(B;\mcal{F}_B^{\bullet}))$
  but not for topological Euler characteristic $\chi_{\opn{top}}(B)$.
\end{Rmk}

\begin{Def}
Let $B,B'$ be an integral affine manifold.
\end{Def}

\begin{Rmk}
Our condition of \'etale is different from that of 
\cite[Definition 1.1]{grossMirrorSymmetryLogarithmic2006a}.

If $f\colon B\to B'$ be an affine local diffeomorphism,
then $X(f)\colon X(B) \to X(B')$ is a local isomorphism of
complex manifolds.
\end{Rmk}

\begin{Lem}
  Let $f:B\to B'$ be a proper tropical morphism.
  \begin{align}
    \int_{B} f^{*}c\frown \alpha=\int_{B'} f_*(f^{*}c\frown \alpha)
    =\int_{B'}c \frown f_*\alpha=\opn{deg}(f)\int_{B'} c\frown \alpha
  \end{align}
\end{Lem}

\begin{Prop} \label{thm: intetale}
Let $f\colon B'\to B$ be a finite \'etale covering of a compact integral affine 
manifold $B$ of dimension $n$. Then,
(i) $\chi(B',f^{*}(s))=\opn{deg}(f)\chi(B,s)$

(ii) (Projection formula) 
$\frac{c_1(f^{*}(D_s))^{n}}{n!}=
\opn{deg}(f)\frac{c_1(D_s)^{n}}{n!}$
\end{Prop}
\begin{proof}
(i) We can see this from definition.

(ii) Since $f^{!}=f^{-1}$ 
\cite[]{iversenCohomologySheaves1986a}
, $\opn{deg}(f)$ is the same with degree of 
mapping of closed manifolds.

\end{proof}

\begin{Thm} \label{thm: HesseRR}
  Let $B_0$ be a $n$-dimensional compact integral affine manifold and
  $s$ a smooth Lagrangian section
  which intersect transversely. Then,
  \begin{align} \label{eq: HesseRR}
    \chi(B_0,s)=\frac{1}{n!}\int_{B_0}c_1(D_s)^{n}.
  \end{align}
\end{Thm}

\begin{proof}

From Cheng-Yau's result \cite{MR714338}, $B_0$ is a finite unramified cover of tropical tori.
Fix an \`etale cover $p:T \to B_0$ of $B_0$.

If \cref{thm: HesseRR} is true for tropical tori,
then \cref{thm: HesseRR} is also true for compact
integral manifold with a Hessian form from
\cref{thm: intetale} for $p$.

From now on, we assume $B_0=T$.
Let $s$ be an element of 
$H^{0}(T;\mcal{C}^{\infty}(T)/\mcal{O}_{T}^{\times})\simeq
\Gamma(T;\opn{Lag}(\check{X}(T)))$.

$s$ is linearly equivalent to a Lagrangian section
defined from the differental $dq_s$ of a quadratic polynomial
$q_s$ function on the universal cover $\tilde{T}$ of $T$.

Let $D_s$ is the divisor class of $s$.
From explicit calculation of the ring structure of
$H^{\bullet}(T;\Omega_B^{\bullet})$ or Sumi's result
\cite[Theorem 47]{MR4229604}, we get 
$\frac{1}{n!}c_1(D_s)^{n}$ is equal to the determinant
of the linear part of $dq_s$.

Next, we mention the following well-known fact:

Let $s$ be a Lagrangian section of 
$\check{\pi}_{B_0}\colon \check{X}(B_0) \to B_0$.
The intersection number of the image $L_s$ Lagrangian
section and the zero section $L_0$ is equal to
$\chi(\opn{CF}^{\bullet}(L_s,L_0))$ up to 
signature\footnote{The signature only depends on
the choice of 
an orientation of $\check{X}(B_0)$. 
The definition of the intersection number of smooth 
submanifolds is in \cite[5.2]{MR1336822} or 
\cite[0.4]{griffithsPrinciplesAlgebraicGeometry1994a}}. 

Every linearly equivalent 
class is given by a one-time Hamiltonian flow on 
$\check{X}(B_0)$ by the pullback $\check{\pi}_{B_0}^{*}(h)$
of a smooth function $h$ on $B_0$.
We note one-time flow of submanifold of $\check{X}(B_0)$ does not change
the homology class in $H^{\bullet}(\check{X}(B_0);\Z)$ and
the intersection number \cite[5.2.1. Theorem]{MR1336822}.

As remarked in \cref{eg: MF=CF}, 
$\opn{MF}^{\bullet}(T,s)\otimes_{\Z}\Lambda_{\opn{nov}}
=\opn{CF}^{\bullet}(L_s,L_0)$ if $L_s$ intersects with
$L_0$ transversely. Therefore, 
the Euler number $\chi(\opn{MF}^{\bullet}(T,s))$ is 
invariant to the choice of linearly equivalent 
Lagrangian sections which intersect transversely.

We can calculate $\chi(\opn{MF}^{\bullet}(T,s))$ as follows:

(i) If $\det dq_s\ne 0$, $dq_s$ intersects to 
the zero section transversely. We can see that 
$\sharp(L_s\cap L_0)=|\det dq_s|$ directly, and thus
we get \cref{eq: HesseRR}. 

(ii) If $\det dq=0$, $L_{dq_s}\cap L_0$ is empty of 
subtorus of $L_0$. We can choose a smooth vector bundle $v$ on 
$T$ such that the one-time flow $\phi$ of $v$ make 
$\phi(L_{dq_s})\cap L_0=\emp$. 
Thus, $\chi(\opn{MF}^{\bullet}(T,s))=0$.



\end{proof}

\begin{Rmk}

\end{Rmk}

\begin{Rmk} \label{rmk: integral_mirror}
This theorem also can be considered as a special case of \cite{MR4301560}.
\end{Rmk}

\begin{Rmk}

According to \cite[5.3]{mikhalkinTropicalGeometryIts2006},
the support of $k$-th Chern class of tropical manifold is 
the $k$-skeleton of it.
We don't know the definition of higher Chern class of tropical manifold $B$ except
$n=1$ or $n=\dim B_0$. 
On the other hand, $\opn{ch}(B_0)$ should be trivial when $B$ is
an integral affine manifold, since $B$ has empty
$k$-skeleton except $k=n$.
Thus, $c_{k}(B_0)$ should be $1$ except $k=0$, 
i.e., $\opn{td}(B_0)=1$. 

On the other hand, $\hat{\mcal{A}}(X(B_0))=\opn{td}(X(B_0))=1$
since the tangent bundle of $X(B_0)$ is flat.
    From semi-flat SYZ mirror symmetry, the above conjecture should be true. In the case of tropical tori, see \ref{}.
\end{Rmk}

\begin{Rmk}[{Kodaira--Thurston surface}]
There exists a complete and compact integral affine manifold
  which has no Hessian form.
As pointed out in \cite[Example 1.14]{grossMirrorSymmetryLogarithmic2006a}
and \cite[p.403]{MR1461965}, there exists an integral affine manifold
$B_0$ such that
$X(B_0)$ is a primary Kodaira surface and $X(B_0),\check{X}(B_0)$
are diffeomorphic to Thurston's example of a symplectic but
not K\"ahler manifold in \cite{MR402764}.
Hence, $\check{X}(B_0)$ is not K\"ahler and $B_0$ has no
Hessian form since every Hessian form on $B_0$ induces a 
standard K\"ahler form
on torus fibration.
See also \cite{MR1422337} for tropical primary Kodaira surfaces.
\end{Rmk}

\section{For more examples}
We also mention more examples of 
tropical analog of Euler characteristic of 
line bundles.
 K\"unneth formula for
the direct product of tropical curves and 
integral affine manifold for some special cases.

At first, we recall some facts of tensor product of sheaves 
and derived tensor products of sheaves from \cite{MR1299726}.
As like flat morphisms of schemes, the notion of flatness
is defined for any ringed space 
\cite[Definition 2.4.11]{MR1299726}.

Obviously, $A_{Z\subset X}$ is $A_X$-flat for any locally 
closed subset $Z$ of $X$. 

Let $\mcal{F}\in \opn{Ob}(\opn{Mod}(A_X))$ 
\cite[Proposition 2.4.12]{MR1299726}.

This theorem comes from the following sheaf 
theoretic Thom--Sebastiani Theorem.



This is different from those of microlocal sheaf theory \cite[Definition 4.2.2, Definition 4.3.1]{MR1299726} but deeply related with them,
see \cite[Remark 1.1.1]{MR2031639}.



In some case we write $f_1\dot{+} f_2\deq \pi_1^{*}f_1+\pi_2^{*}f_2$.

\begin{Thm}[Thom-Sebastiani Theorem for sheaves]
  where $\mcal{F}_1\boxtimes^{L} \mcal{F}_2\deq p_1^{*}\mcal{F}_1\otimes^{L}p^{*}_2\mcal{F}_2$ is
  the \ind{external derived tensor product}{external derived tensor product}.
  \begin{align}
    R\Gamma(S_1\times S_2,\mu_{f_1\dot{+}f_2}(\mcal{F}_1\boxtimes^{L} \mcal{F}_2))
    \simeq R\Gamma(S_1,\mu_{f_1}(\mcal{F}_1))
    \otimes^{L}_{A_X}R\Gamma(S_2,\mu_{f_2}(\mcal{F}_2)).
  \end{align}

\end{Thm}
The proof is in \cite[Theorem 1.2.2]{MR2031639}.

\begin{Eg}
  If $S_1=\set{v},S_2=\set{w}$ and $\mcal{F}_1=\Z_V, \mcal{F}_2=\Z_{W}$,
  the Thom-Sebastiani theorem gives
  a certain K\"unneth formula for
  $\opn{CF}^{\bullet}(f_1\dot{+}f_2,\Z_{V\times W})$:
  \begin{align}
    \opn{CF}^{\bullet}(f_1\dot{+}f_2,\Z_{V\times W})
    \simeq \opn{CF}^{\bullet}(f_1,\Z_{V})
    \otimes_{\Z} \opn{CF}^{\bullet}(f_2,\Z_{W}), \quad
    \opn{ind}_{(v,w)}(f_1\dot{+}f_2)=\opn{ind}_v(f_1)\cdot \opn{ind}_v(f_2).
  \end{align}
  From instance, if $f_1(x)=x_1^{2}+\cdots x_{m}^{2}$
  and $f_2(x)=-x_{m+1}^{2}-\cdots - x_{m+n}^{2}$ then we have

  \begin{align}
    \opn{CF}^{\bullet}(f_1\dot{+}f_2,\Z_{\R^{n+m}})
    \simeq \tilde{H}^{\bullet}(S^{n-1},\Z)
    \simeq \Z[-\opn{ind}_{\mathrm{Morse}}(f_1\dot{+}f_2,0)]
  \end{align}
  where $\opn{ind}_{\mathrm{Morse}}(f,0)$ is the Morse index
  of a Morse function $f$ at the origin.
\end{Eg}

\begin{Eg}

If $\mcal{F}$ is a $A_X$-flat then $p_1^{-1}\mcal{F}$ is also 
$A_Y$-flat. From \cite[(2.2.7)]{},
\end{Eg}

We don't state for the K\"unneth type formula in a fully
general setting but it is enough to perform the Euler number of
generic locally analytic  behaves as expected.
\begin{Cor}[{K\"unneth formula}]
Let $X,Y$ be a compact tropical curve or integral affine manifold.
Let $s$ and $s'$ a admissible smooth Cartier divisor of $X$ and $Y$ 
satisfying the condition of cohomological version of a Milnor 
fibration \cite[Assumption 1.1.1]{MR2031639} locally.
Then, the induced external tensor product 
$s\boxtimes s'\deq \opn{pr}_X^{*} (s)+\opn{pr}_Y^{*}(s')
\in \opn{CaDiv}^{\infty}(X\times Y)$ is also admissible and
has the following equations:
\begin{align}
\chi(\opn{MF}^{\bullet}(X\times Y;s\boxtimes s'))=
\chi(\opn{MF}^{\bullet}(X,s))\chi(\opn{MF}^{\bullet}(Y,s')).
\end{align}

\end{Cor}
\begin{proof}
Since 
$\opn{SS}(F\boxtimes^{L} G)\subset \opn{SS}(F)\times \opn{SS}(G)$
\cite[Proposition 5.4.1]{MR1299726},
$s\boxtimes s'$ is also admissible.
From sheaf theoretic Thom-Sebastiani theorem for constructible sheaves 
\cite[Corollary 1.2.1]{MR2031639}, we get an isomorphism of 
graded modules;

\begin{align}
\opn{MF}^{\bullet}(X\times Y;s\boxtimes s') 
& =\bigoplus_{(v,w)\in s_0\cap s\boxtimes s'}
(R^{\bullet}_{\{f_v\boxplus g_w\geq 0\}}\Z_{U_{(v,w)}})_{(v,w)} \\
& =\bigoplus_{(v,w)\in s_0\cap s\boxtimes s'}
(R^{\bullet}_{\{f_v\geq 0\}}\Z_{U_v})_v
\otimes_{\Z} (R^{\bullet}_{\{g_w\geq 0\}}\Z_{U_w})_w \\
& \simeq
\opn{MF}^{\bullet}(X,s)\otimes_{\Z} \opn{MF}^{\bullet}(Y,s') 
\end{align}

\end{proof}

\begin{Rmk}
In the proof of the above corollary, we only use
the condition of cohomological version of Milnor fibre. 
Besides, we can find many smooth Cartier data satisfying 
the condtion, see \cite[p.35]{MR2031639}.  
\end{Rmk}

We will develop this paper for integral affine manifold
with singularities. As an example we also gives the 
following analog for (ADE type) tropical Kummer surfaces.

\begin{Prop}[{For the proof for Tropical Kummer surfaces}]
Let $L=q(L')$ be the image of a Lagrangian 
section $L'$ of $\check{f}_{T}\colon \check{X}(T)\to T$ such 
that $L'$ is invariant under the negation map. 
\end{Prop}
\begin{proof}

\end{proof}


\section{Future works}
We need to consider the extension of scalar of 
$\opn{MF}^{\bullet}(B,s)$ by 
Novikov ring or Novikov field.
More difficult problem is about what is the differential $m_1$ or higher multiplication $m_d$ for tropical manifolds.
If such $m_d$ exists, this should be determined by the contribution of the moduli space of tropical Morse tree for tropical manifold.
\begin{Ques}
  Is there a Morse $A_{\infty}$-precategory for tropical manifolds?
\end{Ques}

\begin{Rmk}
Our approach is similar with the theory of constructible sheaves 
on algebraic varieties.
We expect
\end{Rmk}

We also expect that we can define a graded module for a given
not only smooth admissible Cartier divisor but also 
an ordinary Cartier divisor directly.



\appendix

\section{Historical notes for index}

\begin{Rmk}
  We remark about a historical note of the local index.
  in \cite[p.246]{MR225327}.
  This index is also defined for affine linear map $f:\R^{n}\to \R$ and embedded convex cell complex
  $M$.
  The definition of the index $a(v,f)$
  may seem different from that of us but as written .

  We also note generic affine linear function defines a Morse function
  on an embedded smooth manifold as the restriction of it.

  $a(v,f)=1-\chi_{\mathrm{top}}(\opn{lk}(v)_{\leq f(v)})$. Therefore, $a(v,f)$ is a combinatorial version of our local index.

  Banchoff proves a polyhedral complex version of Poincare-Hopf theorem
  for height functions (Banchoff's critical point theorem) \cite[Theorem 1]{MR225327}.

  the condition for function is weaker than that of us but we need that condition for our goals.

  We also note this combinatorial local index $1-\chi(\opn{lk}(v)_{\leq f(v)})$ is defined in
  \cite[3]{knill2012graph}
  for (abstract) graphical analogue of Poincar\'e-Hopf theorem.
\end{Rmk}

\section{Radiance obstruction and geometric prequantization}
\label{sec: BSRR}
In this section, we mention about 

\begin{Eg}
This 
\end{Eg}

Every compact integral affine manifold has no infinite volume face,
 i.e., has a nontrivial finite volume.

If $B_0$ is a strongly integral affine manifold,
we can define the set of lattice points $B_0(\Z)$ 
on $B_0$ for a fixed strongly integral affine structure from 
the inverse image $\phi^{-1}_i(U_i\cap M)$ of each atlas.
In other words, we can define 
"$\underline{\Z}_{\max}$-rational point" of $B$.


We can create a canonical section 
$s_{B_0}\colon B_0 \to X(B_0)$ of the torus fibration
 $\pi_B:X(B_0)\to B_0$
induced from the graph of the composition map of developing map
$\opn{dev}_{B_0}\colon \widetilde{B_0}\to M_{\R}$ 
\cite[p.641]{goldmanRadianceObstructionParallel1984a} and projection
$p:M_{\R}\to M_{\R}/M$. 
Then, we can consider $B_0(\Z)$ as the intersection of 
$s_{B_0}$ and the zero section of $\pi_{B_0}:X(B_0)\to B_0$.
If $B_0$ has a Hessian potential (multivalued) function $K$, then $s_{B_0}$ can be 
considered as a Lagrangian section of the dual torus 
fibration $\pi_{\check{B}_0}\colon \check{X}(\check{B}_0)\to \check{B}_0$ of dual Hessian
manifold $\check{B}_0$ \cite[Proposition 6.9]{aspinwallDirichletBranesMirror2009}.
The associated smooth Cartier divisor is 
given from the dual Hessian potential function
$\check{K}$ on $\check{B_0}$ 
\cite[p.429]{aspinwallDirichletBranesMirror2009}.
A similar result for projective toric manifolds and the prequantum line bundle on them
is in \cite[Theorem 3.20]{yamaguchimaster}.

\begin{Rmk}
  We stress that the $\sharp \mathrm{BS}=\mathrm{RR}$ is true for closed integral affine manifold such that $X(B_0)$ is not K\"ahlerian, i.e., not Calabi-Yau type.
\end{Rmk}



\section{Etc of HMS and SYZ}

\subsection{A crash course of SYZ mirror for tropical 
geometer}

\begin{Rmk}[{Reason why Calabi--Yau's condition is needed}]

We explain why we need Calabi--Yau's condition is needed for
homological mirror symmetry in the sense of \cref{a}.

We note Abouzaid constructed ($\Z/2\Z$-graded)
Fukaya categories of higher genus closed surfaces in
\cite{MR2383898}. 
\end{Rmk}

In usual, homological mirror symmetry 
for non-Calabi--Yau manifolds has three ways:



\subsection{integral affine manifold and Floer cohomology}

\subsubsection{Semi-flat SYZ mirror pair}

We add some notes about integral affine manifolds $B_0$, and its SYZ-pair $\check{X}(B_0), X(B_0)$ from \cite[Chapter 6]{aspinwallDirichletBranesMirror2009} and \cite{MR2737696,MR3079343}



From construction, $\check{X}(B_0), X(B_0)$ have the zero section.

Let's see the topological properties of $X(B_0)$ and $\check{X}(B_0)$.

Since integral affine condition is very strict, so $X(B_0)$ (resp. $\check{X}(B_0)$) is a special class of complex (resp. symplectic) manifold.

Since each fiber of the fibration $f_{B_0}$ and $\check{f}_{B_0}$ are compact, $f_{B_0}$ and $\check{f}_{B_0}$ are proper maps. In particular, if $B_0$ is compact then $\check{X}(B_0)$ and $X(B_0)$ are compact.



We note $\pi_{i\geq 2}(X,p)\simeq \pi_{i\geq 2}(\widetilde{X},\tilde{p})$ and $\pi_{i}(X\times Y,(p,q))\simeq \pi_i(X,p)\times \pi_i(Y,q)$ and thus
\begin{align}
  \pi_{i\geq 2}(\check{X}(B_0))\simeq \pi_{i\geq 2}(\widetilde{\check{X}(B_0)})\simeq \pi_{i\geq 2}(\widetilde{T^{*}B_0})\simeq \pi_{i\geq 2}(T^{*}\widetilde{B_0})\simeq  \pi_{i\geq 2}(T_p^* B_0)\times \pi_{i\geq 2}(\widetilde{B_0})\simeq \pi_{i\geq 2}(B_0)
\end{align}
Thus, we have $\pi_{i\geq 2}(B_0)\simeq \pi_{i\geq 2}(\check{X}(B_0))\simeq \pi_{i\geq 2}(X(B_0))$. In particular, if $B_0$ is complete then $\pi_{i\geq 2}(B_0)\simeq \pi_{i\geq 2}(T_{p}B_0)=0$. See \cite[Chapter 4]{hatcherAlgebraicTopology2002a} for fundamental properties of homotopy groups and relative homotopy groups.

From Leray spectral sequence, $(R^{p}\check{f}_{B_0}\Z_{\check{X}(B_0)})_{x}=H^{p}(T^{*}_xB_0/(\TBZ^{\vee})_x;\Z)\simeq \bigwedge_{i=1}^{p}(\TBZ)_{x}$, i.e.,

\begin{align}
  R^{p}\check{f}_{B_0}\Z_{\check{X}(B_0)}\simeq \bigwedge_{i=1}^{p} \TBZ=\mcal{W}^{p}_{\Z,B_0}, \quad R^{p}f_{B_0}\Z_{X(B_0)}\simeq \bigwedge_{i=1}^{p} \TBZ^{\vee}=\mcal{F}_{\Z,B_0}^{p}
\end{align}

\begin{Eg}
If $B_0$ is an integral Hessian manifold, 
$X(B_0)$ and $\check{X}(B_0)$ has a K\"ahler structure.

Let $f:B_0' \to B_0$ be a finite unramified covering of $B_0$ such that $B_0'$ is a tropical torus.

Then, $X(B_0',K')$ (resp. $\check{X}(B_0',K')$) 
is a complex torus and an unramified finite cover 
of $X(B_0,K)$ (resp. $\check{X}(B_0,K)$).

\end{Eg}
If two smooth Cartier divisors $s,s'$ are linearly equivalent, 
i.e., $f=s-s'\in C^{\infty}(B_0)$, 
then $s$ is the image of a time-one Hamiltonian flow of $s'$
on $\check{X}(B_0)$
\cite[Exercise 6.65]{aspinwallDirichletBranesMirror2009}.

\bibliography{lattice_points_surface}
\bibliographystyle{halpha}

\printindex

\end{document}
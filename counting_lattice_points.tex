\documentclass[a4paper,dvipdfmx,reqno,12pt]{amsart}
\synctex=1
%
%%%% packages
\usepackage[utf8]{inputenc}
\usepackage[dvipdfmx]{graphicx,color}%for images
\usepackage{bm}%fonts
\usepackage{tikz-cd}%
\usetikzlibrary{cd}
\usetikzlibrary{calc}
\usepackage{amsmath,amsthm,amstext,amsfonts,amsbsy}% ほぼ必須
\usepackage{amssymb}
\usepackage{latexsym}% ほぼ必須
\usepackage{makecell}%表のセル内で改行するためのパッケージ
\usepackage{algpseudocode,algorithm}%疑似コード用
\usepackage{todonotes}%comments
\usepackage[margin=0.8in]{geometry}
\usepackage{layout}
\usepackage[T1]{fontenc}%font encoding
\usepackage{physics}
\usepackage{braket}%after physics
\usepackage{mathtools,thmtools}
\usepackage{imakeidx}%before hyperref for pagebackref
\usepackage[pagebackref,dvipdfmx]{hyperref}
\usepackage[capitalize]{cleveref}
\hypersetup{
     colorlinks = true,
     citecolor  = blue,
     linkcolor  = blue, 
     urlcolor   = blue, 
}
%\usepackage{pxjahyper}%for hyperref in Japanese
\usepackage{bookmark}
\usepackage{dynkin-diagrams}

%%%% imakeidx
\makeindex
\makeindex[name=not, title=Index, columns=2]
\makeindex[name=sym, title=Symbol, columns=3]
\makeindex[name=ref, title=Ref, columns=3]

\newcommand{\ind}[2]{\emph{#1}\index{1{#2}@{#1}}}
\newcommand{\indset}[3]{$#1 \deq #2 $ \index{0{#3}@$#1$} }
\newcommand{\indse}[2]{{$#1$}\index{0{#2}@{$#1$}}}

%%%%
\usepackage{pgf,tikz,pgfplots}
\pgfplotsset{compat=1.15}
\usetikzlibrary{arrows}



%%%%


%%%% theoremstyle

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem*{theorem*}{Theorem}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{definition*}{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem*{example*}{Example}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem*{proposition*}{Proposition}
\newtheorem{Note}[theorem]{Note}
\newtheorem*{Note*}{Note}
\newtheorem{Ntc}[theorem]{Notice}
\newtheorem*{Ntc*}{Notice}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem*{lemma*}{Lemma}
\newtheorem{Fact}[theorem]{Fact}
\newtheorem*{Fact*}{Fact}
\newtheorem{question}[theorem]{Question}
\newtheorem*{question*}{Question}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem*{conjecture*}{Conjecture}
\newtheorem{Rule}[theorem]{Rule}
\newtheorem*{Rule*}{Rule}
\newtheorem{Not}[theorem]{Notation}
\newtheorem*{Not*}{Notation}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem*{corollary*}{Corollary}
\newtheorem{remark}[theorem]{Remark}
\newtheorem*{Rmk*}{Remark}
\newtheorem{condition}[theorem]{Condition}
\newtheorem*{condition*}{Condition}
\newtheorem{Conv}[theorem]{Convention}
\newtheorem*{Conv*}{Convention}
%%%% newcommand

%%%logic symbol
\newcommand{\deq}{\coloneqq}

\newcommand{\dbraket}[1]{\hspace{-1.5pt}\braket{\hspace{-2.2pt}\braket{#1}\hspace{-2.2pt}}}

\newcommand{\textcmd}[1]{\texttt{\symbol{"5C}#1}}

%%special sets
\newcommand{\emp}{\varnothing}%emptyset
\newcommand{\C}{\mathbb{C}}%complex number
\newcommand{\Ha}{\mathbb{H}}%quaternion
\newcommand{\F}{\mathbb{F}}%field
\newcommand{\R}{\mathbb{R}}%real number
\newcommand{\Q}{\mathbb{Q}}%rational number
\newcommand{\Z}{\mathbb{Z}}%integer
\newcommand{\N}{\mathbb{N}_{0}}%natural number
\newcommand{\Pj}{\mathbb{P}}%bold p
\newcommand{\vep}{\varepsilon}%varepsilon

%%%%

\newcommand{\mb}[1]{\mathbb{#1}}%blackboard bold (for math mode)
\newcommand{\mcal}[1]{\mathcal{#1}}%

\newcommand{\opn}[1]{\operatorname{#1}}
\newcommand{\catn}[1]{\mathbf{#1}}

\newcommand{\abk}[1]{\langle {#1} \rangle}%angle bracket 
\newcommand{\Abk}[1]{\left \langle {#1} \right \rangle}%angle bracket (auto sizing)
\newcommand{\dabk}[1]{\langle\! \langle {#1}\rangle \! \rangle}%double angle bracket
\newcommand{\Dabk}[1]{\left \langle \! \left \langle {#1} \right \rangle \! \right \rangle}%double angle bracket
\newcommand{\Sbk}[1]{\left[ {#1} ]\right }% square bracket [] (auto sizing)
\newcommand{\Cbk}[1]{\left \{ {#1}\right \}}% curly bracket {} (auto sizing)
\newcommand{\dcbk}[1]{\{\!\!\{ {#1}\}\!\!\}} % double curly bracket {{}} 
\newcommand{\Dcbk}[1]{\left \{\!\! \left \{ {#1} \right\} \!\!\right \}} % double curly bracket {{}} (auto sizing)
\newcommand{\Paren}[1]{\left ( {#1} \right )}%parenthesis () (auto sizing)
\newcommand{\dparen}[1]{(\!({#1})\!)}%double parenthesis
\newcommand{\xto}[1]{\xrightarrow{#1}}
\newcommand{\xgets}[1]{\xleftarrow{#1}}
\newcommand{\hookto}{\hookrightarrow}


%%%% 

%%%% mathabx.sty (font) 
\DeclareFontFamily{U}{matha}{\hyphenchar\font45}
\DeclareFontShape{U}{matha}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * matha
      <10.95> matha10 <12> <14.4> <17.28> <20.74> <24.88> matha12
      }{}
\DeclareSymbolFont{matha}{U}{matha}{m}{n}

\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * mathb
      <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
      }{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}

\DeclareFontFamily{U}{mathx}{\hyphenchar\font45}
\DeclareFontShape{U}{mathx}{m}{n}{
      <5> <6> <7> <8> <9> <10>
      <10.95> <12> <14.4> <17.28> <20.74> <24.88>
      mathx10
      }{}
\DeclareSymbolFont{mathx}{U}{mathx}{m}{n}

%DeclareMathSymbol (from mathabx.sty)
\DeclareMathSymbol{\bigboxslash}{\mathop}{mathx}{"FE}
\DeclareMathSymbol{\bigboxtimes}{\mathop}{mathx}{"D2}
%%%%

%%%% MnSymbol.sty (font)
\DeclareFontFamily{U}{MnSymbolC}{}
\DeclareFontShape{U}{MnSymbolC}{m}{n}{
  <-6> MnSymbolC5
  <6-7> MnSymbolC6
  <7-8> MnSymbolC7
  <8-9> MnSymbolC8
  <9-10> MnSymbolC9
  <10-12> MnSymbolC10
  <12-> MnSymbolC12}{}
\DeclareFontShape{U}{MnSymbolC}{b}{n}{
  <-6> MnSymbolA-Bold5
  <6-7> MnSymbolC-Bold6
  <7-8> MnSymbolC-Bold7
  <8-9> MnSymbolC-Bold8
  <9-10> MnSymbolC-Bold9
  <10-12> MnSymbolC-Bold10
  <12-> MnSymbolC-Bold12}{}

\DeclareSymbolFont{MnSyC}{U}{MnSymbolC}{m}{n}

%%%% DeclareMathSymbol (from MnSymbol.sty)

\DeclareMathSymbol{\tplus}{\mathbin}{MnSyC}{43}
\DeclareMathSymbol{\aplus}{\mathbin}{MnSyC}{190}

%%%% renewcommand




%%%% footnote

\newcommand{\cfootnote}[1]{\footnote{#1}}

\newcommand{\myfootnote}[1]{\hspace{-5pt}\footnote{#1}}

\newcommand{\TB}{\mcal{T}_{B_0}}
\newcommand{\TBZ}{\mcal{T}_{\Z,B_0}}
\newcommand{\AffS}{{\mathop{\mcal{A}\!f\!\!f\!}\nolimits}}
\newcommand{\FBZ}{\mcal{F}_{\Z,B}}
\newcommand{\FB}{\mcal{F}_{B}}
\newcommand{\simto}{ 
\mathrel{\raisebox{0.13em}{${\sim}$}}
\kern -0.75em \mathrel{\raisebox{-0.11em}{${\scriptstyle \to}$}}  
}
%%%% from 

%%%% from  https://tex.stackexchange.com/questions/183702/formatting-back-references-in-bibliography-bibtex
\renewcommand*{\backrefalt}[4]{
    \ifcase #1 [Not cited.]%
        \or        [Cited on p.#2.]%
        \else      [Cited on p.#2.]%
    \fi}


\usepackage{mathrsfs}
\usepackage{upgreek}
\numberwithin{equation}{section}
\title{On counting lattice points in some tropical spaces and beyond
}
\author[Y. Tsutsui]{Yuki Tsutsui}
\address{Graduate School of Mathematical Sciences,
The University of Tokyo, 3-8-1 Komaba, Meguro-Ku,
Tokyo, 153-8914, Japan}
\email{tyuki@ms.u-tokyo.ac.jp}
\date{\today}

\begin{document}

\begin{abstract}
We consider a tropical version of counting lattices point for 
line bundles on tropical curves and integral affine manifold
with a Hessian form.
\end{abstract}
\maketitle
\section{Introduction}

((A explanation of tropical geometry))

The tropicalization of an $n$-dimensional
algebraic subvariety of an algebraic split torus 
is an $n$-dimensional polyhedral complex 
(see for instance 
\cite[Theorem 3.2.3]{MR3287221}).

One of main topics of tropical geometry is that 
how to calculate algebraic data on algebraic varieties
from tropical varieties with additional data. 
In particular, we may expect that we can calculate
some invariants of algebraic varieties
from tropicalization.

Since the Euler number of line bundle is invariant for 
degeneration of varieties
\myfootnote{
For instance, let $X\to \opn{Spec}(\Z_{p})$ be a
projective scheme over $\Z_{p}$ and $\mcal{L}$
be a line bundle on $X$ that is flat over $\Z_{p}$.
Then, 
$\chi_{\kappa(s)}(X_s;\mcal{L}_s)=
\chi_{\kappa(\eta)}(X_{\eta};\mcal{L}_{\eta})$.
Roughly speaking, this means that
we can calculate the Euler number of line bundles on
a projective scheme of characteristic zero from that on a 
projective scheme of a positive characteristic.
}
(e.g. \cite[p.50]{MR2514037}), 
and thus we can expect calculate (or estimate)
the Euler number of many interesting line bundles
by the geometry of dual complex of degeneration 
for a good family of algebraic variety or 
tropicalization.
((なぜ直線束のみに制限して話しているのかについての説明が
ないが理由を追加するべきか？))
Besides, we may expect that there exists 
a good tropical analog of the Euler characteristic of
line bundles, but there exist several difficulties of 
formalism of it, which I explain in the next subsection.

\subsection{Tropical Riemann--Roch theorem}

The Hirzebruch--Riemann--Roch theorem (HRR for short) and the Grothendieck--
Riemann--Roch theorem (GRR for short) 
are monumental works in
algebraic geometry (or complex geometry). 
Here is the statement of HRR for holomorphic line bundles on 
complex manifolds.
\begin{theorem}[{\cite{MR0202713}}]
Let $X$ be a compact complex manifold and
$\mathcal{L}$ a holomorphic line bundle on $X$.
Then there exists the following equation:
\begin{align} \label{equation-HRR}
\chi(H^{\bullet}(X;\mathcal{L}))
=\int_X \opn{ch}(\mathcal{L})\opn{td}(X).
\end{align}
\end{theorem}

((厳密には Hirzerbruch の元論文からの引用ではなく
改訂版だがよいか?))

It is natural to study some analogs of HRR or GRR 
for tropical varieties, but it is not easy by various
reasons.
In this subsection, we mainly focus on the difficulty of
the LHS of \cref{equation-HRR}.

At first, line bundles on tropical spaces are not sheaves of 
Abelian groups but commutative monoids in general.
Many authors have studied homological algebra of semimodules 
or non-Abelian categories (e.g. 
\cite{MR3051517,MR3211743,MR3939048,https://doi.org/10.48550/arxiv.2202.01573})
but the theory of sheaf cohomology of 
$\mathbb{T}$-semimodules on tropical spaces 
have been not applied to prove a tropical
analog of HRR or GRR.
((もう少しニュアンスを柔らかくしたい。))
The difficulty of homological algebra of semimodules
over idempotent semiring relates 
with the difficulty of the formulation of
higher dimensional
Riemann--Roch theorem for tropical varieties.
In fact, current tropical analogs of Riemann--Roch 
theorem is not formulated and proved by 
homological algebra of semimodules.

Tropical Riemann--Roch theorem for tropical curves 
is proved in \cite{gathmannRiemannRochTheoremTropical2008a}
as an extension of Riemann--Roch theorem for graphs
\cite{MR2355607}. The rank $r(D)$ of the linear system of a divisor $D$ 
on tropical curve in 
\cite{gathmannRiemannRochTheoremTropical2008a}
is \emph{not} an invariant of $\mb{T}$-(semi) modules
\myfootnote{In fact, 
in \cite[Example 6.5]{yoshitomi2011generators} 
the author give a simple example of divisors on 
tropical curves such that 
the rank of a divisor is different even though 
the $\mathbb{T}$-semimodule of the global section of 
tropical line bundle $\mcal{O}_C(D)$ is isomorphic.}
but this is truly one of good analog of classical one 
(see \cite[Lemma 2.4]{MR2448666}).
The rank of linear system is generalized by Cartwright
\cite{MR4131998,MR4251610}.
Cartwright defines an invariant 
$h^{0}(\Delta,D)$ for a divisor on tropical complex
which a certain analog of the dimension of
the $0$-th cohomology of a line bundle on algebraic 
variety.
in \cite[Definition 3.1]{MR4251610}.
If $\dim \Delta=1$, then $h^{0}(\Delta,D)=r(D)+1$
\cite[Proposition 3.3]{MR4251610}, and thus $h^{0}(\Delta,D)$
is a generalization of $r(D)+1$ for tropical complexes. 
Cartwright conjectured the Riemann--Roch inequality
$h^{0}(\Delta,D)+h^{0}(\Delta,K_{\Delta}-D)\geq 
\frac{D(D-K)}{2}+\chi_{\opn{top}}(\Delta)$.
On the other hand, a tropical analog of Riemann--Roch theorem
for higher dimensional tropical manifolds 
(or tropical complexes) is not formulated
since there hasn't been any good definition of 
Euler characteristic of line bundles on tropical 
manifolds as an extension of the above notions yet.

We also note the other dimensions of $\mb{T}$-semimodules 
(which are invariant for $\mb{T}$-semimodules) are defined for 
some authors 
(see for instance 
\cite[Definition 2.3]{mikhalkinTropicalCurvesTheir2008a}
and \cite[p.8]{yoshitomi2011generators}) but 
these dimensions have no tropical analog of 
Riemann--Roch formula like 
\cite{MR2355607,gathmannRiemannRochTheoremTropical2008a}.
This is another difficulty of homological approach of 
tropical Riemann--Roch formula. 

From the successes of tropical homology 
\cite{itenbergTropicalHomology2019b}, we 
may expect the existence of transformation from 
line bundles on tropical manifold to complexes of
constructible sheaves whose Euler number 
represents that of line bundle, but we need to 
be careful of that we can also observe that
the derived category $\opn{D}_{c}^{b}(B)$
of constructible sheaves on 
tropical manifold $B$ does not seem like a tropical 
analog of the derived category of coherent 
sheaves on algebraic variety directly.
\myfootnote{One of reasons
comes from the result in \cite{MR2449059,MR2565051}
and homological mirror symmetry for 
the derived category of coherent sheaves on complex split $n$-torus 
$(\C^{\times})^{d}$, the derived wrapped Fukaya category of $T^{*}(S^{1})^{n}$
by \cite{MR2822213}.
Therefore, $\opn{D}_c^{b}((S^{1})^{d})$ should behave like 
the derived category of coherent sheaves on 
$(\C^{\times})^{d}$
but not on some complex tori.
We will see another reason in \cref{remark- }.
}

As explained on the above, we need to attack, at least,
the following question for formulating a certain 
analog of HRR:

\begin{question}
What is a tropical analog of Euler number of sheaf 
cohomology of line bundles on algebraic varieties for 
tropical spaces ?
\end{question}

In this paper, we will pursue a different tropical
analog of Euler number of line bundles with the help of 
ideas on toric varieties,
Strominger--Yau--Zaslow conjecture
(SYZ conjecture for short)
and related topics.

\begin{remark}
We also note about the RHS of \cref{equation-HRR} 
for tropical manifolds. 
The $1$-st Chern class $c_1(\mathcal{L})$ of 
tropical line bundle $\mathcal{L}$ and 
the Chow group of rational polyhedral spaces and 
its cycle map is 
well-studied ((適切な参考文献\cite{gross2019sheaftheoretic})),
and thus we can define the Chern character
$\opn{ch}(\mathcal{L})$ of 
$\mathcal{L}$ naturally.
On the other hand, the Todd class of tropical manifold
have not been studied well enough yet  
when the dimension of tropical manifold is greater
than $2$.
We won't discuss the general theory of Todd class of tropical 
manifolds in this paper, 
but should be essentially defined from the theory of 
Chern--Schwartz--MacPherson cycles for matroids 
\cite[Previous work]{lopezdemedranoChernSchwartzMacPhersonCyclesMatroids2020}.
See also \cite[5.3]{mikhalkinTropicalGeometryIts2006} and
\cite[Definition 3.20]{shawTropicalSurfaces2015a}.
\end{remark}

\subsection{Counting lattice point of lattice polytopes}
In this subsection, we explain some backgrounds of 
our approach of our definition of Euler characteristic
of tropical line bundles.

In the case of some special line bundles on
tropical toric variety, our definition of Euler 
characteristic of it is essentially same with the
number of lattice points of the lattice polytope of it.

Before explaining about it, we recall some 
elemental properties of projective toric varieties over 
$\mathbb{C}$.
((See also \cite{MR2810322} for fundamental
properties of classical toric varieties.))
Let $P$ be a $n$-dimensional lattice polytope in 
$\mathbb{R}^{n}$, $X_P$ the projective toric variety
of $P$, $\mathcal{L}_P$ the line bundle on 
$X_P$ of $P$.
The sheaf cohomology of $\mathcal{L}_P$ has 
the following explicit isomorphisms:
\begin{align}
H^{\bullet}(X_P;\mathcal{L}_P)=
H^{0}(X_P;\mathcal{L}_P)\simeq
\bigoplus_{u\in P\cap \mathbb{Z}^{n}} \mathbb{C}z^{u},
\label{equation-danilov-formula} \\
H^{\bullet}(X_P;\mathcal{L}_P^{\vee})=
H^{n}(X_P;\mathcal{L}_P^{\vee})\simeq 
\bigoplus_{u\in \opn{int}(P)\cap \mathbb{Z}^{n}}\mathbb{C}z^{u}.
\end{align}
In particular, we have
\begin{align}
\chi(H^{\bullet}(X;\mathcal{L}_P))=
\sharp (P\cap \mathbb{Z}^{n}), \quad 
\chi(H^{\bullet}(X;\mathcal{L}_P^{\vee}))=
\sharp (\opn{int}(P)\cap \mathbb{Z}^{n}).
\end{align}
By \cref{equation-danilov-formula}, we can interpret HRR 
for smooth toric varieties 
as follows:
\begin{align}
\label{equation-toric-HRR}
\sharp (P\cap \mathbb{Z}^{n})
=\int_{X_P}\opn{ch}(\mathcal{L}_P)\opn{td}(X_P).
\end{align}
The prototype slogan of our approach
for a tropical analog of HRR is 
a realization of \cref{equation-toric-HRR}
for tropical manifolds.
We also note \cref{equation-danilov-formula} 
has a differential geometrical interpretation,
see also \cref{appendix-geometric-quantization}. 


Next, we will interpret the LHS of 
\cref{equation-toric-HRR} by the language
of tropical toric varieties.
Basic concepts and properties 
of tropical toric varieties is studied and 
explained in \cite{MR2428356,MR2511632,meyer2011intersection,MR3287221}.
Let $P$ be an $n$-dimensional convex lattice polytope in
$(\mathbb{R}^{n})^{\vee}$ and
$f\colon \mathbb{R}^{n} \to \mathbb{R}$ a 
smooth function which is defined as follows:
\begin{align}
  f(x)\deq\log (\sum_{u\in P\cap (\mathbb{Z}^{n})^{\vee}} 
\opn{exp}(a_u+\abk{u,x})),\quad  (a_u\in \mathbb{R}).
\label{equation-log-polynomial} 
\end{align}
Here 
$\abk{\cdot,\cdot}\colon 
(\mathbb{R}^{n})^{\vee}\times \mathbb{R}^{n}\to\mathbb{R}$
is the canonical pairing of a vector space and its dual.

We note $f$ is a Laurent polynomial function over the 
log semiring. 
In fact, $f=\opn{log}\circ p\circ \opn{exp}$ 
for some polynomial 
$p\in \mathbb{R}_{\geq 0}[x_1^{\pm},\ldots,x_n^{\pm}]
\setminus \{0\}$.
This observation is well-known and important 
for our approach.
Let $x_1,\ldots,x_n$ be the standard coordinates of 
$\mathbb{R}^{n}$.
The differential
$df:{\mathbb{R}}^{n}\to ({\mathbb{R}}^{n})^{\vee}; x\mapsto 
(\frac{\partial f}{\partial x_1}(x),\ldots,\frac{\partial f}{\partial x_n}(x))$ 
is an embedding onto $\opn{relint}(P)$
\cite[p.124 Exercise]{MR1301331}. 
The differential map is also naturally appeared as an 
exponential family in algebraic statistic,
information geometry and Hessian geometry.
\begin{example}
Let $f\colon \mathbb{R} \to {\mathbb{R}}; x\mapsto \log (1+e^{x})$ be a soft 
plus function. When we take a dequantization of $f$,
we get a ReLU $f^{\opn{trop}}(x)=\max\{0,x\}$ which 
is frequently used in machine learning.
The differential is a sigmoid function 
$df(x)=\frac{e^{x}}{1+e^{x}}$ and 
the image of $df$ is the open interval $(0,1)$.
\myfootnote{
The softmax function also are appeared 
naturally in a similar way 
when we consider tropical projective spaces.}
\end{example}

From now on, we assume 
$a_u=1$ for all $u\in P\cap \mathbb{Z}^{n}$ for simplicity.
We can naturally extend $df$ on tropical projective toric 
varieties and then the extension map is called the \emph{tropical moment map}
$\mu_{P}^{\opn{trop}}: X_{P}^{\opn{trop}}\simto P$ 
\cite[Definition 2.1 (2)]{MR2428356}.
Instead of moment map for Hamiltonian action of Lie group on
symplectic manifold, we
need not assume convex lattice polytope is not Delzant.
This is a tropical analog of algebraic moment map 
for toric varieties
(see for example
\cite[\textsection 12.2]{MR2810322}).

Let 
$q: ({\mathbb{R}}^{n})^{\vee}\to ({\mathbb{R}}^{n})^{\vee}/(\Z^{n})^{\vee}$ 
a canonical projection map.
Then the number of set of the intersection point of 
the graph of $q\circ \mu_P^{\opn{trop}}$ and 
that of zero map 
$0_{X_P^{\opn{trop}}}\colon X_P^{\opn{trop}} \to
({\mathbb{R}}^{n})^{\vee}/(\Z^{n})^{\vee}$ is equal to the 
number of lattice points in $P$:
\begin{align}
\label{equation-moment-map-intersection}
\sharp (0_{X_P^{\opn{trop}}}\cap q\circ\mu_P^{\opn{trop}})
=\sharp (P \cap \Z^{n}).
\end{align}
On the other hand, from \cref{equation-log-polynomial} 
we can construct data $\{(U_i,f_i)\}_{i\in I}$ of 
pairs of open subsets 
$U_i$ of $X_{P}^{\opn{trop}}$ and 
"smooth functions" $f_i\colon U_i \to \mathbb{R}$. 
The data is very similar with elements of 
$\opn{CaDiv}^{\infty}(X_{P}^{\opn{trop}})\deq H^{0}(X_{P}^{\opn{trop}};
\mcal{A}^{0,0}_{X_{P}^{\opn{trop}}}/
\mathcal{O}^{\times}_{X_{P}^{\opn{trop}}})$.
\myfootnote{
Be careful that this data is not an element
of $\opn{CaDiv}^{\infty}(X_{P}^{\opn{trop}})$ since
 the former collection of smooth functions is not constant
at any neighborhood of the corner of $X_{P}^{\opn{trop}}$,
i.e., the fixed point of the torus action on tropical 
toric varieties.
In particular, every (0,0)-superform on 
$\mathbb{T}^n$ is constant at 
$(-\infty,\ldots,-\infty)$.

By adding functions 
$\opn{log}\circ f \circ\opn{exp}$ for some smooth function
$f\colon \mathbb{R}_{\geq 0}^{n}\to \mathbb{R}_{>0}$,
we can overcome this weak point.
}
$\opn{CaDiv}^{\infty}(X_{P}^{\opn{trop}})$ is a
smooth version of the group of tropical Cartier divisor
$\opn{CaDiv}(X_{P}^{\opn{trop}})$ 
\cite[Definition 4.2]{MR3894860}
which is defined by the sheaf of $(0,0)$-super forms 
$\mcal{A}^{0,0}_X$ on 
polyhedral spaces.
\begin{example} \label{eg: TP1Cartier}
Fix a continuous function $f\colon \mathbb{R}\to \mathbb{R}; 
x\mapsto \opn{log}(1+e^{nx})$.
Its differential induces a homeomorphism 
from $\mathbb{T}P^1$ onto $[0,n]$. 
$\mathbb{T}P^{1}$ is covered by two open subsets:
$U_1\deq \mathbb{T}$ and $U_2\deq \mb{R}\cup\{+\infty\}$.
Take two continuous functions on each $U_i$ as follows:
\begin{align}
f_{1,n}\colon \mathbb{T}\to \mathbb{T};
x \mapsto \log (1+e^{nx}),\quad
f_{2,n}\colon \mb{R}\cup\{+\infty\} \to 
\mathbb{T};
x\mapsto \log(1+e^{nx})-nx.
\end{align}

Data $\{(U_i,f_{i,n})\}_{i=1,2}$ defines an element 
$D_n\deq (f_{1,n}-f_{2,n}=nx)\in 
H^{1}(\mb{T}P^1;\mcal{O}_{\mb{T}P^1}^{\times})\simeq \Z$
as a \v{C}ech cocycle.
Then, we have the following analog of 
\cref{equation-toric-HRR}:
\begin{align}
\label{equation-MRR-tropical-line}
\sharp([0,n]\cap \Z)=\opn{deg}(D_n)+1=
\opn{deg}(D_n)+\chi_{\opn{top}}(\mb{T}P^1).
\end{align}
\end{example}







%TODO: ラグランジュ切断に関して説明。


Another important point is that 
we can consider \cref{equation-moment-map-intersection}
as the intersection of two "Lagrangian submanifolds".
We now explain about this meaning.
Let $f\colon B\to \mathbb{R}$ be a 
smooth function on a smooth manifold $B$.
$f$ defines a section 
$\sigma_{df}\colon B\to T^{*}B; x\mapsto (x;df(x))$ of 
the cotangent bundle $\pi\colon T^{*}B\to B$.
We note that the intersection number of 
$\sigma_{df}$ and the zero section of the cotangent
bundle is equal to the topological Euler characteristic
of $B$ if $B$ is compact.
If $B$ is an integral affine manifold, i.e.,
((手短に整アファイン多様体の定義を書く)), 
$\sigma_{df}$ induces a section 
$s_{df}\colon B\to T^*B/\Lambda$ of a torus fibration
$\check{\pi}_B\colon T^*B/\Lambda \to B$ via a canonical 
projection $\pi \colon T^*B\to T^*B/\Lambda$.
$T^{*}B_0$ and $\check{X}(B_0)\deq T^*B\to T^*B/\Lambda$
has a canonical symplectic structure and
both $\sigma_{df}(B)$ (resp. $s_{df}(B)$) are Lagrangian 
submanifolds of $T^{*}B_0$ 
(resp. $T^*B/\check{\Lambda}$).

\begin{example}
Let $B_0\deq\mathbb{R}^{n}$ be 
an integral manifold with the standard coordinate and
$f$ a smooth function defined by
\cref{equation-log-polynomial}.
Then, $s_{df}(X)$ is equal to the graph of 
$q\circ df$. In particular,
\begin{align}
\sharp (0_{\check{X}(B_0)}(X)\cap s_{df}(X))=
\sharp (\opn{int}(P\cap (\mathbb{Z}^{n})^{\vee})).
\end{align}
where $0_{\check{X}(B_0)}$ is the 
zero section of 
$\check{\pi}_{B_0}\colon\check{X}(B_0)\to B_0$.
\end{example}

The sections whose image are Lagrangian
submanifolds are called
\emph{Lagrangian sections}
\index{Lagrangian section@Lagrangian section}
which is well-studied in the field of homological 
mirror symmetry 
(see for instance \cite{MR1882331}).
In general, every element $D$ of Picard group of 
integral affine manifold $B$ has a smooth Cartier
divisor $s\in \opn{CDiv}^{\infty}(B)$ whose divisor 
class is equal to $D$ and 
$s$ induces a Lagrangian section of 
$\check{\pi}_{B_0}\colon \check{X}(B)\to B$.
If $B$ is a tropical elliptic curve 
$\mathbb{R}/\mathbb{Z}$, then we can check there exists 
a similar formula of 
(\ref{equation-MRR-tropical-line}) easily.

\begin{example}
Let $f_n\colon \mathbb{R}\to \mathbb{R};
x\mapsto \frac{n}{2}x^{2}$ be a quadratic polynomial.
The polynomial induces a smooth Cartier divisor 
$s_n$ on $\mathbb{R}/\mathbb{Z}$ naturally.
The associated Lagrangian section of $f_n$ is
$s_n'\colon\mathbb{R}/\mathbb{Z}\to 
\check{X}(\mathbb{R}/\mathbb{Z});x\mapsto (x;nx)$.
Then,
\begin{align}
\sharp(0_{\check{X}(\mathbb{R}/\mathbb{Z})}\cap 
s_n'(\mathbb{R}/\mathbb{Z}))
=\opn{deg}(s_n)+\chi_{\opn{top}}(\mathbb{R}/\mathbb{Z}). 
\end{align}
This is a certain analog of Riemann--Roch formula 
for elliptic curves.
\end{example}



If SYZ conjecture is true, the equation should be
true for closed integral affine manifolds.


In particular, Lagrangian sections are mirror of line bundles on
mirror varieties. 
In this paper, we consider a 
This gives an interesting insight which is inspired from
SYZ conjecture.
(See \cref{rmk: floer-coherent-problem} 
for detail about it.)

This interpretation works for integral affine manifold 
with singularities $B$ as a lattice point of $B$. 



\begin{align}
\label{equation-MRR}
\chi (\opn{HF}^{\bullet}(\check{X}(B);s))=
\int_{X(B)}\opn{ch}(\mathcal{L}_s)\opn{td}(X(B))
\end{align}

The following question is our approach.
\begin{question}
Can we replace the
In particular, is there an analog of Floer complex of
Lagrangian submanifolds for line bundles on 
tropical spaces?  
\end{question}



The following question is not formulated as a mathematical 
conjecture since we don't know the definition of Todd 
class of $n(\geq 3)$ dimensional tropical manifolds,
but we write it for showing a slogan of formulation 
of a tropical analog of HRR.

\begin{conjecture}[{Tropical Mirror Riemann--Roch Problem
\cref{conjecture-tropical-MRR}}]
Let $B$ be a compact tropical manifold and $\mcal{L}$
be a line bundle on it. Suppose $B$ has the Todd class
$\opn{td}(B) \in \mb{H}^{\bullet}(B;\mcal{F}_{\Z, B}^{\bullet})$.
 Let $s$ be a "generic"
extended smooth Cartier data satisfying an admissible condition 
\cref{cond: admissible} which represents of $\mcal{L}$
and its graded $\Z$-module $\opn{MF}^{\bullet}(B;s)$
of it. Then,
\begin{align}
\chi(\opn{MF}^{\bullet}(B;s))=\int_B \opn{ch}(\mcal{L})\opn{td}(B).
\end{align}
where $\int_B$ is the trace map 
$\mb{H}^{\bullet}(B;\mcal{F}_{\Z, B}^{\bullet})\to \Z$.

In particular, when $\mcal{L}=\mcal{O}_B$ then
$\chi(\opn{MF}^{\bullet}(B;s))=\chi_{\opn{top}}(B)$ ?
\end{conjecture}

\begin{remark}
Here is the list of the reason why the Euler 
characteristic of structure sheaf of tropical manifold
should be equal to the topological Euler characteristics of it.
\begin{enumerate}
\item If $B$ is a compact tropical curve and $D$ 
is trivial divisor, then the tropical Riemann--Roch 
formula in 
\cite{gathmannRiemannRochTheoremTropical2008a}
says $r(D)-r(K_B-D)=\chi_{\opn{top}}(B)=\frac{1}{2}\opn{deg}(-K_B)$. 
\item If $B$ is a tropical surface satisfying a certain 
good condition there exists the Noether formula
$\chi_{\opn{top}}(B)=\frac{c_1(K_B)^{2} +c_2(B)}{12}$ 
\cite[Theorem 5.1]{shawTropicalSurfaces2015a}.
\item 
\cite[Corollary 2]{itenbergTropicalHomology2019b} says 
that the Hodge number $h^{p,q}(Z_w)$ of a general fiber $Z_w$ of
a one-parameter family $\mathcal{Z}$ of 
complex projective varieties over a punctured disc which 
has a tropical limit to a smooth projective 
$\mathbb{Q}$-tropical variety $X$, 
is equal to that of tropical homology 
$H_{q}(B;\mathcal{F}_p)$ of it. If $p=0$, then
$h^{0,q}(Z_w)=\dim_{\mathbb{R}}H_{q}(B;\mathbb{R})
=\dim_{\mathbb{R}} H^{q}(B;\mathbb{R})$.
Therefore, $\chi(H^{\bullet}(Z_w;\mathcal{O}_{Z_w}))=
\chi_{\opn{top}}(B)$.
\end{enumerate}

\end{remark}

In this paper, we give a partial answer for compact tropical curves 
and integral affine manifolds with Hessian form
as test plays of the above question:

\begin{theorem}[{\cref{theorem-MRR-tropical-curve},
\cref{thm: HesseRR}}] \label{thm: main}
Let $C$ (resp. $B$) be a compact tropical curve $C$ 
(resp. $n$-dimensional integral 
affine manifold $B$
with a Hessian form) and $s=\{(U_i,f_i)\}_{i\in I}$ an admissible 
locally real analytic 
Cartier data on $C$ (resp. $B$) such that 
$\sharp(s\cap s_0)<\infty$. Then,
\begin{align}
\chi(\opn{MF}^{\bullet}(C;s))=\int_C c_1(D_s)+\frac{1}{2}c_1(-K_C), \quad 
\chi(\opn{MF}^{\bullet}(B;s))=\int_B \frac{c_1(D_s)^{n}}{n!}.
\end{align}
where $\chi(C,s)$ (resp. $\chi(B,s)$) is the number of weighted lattice
points on $s$ (see \cref{def: weighted_lattice_points}) and $D_s$ is the divisor class of $s$.
\end{theorem}

The condition of admissibility is that every cotangent vector 
is not in hyperplanes defined by the span of microsupport of
cotangent sheaf of $C$. 


We note that this theorem has already essentially proved for some
literature as a trivial corollary of homological mirror symmetry 
in \cite{MR4301560} and \cite{auroux2022lagrangian} (see \cref{rmk: curve_mirror} and \cref{rmk: integral_mirror} 
for more details) but we reprove it in tropical  
geometrical setting as a test play of another approach 
for a tropical analog of Riemann--Roch formula for 
good tropical spaces. This approach is different
from classical approach such like 
\cite{MR2355607,gathmannRiemannRochTheoremTropical2008a,mikhalkinTropicalCurvesTheir2008a} but
a toy model of homological mirror conjecture in the sense
of \cite[{\textsection 7}]{auroux2022lagrangian}.

\begin{remark}
We expect our approach works for various style 
of tropical spaces. In fact, our approach is 
truly related with Gross--Siebert programs. 
\end{remark}

\begin{remark}
Our approach is deeply related with the theory of
geometric quantization. We write about it in 
\cref{appendix-geometric-quantization}.
\end{remark}

\textit{Acknowledgments:}
We also thank for Kentaro Yamaguchi for explaining about
\cite{MR4234675} and his results of master thesis 
\cite{yamaguchimaster}. We thank for Yuto Yamamoto for
explaining about the radiance obstruction of integral 
affine manifold with singularities and Gross--Siebert
programs.
This work was supported by JSPS KAKENHI 
Grant Number 21J14529.

This paper is organized as follows:

\begin{Note}[Guide for reading this paper]
  In order to reveal the relationships between our study
  and other topics, we cannot avoid introducing various
  notions. However, our results are almost elementary
in the case of tropical curves,
  so we write down a shortcut course of this paper as below:
\end{Note}

\begin{Not}

We will use the following notation in this paper:

\begin{itemize}
\item For every continuous function $f\colon X\to {\mathbb{R}}$,
\begin{align*}
\{f<f(v)\}\deq \set{x\in X\mid f(x)< f(v)},\quad
\{f\geq f(v)\}\deq \set{x\in X\mid f(x)\geq f(v)}.
\end{align*}
\item $\opn{Crit}(f)$: the subset of critical points of
a $C^{1}$-function $f$ on a smooth manifold.
\item   $X\sqcup_{f,g}Y$: the pushout of the diagram
  $X\xgets{f} S\xto{g} Y$.
\item $\{\opn{pt}\}$: the topological space of 
a fixed singleton set.
\item $a_X\colon X\to \{\opn{pt}\}$:
the continuous map from a topological space $X$ to
$\{\opn{pt}\}$.
\item $A_X$: the constant sheaf on a topological space $X$ 
with fiber $A$.
\item $\catn{Mod}(\mathcal{R})$: the category of 
sheaves of $\mathcal{R}$-modules
(e.g. \cite[Definition 2.2.6]{MR1299726}).
\item $\opn{D}^{b}(\mathcal{C})$: the derived category
of bounded complexes of a given abelian category 
$\mathcal{C}$.
\end{itemize}

\end{Not}

\begin{Note}
We also impose the following assumption for simplicity in this paper:
\begin{itemize}
\item Any topological space is Hausdorff and
locally compact unless otherwise specified.
\item Any ring is a commutative ring with unity.
\item We identify any ring $A$ with a constant sheaf on
$\{\opn{pt}\}$ with fiber $A$.
\item Any $C^{\alpha}$-manifold is paracompact for 
$\alpha=0,1,\ldots,\infty,\omega$.
\item We mainly use min-plus algebra.
\myfootnote{We write down the reason of this in 
\cref{rmk: mix vs max}.}
\end{itemize}



\end{Note}

\section{The cohomological local Morse datum}
In this section we recall some elementary results
for cohomological local Morse data of sheaves from
\cite{MR2031639,MR1299726,MR4294126}.



\subsection{Sheaf theory on locally compact 
Hausdorff spaces.}
In this subsection, we follow some classical results of
the theory of sheaves on locally compact topological
spaces from \cite{iversenCohomologySheaves1986a,
MR1299726,MR1269324,MR2050072}.
The notion and symbols for 
sheaf theory mainly follows from \cite{MR1299726}
unless otherwise specified.

\subsubsection{Notes for modules over PID}

Henceforth, we assume $A$ is a PID. 
Then, the (global) homological dimension of 
$\catn{Mod}(A)$ is less than or equal to $1$
\cite[Exercise I.17, I.28]{MR1299726}.
Therefore, for any $M^{\bullet}\in \opn{Ob}(\opn{D}^{b}(\catn{Mod}(A)))$
there exists the following quasi-isomorphism 
\cite[Exercise I.18]{MR1299726}:
\begin{align}
M^{\bullet}\simeq 
\bigoplus_{i\in \Z}H^{i}(M^{\bullet})[-i].
\end{align}

Let $\catn{mod}(A)$ be the category of 
finitely generated $A$-modules.
Since $A$ is PID, then the Grothendieck group 
$K_0(\catn{mod}(A))$ is isomorphic to $\Z$ by
the rank $\opn{rk}_A M$ of a finitely generated
$A$-module $M$.
If $M^{\bullet}$ is a bounded $\Z$-graded finitely generated $A$-module,
then we can define the Euler characteristic 
$\chi(M^{\bullet})\deq 
\sum_{i\in \Z}(-1)^{i}\opn{rk}_A M^{i}$.
If $(M^{\bullet},d)$ is a bounded chain complex of finitely 
generated $A$-module, then 
$\chi(M^{\bullet})=\chi(H^{\bullet}(M^{\bullet}))$.
We note $K_0(\mathcal{C})\simeq 
K_0(\opn{D}^{b}(\mathcal{C}))$ for any abelian category 
\cite[Exercise I.27]{MR1299726}.

\subsubsection{Some operations of sheaves}

From now on, we recall some elementary 
operations of sheaves. 
Let $f\colon Y\to X$ be a continuous map.
$f$ induces the functor $f_!$ of
the direct image with proper supports 
\cite[(2.5.1)]{MR1299726}. 
We note $a_{X,!}\mathcal{F}\simeq \Gamma_c(X;\mathcal{F})$.

Let $X$ be a topological space, $Z$ a locally closed 
subset of $X$
and $i\colon Z\to X$ be the inclusion map.
For a given sheaf $\mathcal{F}$ on $X$, 
\begin{align}
\mcal{F}|_{Z}\deq i^{-1}\mcal{F}, \quad 
\mcal{F}_Z\deq i_! i^{-1}\mcal{F}, \quad 
A_{Z\subset X}\deq i_! A_Z.
\end{align}

 
The symbol $A_{Z\subset X}$ is not used in \cite{MR1299726} 
but in \cite{MR932640}.
From \cite[Proposition 2.5.4]{MR1299726}, $i_!$ is exact 
and $\mcal{F}_Z$ is isomorphic to the sheaf defined in
\cite[p.93]{MR1299726}.
If $Z'$ be a closed subset of $Z$, then
there exists the following exact sequence 
\cite[Proposition 2.3.6.(v)]{MR1299726}:
\begin{align}
0\to \mathcal{F}_{Z\setminus Z'} \to 
\mathcal{F}_Z \to \mathcal{F}_{Z'}\to 0.
\end{align}

\begin{example}

\end{example}

Let $\Gamma_{Z}(\mcal{F})$ be the sheaf of sections of 
$\mcal{F}$ supported by $Z$
\cite[Definition 2.3.8]{MR1299726} and 
$\Gamma_{Z}(X;\mcal{F})$. This sheaf is defined as follows:

\begin{enumerate}
\item Let $U$ be a open subset of $X$ such that $U$ contains
$Z$ as a closed subset of $U$ then we write
\begin{align}
  \Gamma_Z(U;\mcal{F})\deq \opn{Ker}(\mcal{F}(U) \to 
\mcal{F}(U\setminus Z)).
\end{align}
\item If $V$ is an open subset of $U$ contain $Z$ then
$\Gamma_{Z}(U;\mcal{F})\simeq \Gamma_{Z}(V;\mcal{F})$
via the canonical morphism. Therefore, we can define
$\Gamma_{Z}(X;\mcal{F})\deq \Gamma_{Z}(U;\mcal{F})$.
\item The sheaf $\Gamma_{Z}(\mcal{F})$ is defined as the presheaf 
$U\mapsto \Gamma_{Z\cap U}(U;\mcal{F})$ on $X$.
\end{enumerate}

$\Gamma_Z(X;\cdot)$ is a left exact functor from 
$\opn{Mod}(A_X)$ to $\opn{Mod}(A)$,
and $\Gamma_{Z}(\cdot)$ is a left exact functor from
$\opn{Mod}(A_X)$ to $\opn{Mod}(A_X)$ 
\cite[Proposition 2.3.9 (i)]{MR1299726}.

Let $f\colon Y\to X$ be a continuous map,
$\mathcal{F}\in \opn{Ob}(\catn{Mod}(A_X))$
and $\mathcal{G}\in\opn{Ob}(\catn{Mod}(A_Y))$.

Then, we have the following isomorphism 
\cite[(2.3.19)-(2.3.20)]{MR1299726}:
\begin{align}
f^{-1}\mathcal{F}_Z\simeq 
(f^{-1}\mathcal{F})_{f^{-1}(Z)},\quad 
\Gamma_Zf_*\mathcal{G}\simeq f_*\Gamma_{f^{-1}(Z)}
\mathcal{G}.
\end{align}


Let $X$ be a topological space, $Z$ be a locally 
closed subset of $X$ and $Z'$ a closed subset of $Z$.

There exists the following distinguished triangle 
for any $\mathcal{F}^{\bullet}\in \opn{Ob}(\opn{D}^{b}(A_X))$ 
\cite[(2.6.32)]{MR1299726}:
\begin{align} \label{eq: exactlocal}
  R\Gamma_{Z'}(\mcal{F}^{\bullet})\to 
R\Gamma_{Z}(\mcal{F}^{\bullet})\to 
R\Gamma_{Z\setminus Z'}(\mcal{F}^{\bullet})\xto{[1]} 
R\Gamma_{Z'}(\mcal{F}^{\bullet})[1]
\end{align}



\begin{example}

We mention two elementary properties 
about stalks of $R\Gamma_{Z}(\mcal{F})$ of a sheaf on 
$X$.

\begin{enumerate}
\item Let $j:V\to X$ be an open inclusion and $Z$ be a 
closed subset of $X$.
Then, $\Gamma_{Z\cap V}(\mcal{F}|_V)(U)=
\Gamma_{Z\cap U}(U\cap V;\mcal{F})=\Gamma_{Z\cap U}(\mcal{F})|_V(U)$
for any open subset $U$.
Therefore, $\Gamma_{Z\cap V}\circ j^{-1}=j^{-1}\circ \Gamma_{Z}$.
In particular, for any point $v\in V$
\begin{align}
  (R(\Gamma_{Z\cap V}(\mcal{F}|_{V}))_v\simeq (R(j^{-1}\circ \Gamma_{Z})(\mcal{F}))_v\simeq R\Gamma_{Z}(\mcal{F})_v
\end{align}
Therefore, the stalk is independent of 
the choice of $V (\ni v)$.
\item Let $i: Y\to X$ be an closed inclusion.
Since $i_!=i_*$ and $i_!$ is exact,
\begin{align}
  j^{-1}R\Gamma_{Z}(j_*\mcal{F})\simeq j^{-1}R(\Gamma_{Z}\circ j_*)\mcal{F}
  \simeq j^{-1}R(j_*\circ \Gamma_{j^{-1}(Z)})\mcal{F}
  \simeq R\Gamma_{Z\cap Y}\mcal{F}
\end{align}
In particular, $(R\Gamma_{Z}(i_*\mcal{F}))_v
  \simeq (R\Gamma_{Z\cap Y}\mcal{F})_v$ for $v\in Y$.
\end{enumerate}

\end{example}



\subsection{Local index}

The following stalk complex (or graded module) is 
the most important notion
for this paper which is naturally appeared from 
microlocal sheaf theory 
which is called "local Morse datum" in \cite[p.271]{MR2031639} 
or microlocal stalk in \cite{MR4132582}.
\begin{definition}[{Cohomological local Morse datum}]
\label{definition-local-morse-data}
Let $f\colon X\to {\mathbb{R}}$ be a continuous map on a 
topological space $X$ and $x\in X$. Fix 
$\mathcal{F}^{\bullet}\in 
\opn{Ob}(\opn{D}^{b}(\catn{Mod}(\mathbb{Z}_X)))$.
\begin{align}
\opn{LMD}(\mcal{F}^{\bullet},f,x)\deq R\Gamma_{\{f\geq f(x)\}}
(\mcal{F}^{\bullet})_x, \quad \opn{MF}^{\bullet}(\mcal{F}^{\bullet},f,x)\deq 
H^{\bullet}(\opn{LMD}(\mcal{F},f,x)).
\end{align}
\end{definition}

\begin{remark}
\begin{enumerate}
\item We follow the above notation from 
\cite[p.271]{MR2031639} for two reasons.
One of this is for easy to see the triple 
$(\mcal{F}^{\bullet},f,x)$. 
The other one is for emphasizing on analogy to
Morse complexes.
((モース複体との類似性は後で \cref{example-} にて見る。))
\item We don't assume $f$ satisfies some 
"Morse condition" since
 we need to use some $C^{\infty}$-function
which is \emph{not} a Morse function in the sense of 
stratified Morse theory (see for example
\cite[Part 1.2.1]{MR932724}). 
((また、本論文では、条件の良し悪しを後で比較するために
\cref{definition-local-morse-data} の$f$ に対しては
何の条件も課さない。一方で、本論文では$f$ に対する
条件 \cref{condition-isolated-singularity}を課す。))
We also note that we need to use 
the graded module $\opn{MF}^{\bullet}(\mcal{F},f,x)$ instead of 
the complex $\opn{LMD}(\mcal{F},f,x)$ in order to define
a graded module associated with line bundle on tropical
spaces. See also \cref{remark-differential-graded-module} for more about 
this reason.
\end{enumerate}
\end{remark}

Before we see some important examples of cohomological
local Morse datum, we will see some elementary
properties of them.

From \cref{eq: exactlocal} and by taking stalks,
we have the following distinguished triangle:
\begin{align}
\opn{LMD}(\mathcal{F},f,x) \to \mathcal{F}_x\to 
(R\Gamma_{\{f<f(x)\}}\mathcal{F})_x\to 
\opn{LMD}(\mathcal{F},f,x)[1].
\end{align}

The following data is the key data of our paper.
\begin{definition}[{local Morse index}]
Let $f$ be a continuous function on a topological space
$X$ and $x\in X$.
%TODO: オイラー数が定義できるよう定義を是正
The \emph{local Morse index} of $f$ at $x$ is the following:
\begin{align}
\opn{ind}_x(f)\deq \chi(\opn{MF}^{\bullet}(A_X,f,x)).
\end{align}
\end{definition}

The following proposition is useful:

\begin{proposition} \label{prop-local-morse-data}
Let $f\colon X\to \mathbb{R}$ be a continuous function
on $X$, $S$ a closed subset
of $X$, $x\in S$, $V$ a locally closed subset of $X$ such that
$S\cap V$ is a neighborhood of $x$ in $S$. Then,
\begin{align}
\opn{MF}^{\bullet}(A_{S\cap V\subset V},f|_V,x)&\simeq 
\opn{MF}^{\bullet}(A_{S\subset X},f,x
) \simeq \varinjlim_{U\in \opn{Op}(X)\cap \opn{Nbh}(x)} 
\tilde{H}^{\bullet-1}(S\cap \{f<f(x)\}\cap U;A) \\
& \simeq \opn{MF}^{\bullet}(A_S,f|_S,x).
\end{align}

\end{proposition}

Here, $\tilde{H}^{i-1}(X;A)$ is the reduced cohomology 
group
of $A_X$ (see 
\cite[p.199]{hatcherAlgebraicTopology2002a} for 
reduced singular cohomology).
\begin{proof}
If the second isomorphism is true, then the rest
isomorphisms are also true from the definition of 
the stalk of sheaves.
From definition of $A_{S\subset X}$, 
$(A_{S\subset X})_x\simeq A$.
There exists the following Cartesian square of 
inclusion maps:
Let $i\colon S\to X$, 
$j\colon \{f<f(x)\}\to X$, 
$i'\colon S\cap \{f<f(x)\} \to \{f<f(x)\}$ and 
$j'\colon S\cap \{f<f(x)\} \to S$
 be the inclusion maps.
Then, 
$j^{-1}\circ i_!\simeq i'_!\circ g'^{-1}$ 
\cite[Proposition 2.5.11]{MR1299726}.
Besides, $i,i'$ are closed inclusion maps, and thus
we have the following quasi-isomorphisms:
\begin{align}
R\Gamma_{\{f<f(x)\}}A_{S\subset X}\simeq 
Rj_*\circ j^{-1} \circ i_! \circ i^{-1}A_X&\simeq 
R (j \circ i')_*\circ (i\circ j')^{-1}A_X \\
&\simeq R (j \circ i')_* A_{S\cap \{f<f(x)\}}.
\end{align}
From the elemental properties of higher direct image
(e.g. \cite[II. Proposition 5.11]{iversenCohomologySheaves1986a}), we have
\begin{align}
  (R^{n} (j \circ i')_* A_{S\cap \{f<f(x)\}})_x\simeq 
\varinjlim_{U\in \opn{Op}(X)\cap \opn{Nbh}(x)} 
H^{n}(S\cap \{f<f(x)\}\cap U;A).
\end{align}
\end{proof}

By \cref{prop-local-morse-data}, we can calculate
of local Morse index of a continuous function on 
a given polyhedral complex by the theory of sheaves on 
real manifolds. In particular, 
we can apply the micro local index formula 
\cite[Theorem 9.5.6]{MR1299726} for 
constructible sheaves on real manifolds.

We will see several examples of local Morse data 
and index for manifolds.

\begin{condition}
\label{condition-isolated-singularity}
$f\colon X\to \mathbb{R}$ is a $C^{1}$-function on a 
smooth manifold $X$ with an isolated singularity
at $x$ and $S$ is a connected closed subset of $X$ which is homeomorphic to 
an open subset of a finite cell complex. 
\end{condition}

\begin{example}
Since $\tilde{H}^{\bullet}(\emp;A)=A[1]$, 
if $f$ is a convex $C^{1}$-function with an isolated 
critical point at $x$ then
$\opn{MF}^{\bullet}(A_{S},f|_S,x)\simeq A[0]$.
\end{example}

We also use the locally analytic condition frequently:

\begin{condition}
\label{condition-local-analytic}
$f\colon X\to \mathbb{R}$ is a $C^{\infty}$-function
with an isolated singularity at $x$ such that 
there exists a real analytic function $f_0$ on an open 
subset $U$ of $\mathbb{R}^{n}$ and a smooth embedding
$\phi \colon U\to X$ satisfying $x\in \phi(U)$ and
$f_0=f\circ \phi$.
\end{condition}

\begin{remark}
Of course, \cref{condition-local-analytic} is tentative
since various important
features work under weaker condition for functions. 
We mainly use this condition for
simplicity of our claims and revealing a similarity between
graded module of our sense and Floer complex of Lagrangian 
submanifolds.
\end{remark}

From now on, we see some typical examples of local
Morse data satisfying 
in the case $S=X$.

\begin{example}[{\cite[p.22]{MR2031639}}]
From Morse lemma, every Morse function with a critical 
point at $x$ satisfies the \cref{condition-local-analytic}.
Fix $X=S={\mathbb{R}}^{n}$.
A polynomial function 
$f\colon {\mathbb{R}}^{n}\to {\mathbb{R}};(x_1,\ldots,x_n)\mapsto x_1^{2}+
\cdots+x_n^{2}$ gives the following local Morse data:
\begin{align}
    \opn{MF}^{\bullet}(\Z_S,f,x)\simeq \tilde{H}^{\bullet-1}(\emp;\Z_S),
    \quad \opn{MF}^{\bullet}(\Z_S,-f,x) \simeq \tilde{H}^{\bullet-1}(S^{n-1};\Z_S).
  \end{align}
\end{example}



\begin{example}[{Real Milnor fiber}] 
\label{example-milnor-morse-data}
We mainly follow from \cite[3.2]{MR3779558} for this example.
Fix $X\deq S\deq \mathbb{R}^{n}$.
Let $f\colon {\mathbb{R}}^{n}\to {\mathbb{R}}$ be a real polynomial function
which has with one isolated critical point at $x$.
Let's calculate 
$\chi (\opn{MF}^{\bullet}(\Z_X,f,x))
=\chi(\tilde{H}^{\bullet-1}(\{f<f(x)\};\Z))$.
Let $B_{\vep,x}\deq \set{y\in {\mathbb{R}}^{n}\mid \|x-y\|\leq \vep}$
for $\vep \in \mathbb{R}_{> 0}$,
$S_{\vep,x}\deq\partial B_{\vep,x}$ and 
$\opn{Cone}(X)$ the cone of a topological space $X$
\cite[Example 4.4]{hatcherAlgebraicTopology2002a}.

There exists a homeomorphism of pairs of
topological spaces:
\begin{align}
(B_{\vep,x},B_{\vep,x}\cap \{f=0\})\simeq 
(\opn{Cone}(S_{\vep,x}),\opn{Cone}(S_{\vep,x}\cap \{f=0\}))
\end{align}
for sufficiently small $\vep>0$
\cite[Theorem 2.10]{MR0239612}.
From this $B_{\vep,x}\cap\{f<f(x)\}$ is homeomorphic to
$(S_{\vep,x}\cap \{f<f(x)\})\times (0,\vep]$.
Besides, $S_{\vep,x}\cap \{f<f(x)\}\simeq 
f^{-1}(-\delta)\cap B_{\vep,x}$
for sufficiently small $\vep>\delta>0$ 
\cite[Lemma 5.10]{MR0239612}.
$f^{-1}(-\delta)\cap B_{\vep,x}$ is called 
the (negative) \emph{real Milnor fibre}.
By Khimshiashvili [Himšiašvili] formula \cite{MR0458467}, we have
\begin{align} \label{eq: Khim}
  \opn{ind}_x(f)
=1-\chi(f^{-1}(-\delta)\cap B_{\vep,x})
=\opn{ind}_{\opn{PH}}(\opn{grad} f,x).
\end{align}
Here, $\opn{ind}_{\opn{PH}}(\opn{grad} f,x)$ is the 
Poincar\'e--Hopf index of the gradient of $f$ for the standard 
inner product on ${\mathbb{R}}^{n}$.
We can generalize the above for real analytic functions with 
at most isolated singular points. 
In this case, there exists the following \emph{special} symmetry:
\begin{align}
\chi(\opn{MF}^{\bullet}(\Z_X,f,x))=
(-1)^{\dim X}\chi(\opn{MF}^{\bullet}(\Z_X,-f,x)).
\end{align}
This symmetry is not true if $S$ is not a manifold at $x$
in general. 
\end{example}

The equation $\opn{ind}_v(f)=
\opn{ind}_{\opn{PH}}(\opn{grad} f,x)$ in 
\cref{example-milnor-morse-data}
can be considered 
as the intersection number 
$\sharp ([\sigma_{df}]\cap [T^{*}_X X])_x$ of cycles in $T^{*}X$
at $x\in X$,
and this is a special case of
the following microlocal index theorem:

\begin{theorem}[{\cite[Theorem 9.5.6]{MR1299726}}]
Let $X$ be a compact analytic manifold and 
$f$ a real analytic function, $\mathcal{F}$ 
a constructible sheaf on $X$ such that 
$\sigma_{df}(X)\cap \opn{SS}(\mathcal{F})
\subset \{(x;d\phi(x))\}$.
Then, 
\begin{align}
\chi(\opn{LMD}(\mcal{F},f,x))
=\sharp ([df]\cap \opn{CC}(\mcal{F})).
\end{align}
Here, $\opn{CC}(\mcal{F})$ is the characteristic cycle of 
$\mathcal{F}$ and $[\sigma_{df}]$ a cycle of 
$\sigma_{df}\colon X\to T^{*}X$ defined in 
\cite[Definition 9.3.5]{MR1299726}.
\end{theorem}

\begin{example}
Let $M$ be a compact integral affine manifold and $S$  
a compact rational polyhedral subspace in $M$. 
From the microlocal index theorem, we have
\begin{align}
\chi(H^{\bullet}(M;\iota_*A_S))
=\sharp ([df]\cap \opn{CC}(\iota_* A_S))
=\sharp (\opn{CC}(A_M)\cap \opn{CC}(\iota_* A_S)).
\end{align}
Therefore, this is a certain sheaf theoretic version of 
Poincar\'e--Hopf theorem for some polyhedral spaces. Under
the philosophy of this paper, $H^{\bullet}(M;\iota_*A_S)\simeq 
\opn{Ext}^{\bullet}(A_M,\iota_*A_S)$
 should be considered as a
certain analog of 
$\opn{Ext}^{\bullet}(\mcal{O}_X,\iota_*\mcal{O}_Z)$ for closed embedding of 
scheme.
\end{example}

\begin{remark}
The microlocal index theorem is generalized for more general 
class of functions by several researchers.
\end{remark}







%TODO: 適切な箇所に配置

% \begin{remark}
% Since the global homological 
% dimension of $A$ is finite,
% the weak global dimension of $A_X$ \cite[Definition 2.6.2]{MR1299726} is also finite.
% \end{remark}



% \begin{definition}[{\cite{MR4294126}}]

% \end{definition}

% Every PL set is subanalytic, and thus 
% we can use the theory of microsupport of sheaves
% effectively.
% Let $\mcal{F}$ be a 

% We will develop this without condition 

% Every real analytic function is \emph{nondepraved} 
% \cite[Part I, Definition. 2.3,]{MR932724} and
% every nondepraved function $f\colon \to {\mathbb{R}}$ satisfies Whitney b-condition
% for the pair $(\{f(x)=0\},x)$. Such a function satisfies the 
% following condition

% Let $S$ be a rational PL set in ${\mathbb{R}}^{n}$ and
% $f$.

\begin{remark}[{A vanishing properties
for some good fan}]
Fix $X\deq \mathbb{R}^{n}$.
Let $f\colon X\to {\mathbb{R}}$ be a convex $C^{1}$-
function $X$ with the minimum point $x$
and $S$ be the support of 
a polyhedral complex $\Sigma$ whose contains $x$.
One of trivial but remarkable point is that
\begin{align}
\opn{MF}^{\bullet}(A_{S\subset X},f,x)\not\simeq (-1)^{n}
\opn{MF}^{\bullet}(A_{S\subset X},-f,x)
\end{align}
except for special cases such like
\cref{example-milnor-morse-data}.
We will see this in the case $A=\mathbb{Q}$.
We note $\opn{MF}^{\bullet}(\Q_S,-f,x) \simeq 
H^{\bullet}(S,S\setminus \{x\};\Q)\simeq 
(H^{-\bullet}(\upomega_S^{\bullet}))_x$ since
$H^{-i}(\upomega_S^{\bullet})$ is the sheafification of
the presheaf $U\mapsto H_{c}^{i}(U;k)^{\vee}=H^{i}(S,S\setminus U;k)^{\vee}$
 \cite[]{iversenCohomologySheaves1986a} and fundamental properties of the direct limit of topological spaces \cite[Proposition 3.33]{hatcherAlgebraicTopology2002a}. 
If $S$ is a purely tropical $n$-manifold, then 
$\opn{MF}^{\bullet}(A_S,-f,x)\simeq H^{n}(S,S\setminus\{x\},\Q)[-n]$
since the shellability of the link of Bergman fan, see also
\cite[Theorem 6.2]{gross2019sheaftheoretic}.
((Besides, this property holds for every Bergman support since
the order complex $\Delta_M$ is shellable.
This is called Folkman's vanishing theorem.))

The vanishing property of the local cohomology is conjectured for
tropicalization of very affine algebraic variety by Hacking in
\cite{MR2452307}.
In other words, the dualizing complex of tropicalization of 
algebraic variety should be a shift of a single sheaf 
by Hacking conjecture. 
Hacking also proved that conjecture is true for a suitable condition
\cite[Theorem 2.5]{MR2452307}.
Since any tropical varieties is connected
through codimension $1$ \cite[Theorem 3.3.5]{MR3287221}
this conjecture is true when $\dim S \leq 2$.
This phenomenon gives a certain analog of Kodaira vanishing theorem for 
positive line bundles, see 
also \cref{example-tropical-kodaira-vanishing}.
\end{remark}

\subsection{Smooth Cartier divisors on rational 
polyhedral spaces}



First, we recall about line bundles on 
rational polyhedral spaces and mention
\emph{smooth Cartier divisors}.

%NEXT: Cartier dataの整理

Let $B$ be a rational polyhedral space, 
$\mathcal{O}^{\times}_B$ the sheaf of 
locally integral affine linear function on $B$
and $\mathcal{A}^{0,0}_B$ the sheaf of 
$(0,0)$-superforms on $B$. 
As like tropical line bundles on tropical curves
\cite[Definition 4.4]{mikhalkinTropicalCurvesTheir2008a},
there exists the notion of tropical line bundle on 
rational polyhedral space
\cite[Definition 3.12]{gross2019sheaftheoretic}.
Every isomorphism class of 
tropical line bundles on $B$ is parametrized by 
$H^{1}(B;\mathcal{O}^{\times}_B)$
\cite[Proposition 3.13]{gross2019sheaftheoretic}.
The group $H^{1}(B, \mcal{O}^{\times}_B))$ is called 
the \emph{Picard group} of $B$.
There exists the following exact sequence:
\begin{align}
\label{equation-smoooth-cartier-divisor-sequence}
0\to \mathcal{O}^{\times}_B \to
\mathcal{A}^{0,0}_{B} \to
\mathcal{A}^{0,0}_{B}/\mathcal{O}^{\times}_B\to 0.
\end{align}

This is a smooth version of the following exact
sequences associated with the sheaf 
$\mcal{M}_B^{\times}$
of (real valued) tropical rational functions:
\begin{align}
\label{equation-cartier-divisor-sequence}
0 \to \mcal{O}^{\times}_B \to \mcal{M}_B^{\times} 
\to \mcal{M}_B^{\times}/\mathcal{O}^{\times}_B\to 0.
\end{align}
By taking a global section of the
short exact sequence 
(\ref{equation-cartier-divisor-sequence}),
there exists a connecting homomorphism 
$\delta \colon 
H^{0}(B;\mcal{M}_B^{\times}/\mathcal{O}^{\times}_B)
\to H^{1}(B;\mathcal{O}^{\times}_B)$.
We note $H^{1}(B;\mcal{M}_{B}^{\times})=0$, 
and thus $\delta$ is surjective
\cite[Lemma 4.5, Proposition 4.6]{MR3894860}.
The element $H^{0}(B;\mcal{M}_B^{\times}/\mathcal{O}^{\times}_B)$
is called a \emph{Cartier divisor} on $B$.
Therefore, for every line bundle $\mathcal{L}$ on a rational polyhedral 
space, there exists a Cartier divisor $s$ 
which represents $\mathcal{L}$.

By taking a global section of the
short exact sequence
(\ref{equation-smoooth-cartier-divisor-sequence}),
there also exists a connecting homomorphism 
$\delta' \colon 
H^{0}(B;\mathcal{A}^{0,0}_{B}/\mathcal{O}^{\times}_B)
\to H^{1}(B;\mathcal{O}^{\times}_B)$. 
$\mathcal{A}^{0,0}_B$ is a fine sheaf 
\cite[Proposition 2.26]{MR3903579}, so 
$H^{1}(B;\mathcal{A}^{0,0}_B)=0$ and 
so $\delta'$ is also surjective.

\begin{definition}[{smooth Cartier divisor}]
A smooth Cartier divisor on $B$ is an element of
$H^{0}(B;\mathcal{A}^{0,0}_{B}/\mathcal{O}^{\times}_B)$.
Let 
$(\cdot)^{\mathrm{sm}}\colon 
H^{0}(B;\mathcal{A}^{0,0}_B)\to 
H^{0}(B;\mathcal{A}^{0,0}_{B}/\mathcal{O}^{\times}_B)$ 
be a morphism defined from 
(\ref{equation-smoooth-cartier-divisor-sequence}).
The \emph{principal smooth divisor} of a $(0,0)$-superform 
$f$ is the image $(f)^{\mathrm{sm}}$ of $f$
induced from the short exact sequence
(\ref{equation-smoooth-cartier-divisor-sequence}).
\end{definition}
We write $\opn{CDiv}^{\infty}(B)$ for 
$H^{0}(B;\mathcal{A}^{0,0}_{B}/\mathcal{O}^{\times}_B)$.
We will see a smooth Cartier divisor is
an analog of Lagrangian section 
\cref{proposition-smooth-cartier-lagrangian}.
In the next subsection, 
we will define an analog of Floer complex of 
Lagrangian submanifolds
(without differential) for some good smooth Cartier 
divisors on rational polyhedral space satisfying 
the following condition:

\begin{condition}
\label{condition-Rn}
Let $B$ be a rational polyhedral space with 
a coordinate system $\{(U_i,\phi_i)\}_{i\in I}$
such that the image of each chart 
$\phi_i\colon U_i \to \mathbb{T}^{n}$
is in $\mathbb{R}^{n}$.
\end{condition}

The \cref{condition-Rn} is strict for rational polyhedral
spaces, but it is enough to
give our main results.

\begin{remark}
((上記の条件の理由)) 
\end{remark}

\subsection{Admissible conditions}

In this subsection, we define 
the \emph{admissibility condition} for
smooth Cartier divisors on rational 
polyhedral spaces.
We need to the notion of 
the micro-support of sheaves in order to define it.

First, we recall about the micro-support of sheaves 
from \cite{MR1299726}.
Let $X$ be a real analytic manifold and let
$\mcal{F}\in\opn{Ob}(\opn{D}^{b}(A_X))$ and
$\opn{SS}(\mcal{F})$ the micro-support of $\mcal{F}$
\cite[Definition 5.1.2]{MR1299726}.
\begin{definition}

\end{definition}

As remarked in \cite[Remark 5.1.6]{MR1299726},
$\opn{SS}(\mcal{F})$ depends only on the 
$C^{1}$-structure of $X$.\footnote{この一文ほぼ丸々引用の文だけどだい
大丈夫?}
In particular, 
the forgetful functor 
$\psi_X \colon \opn{D}^{b}(A_X)\to \opn{D}^{b}(\Z_X)$
preserves the microsupport of $\mcal{F}$ 
\cite[Remark 5.1.5]{MR1299726}.
For simplicity,
$\opn{SS}(\mcal{F})_x\deq \opn{SS}(\mcal{F}) \cap T^{*}_x X$.
From definition of the micro-support of sheaves, 
$\opn{SS}(\mcal{F}|_{U})_x=\opn{SS}(\mcal{F})_x$
for any open neighborhood $U$ of $x$ via the canonical 
isomorphism $T^{*}_xX\to T^{*}_xU$.

\begin{example}
If $M$ is a closed submanifold of $X$, then
$\opn{SS}(A_M)=T^{*}_M X$ \cite[Proposition 5.3.2]{MR1299726}.
\end{example}
Next, we define the admissible condition for
smooth principal Cartier divisors.

\begin{definition}
Let $(S,x)$ be a 
\end{definition}

\begin{condition}[{admissibility}] \label{cond: admissible}
Let $U_x$ be an open neighborhood of a point $x$ in a rational polyhedral
space $S (\subset M_{{\mathbb{R}}})$. 
Suppose $\dim M_{{\mathbb{R}}}=\dim \mathbf{F}_{S,x}$. In this case,
we can identify $M$ with $\mathbf{F}_{S,x}^{\Z}$.
A smooth function $f\colon U_x \to {\mathbb{R}}$ is \emph{admissible} at $x$ 
if 
\begin{align}
(x,df(x))\notin (\opn{span}_{{\mathbb{R}}}
(\opn{SS}(A_S)_x)+M^{\vee})\setminus M^{\vee}
\end{align}
\end{condition}

% \begin{remark}
% $\opn{span}_{{\mathbb{R}}}(\opn{SS}(A_S))$ is equal to the orthogonal vector space of
% the linearity space of $S$ at $x$, i.e., the maximal vector space
% which is containded in $S$ at $x$ locally. 
% We use the language of microsupport for revealing the 
% reason of the condition of admissibility.
% \end{remark}

\begin{example}[{Hypersurfaces}]

Let $X\deq {\mathbb{R}}^{n}$, $S\deq V_{\mathbb{T}}(\max\{x_1,\ldots,x_n,1\})$.
$\opn{span}_{{\mathbb{R}}}(\opn{SS}(A_S)_x)=({\mathbb{R}}^{n})^{\vee}$
and $x\deq (0,\ldots,0)$.
A smooth function $f\colon X\to {\mathbb{R}}$ is admissible at $x$
if and only if $df(x)\in (\Z^{n})^{\vee}$.
\end{example}


From definition, $f$ is admissible at $x$ then $f+m$ is also admissible for 
any $m\in \mcal{O}^{\times}_{M_{{\mathbb{R}}}}(M_{{\mathbb{R}}})$.  



\begin{example}
Every metric graph of finite length and 
smooth tropical hypersurfaces in ${\mathbb{R}}^{n}$ satisfies
\cref{condition-good-linearity-space} obviously.
\end{example}

Take a projection $M^{\vee}\to 
M^{\vee}/(\opn{span}_{{\mathbb{R}}}(\opn{SS}(A_S)_x))\cap M^{\vee}$.
Since $S$ is a rational polyhedral space and thus 
$\opn{SS}(\Z_S)$ is a rational PL set. 
$M^{\vee}/(\opn{span}_{{\mathbb{R}}}(\opn{SS}(A_S)_x))\cap M^{\vee}$
is a free module. 
Then, $df(x)\in M^{\vee}$ if and only if 
$df(x)\in M^{\vee}/(\opn{span}_{{\mathbb{R}}}(\opn{SS}(A_S)_x))\cap M^{\vee}$
for any admissible function at $x$. Thus, there exists a canonical
shift $\tilde{f}_x\colon U_x\to {\mathbb{R}}$ of $f$ such that
$d\tilde{f}_x(x)=0$.

\begin{definition}[{Stratified torus fibration and Lagrangian}]
Let $S$ be a compact rational polyhedral space such that 
the image of any atlas is 
in for some ${\mathbb{R}}^{n}$. 
Suppose $S$ satisfies \label{cond: good}.
Then the stratified torus 
fibration is the following set
\begin{align}
\check{X}(S)\deq \bigcup_{x\in S} 
(\mathbf{F}_{S,x}^{\Z}/(\opn{span}_{{\mathbb{R}}}
(\opn{SS}(A_S)_x))\cap \mathbf{F}_{S,x}^{\Z})\otimes_{\Z} {\mathbb{R}}/\Z.
\end{align}
Let $s=\{f_i\}_{i\in I}$ be a admissible smooth Cartier divisor. 
The stratified Lagrangian is the image of the differential  $\{df_i\}_{i\in I}$ in $\check{X}(S)$
by fiberwise projection.
\end{definition}

\begin{example}[{metric graph}]
The stratified torus fibration $\check{X}(C)$ is very
similar with the stratified space associated
with a trivalent metric graph \cite{auroux2022lagrangian}, but
there exist some minor differences.
\end{example}

\begin{remark}
  
\end{remark}





From \cref{equation-smoooth-cartier-divisor-sequence},



We also use the following representation of 
smooth Cartier divisor like 
\cite[Definition 4.0.12]{MR2810322}.



\begin{definition}[{smooth Cartier local data}]
Let $s\in \opn{CDiv}^{\mathrm{sm}}(B)$, 
$\{U_i\}_{i\in I}$ an open cover of $B$ and 
$f_i\colon U_i \to \mathbb{R}$ a $(0,0)$-superform
on $U_i$. The set 
$\{(U_i,f_i)\}_{i\in I}$ is 
a \emph{local data} of $s$ if 
$s|_{U_i}=(f_i)^{\mathrm{sm}}$ for all 
$i\in I$. The set $\{(U_i,f_i)\}_{i\in I}$ is a
\emph{local smooth Cartier data} if 
$\{(U_i,f_i)\}_{i\in I}$ is a local data of a smooth
Cartier divisor.
\end{definition}
%TODO: 競合の正当化
\begin{proposition}
Fix $s\in \opn{CDiv}^{\mathrm{sm}}(B)$.
$\{(U_i,f_i)\}_{i\in I}$ and 
$\{(V_j,f_j)\}_{j\in J}$ are local data of $s$.
\end{proposition}

\begin{definition}[{smooth admissible Cartier divisor}]
\label{definition-admissible-smooth-cartier-divisor}
A smooth Cartier divisor $s$ is \emph{admissible} 
if there exists a local data $\{(U_i,f_i)\}_{i\in I}$ 
of $s$
such that $f_i$ is admissible for all $i\in I$. 
In general, a pair $(s,s')$ of smooth 
Cartier divisor is \emph{admissible} if $s'-s$ is 
admissible. 
\end{definition}

\begin{definition}
$s_0\cap s$
\end{definition}

\begin{definition}[{local intersection data}]
Fix a compact rational polyhedral space $B$ satisfying 
\cref{condition-Rn}.
Let $s$ be an admissible smooth Cartier divisor 
on $B$ such that $\sharp (s\cap s_0)<\infty$. 
A \emph{local intersection data} of $s$ is the set 
$\{(U_p,f_p)\}_{p\in s\cap s_0}$ of open subsets
$U_i$ of $B$ and (0,0)-superforms
$f_p\colon U_p \to \mathbb{R}$ indexed by 
$ s\cap s_0$ 
such that
\begin{enumerate}
\item $s|_{U_p}=(f_p)^{\mathrm{sm}}$
for all $p\in s\cap s_0$,
\item $\opn{Crit}(f_p)=\{p\}$ for all $p\in s\cap s_0$.
\end{enumerate}
\end{definition}

\begin{definition}
Let $S$ be a rational polyhedral space such that the image of
any atlas is in for some ${\mathbb{R}}^{n}$.
Let $s=\{(U_i,f_i)\}_{i\in I}$ be a admissible smooth Cartier divisor such that
the following set is finite;
\begin{align}
s_0 \cap s\deq \set{x\in S\mid \opn{pr}_x^{S}(df_i(x))=0 
\text{ for some } i\in I}
\end{align}
\begin{align}
\opn{MF}^{\bullet}(S;s,A)\deq 
\bigoplus_{x\in s_0 \cap s} 
\opn{MF}^{\bullet}(A_{S\cap U_i},\tilde{f}_{i,x},x), \quad
\opn{MF}^{\bullet}(S;s)=\opn{MF}^{\bullet}(S;s,\Z)
\end{align}
\end{definition}

We defined the 

\begin{remark}
\label{remark-differential-graded-module}
We stress that we should not consider 
$\opn{MF}^{\bullet}(S;s,A)$ as the cohomology of $s$ just
a graded module 
since we need to define the differentials 
$\mathfrak{m}_1$ of 
$\opn{MF}^{\bullet}(S;s,A)$ from the view point of 
Floer cohomology. We don't have, however,
the definition of the true differential of 
$\opn{MF}^{\bullet}(S;s,A)$ in general except when
$\opn{MF}^{\bullet}(S;s,A)$ is equal to a Floer complex
of Lagrangian submanifolds (e.g. \cite[5.2]{MR1882331}).
\end{remark}

\begin{example}
\label{example-tropical-kodaira-vanishing}
A local data $\{(f_i,U_i)\}_{i\in I}$ of a given 
smooth Cartier divisor $s$ is 
\emph{Bohr--Sommerfeld type} or \emph{Hessian type} if
$f_i$ is strictly convex for any $i\in I$. Then,
\begin{align}
  \opn{MF}^{\bullet}(S;s,\Q)\simeq \bigoplus_{x\in s_0 \cap s} \Q[0], \quad
 \opn{MF}^{\bullet}(S;-s,\Q)\simeq \bigoplus_{x\in s_0\cap -s} 
H^{n}(S,S\setminus\{x\};\Q)[-n]
\end{align}
In this case, the cohomology of 
$\opn{MF}^{\bullet}(S;s,\Q)$ is independent of the choice of 
differential of $\opn{MF}^{\bullet}(S;s,\Q)$.
This is a tropical analog of Kodaira's vanishing theorem
for a (multiple of) positive line bundle, i.e., a holomorphic line bundle $\mcal{L}$ with a 
K\"ahler form on a complex manifold $M$: 
\begin{align}
H^{\bullet}(M;\mcal{L}^{-1})\simeq H^{n}(M;\mcal{L}^{-1})[-n].
\end{align}
The name of Bohr--Sommerfeld type comes from 
the set $s_0\cap s$ can be considered as the set of 
Bohr--Sommerfeld point if $S$ is a strictly integral affine manifold 
with a Hessian form by SYZ mirror pair.
See \cref{sec: BSRR} for more details.
\end{example}




The following proposition is an analog of \'{e}tale multiplicity of Euler characteristics
(cf. \cite[Proposition 1.1.28]{MR2095471}).

\begin{proposition}
\label{proposition-euler-number-etale}
Let $B$ be a compact rational polyhedral space satisfying
\cref{condition-Rn} and $s$ be an admissible smooth Cartier divisor
such that $s_0\cap s$ is a finite set.
For $q \colon B' \to B$ be a covering map of $B$ of degree 
$\opn{deg}(q)$,
\begin{align}
\chi(\opn{MF}^{\bullet}(B';q^{*}(s)))=
\opn{deg}(q)\chi(\opn{MF}^{\bullet}(B;s)).
\end{align}
\end{proposition}

The proof of \cref{proposition-euler-number-etale} is trivial from definition.

\begin{conjecture} 
\label{conjecture-tropical-MRR}
Let $S$ be a compact tropical manifold satisfying 
\cref{condition-Rn} and has the Todd class $\opn{td}(S)$ of $S$ 
which (should be) defined by the theory of Chern--Schwartz--MacPherson
cycles
\cite[Previous work]{lopezdemedranoChernSchwartzMacPhersonCyclesMatroids2020}.
Let $s$ be an admissible smooth Cartier divisor such that
$s_0\cap s$ is finite. Then, 
\begin{align}
\chi(\opn{MF}^{\bullet}(S;s))=\int_{S}\opn{ch}(s)\opn{td}(S).
\end{align}
\end{conjecture}
In this paper, we don't discuss the general theory of 
Todd class of $S$.
We will prove it for tropical curves and integral 
affine manifold with a Hessian form in the 
rest of this paper.

\begin{remark}
Obviously, $\opn{MF}^{\bullet}(S;s,A)$ is not finitely
generated and this is not invariant for linearly 
equivalent smooth Cartier divisors
if $S$ is not compact.
This corresponds that Morse homology does not work directly
for non-compact manifolds such like for compact manifolds.
\end{remark}

\begin{remark}
A canonical topological semifield isomorphism 
$({\mathbb{R}}_{\geq 0},+,\cdot)\simto 
(\mb{T},\oplus_{\opn{log}},+);x\mapsto \log(x)$
induces a homeomorphism ${\mathbb{R}}_{\geq 0}^{n}\simeq \mb{T}^{n}$
naturally and we can define a smooth function on 
$\mb{T}^{n}$ by the pullback of the smooth function on 
${\mathbb{R}}_{\geq 0}^{n}$ such that its derivative at $x$ in
the stalk of the sheaf of affine function
(with a real valued slope) on $\mb{T}^{n}$.
 By repeating
the construction of the sheaf of $(0,0)$-superforms on 
rational polyhedral spaces, we can extend a sheaf of
smooth function on rational polyhedral spaces and
\cref{conj: conj}.
\myfootnote{The differential of such a smooth function 
need to be in the stalk of the sheaf of affine function 
with real valued slope since 
$\frac{df\circ \opn{exp}}{dx_i}=
\frac{df}{dy_i}e^{x_i}\mapsto 0$ at 
$x_i\mapsto 0$.}
 For instance, \cref{eg: TP1Cartier} satisfies 
these conditions. We can generalize about it for toric
varieties and this gives a tropical theoretic interpretation 
of the wrapped Fukaya category for the mirror of
(complete) toric varieties by \cite{MR2871160}.
For instance, let $U_{x}$ be a small open neighborhood of 
a given point $x$ in a tropical toric open strata $O(\sigma)$
 corresponds to a convex cone $\sigma$ of a fan.
Then, the slope of a smooth function $f$ on $U_{x}$ at $x$
should be in $\sigma^{\bot}$ since the set of 
invertible element
in the dual cone $\sigma^{\vee}$ of $\sigma$ is $\sigma^{\bot}$.
This condition corresponds to the condition for the Lagrangian
in $\opn{Fuk}(T^{*}M_{{\mathbb{R}}}/M;\overline{\Lambda}_{\sigma})$ 
\cite[3.1]{MR2871160} since
the condition $df(x')\in\sigma^{\bot}$ for all 
$x'\in U_x\cap O(\sigma)$ gives 
$(df|_{U_{x}\setminus X_{\sigma}})^{\infty}\subset 
-\overline{\Lambda}_{\sigma}^{\infty}$.
In other words, the stratified Lagrangian submanifold 
of a smooth Cartier divisor on a tropical toric variety
can be considered as 
an object of wrapped Fukaya category in the sense of
\cite{MR2871160} naturally. This interpretation is 
an intermediate of wrapped Fukaya categorical approach by
\cite{MR2871160}
and Morse categorical approach of moment polytopes
(e.g. \cite{MR4234675}).
We will discuss it in detail in the future.

Our tropical Lagrangian section for toric varieties is 
different from that of \cite{MR2240909,MR2529936}.
See also \cite[Appendix C.2.]{MR2871160} for relationships
between \cite{MR2871160} and \cite{MR2240909,MR2529936}.
We also note the mirror symmetry between the derived category of
coherent sheaves on toric varieties $X_{\Sigma}$ and
the wrapped Fukaya category 
$\opn{Fuk}(T^{*}M_{{\mathbb{R}}}/M;\overline{\Lambda}_{\Sigma})$
is solved by \cite{MR4132582}.
\end{remark}

\begin{remark}[{Ehrhart reciprocity revisit}]
Let $s$ be an admissible smooth Cartier divisor on 
tropical toric varieties in the sense of the above Remark.
$\chi(X_{\Sigma},-s,A)=(-1)^{n}\sharp (\opn{int}(\mu_s(X_{\Sigma}))\cap \Z^{n})$ since
the local Morse data at boundary lattice point is trivial.
This is another interpretation of Ehrhart reciprocity of 
lattice polytopes.
\end{remark}

\subsection{Stratified torus fibrations}

If $B$ is a good rational polyhedral space, we 
can consider every admissible smooth Cartier divisor
$s$ on $B$, then

We assume that every (rational) polyhedral space satisfies 
the following condition,
but we expect that the condition is not necessary
in general.

\begin{condition}
\label{condition-good-linearity-space}
\begin{align}
\opn{span}_{{\mathbb{R}}}\opn{SS}(S)_x=\opn{Lin}(S,x)^{\bot}
\end{align}
\end{condition}

\section{Proof for compact tropical curves}
In this section, we prove \cref{thm: main} for 
compact tropical curves
(see \cite{mikhalkinTropicalCurvesTheir2008a} 
for the definition of tropical curves).
Our proof is highly effected from 
\cite{knill2012graph,MR2676658,auroux2022lagrangian}.
\footnote{Our proof idea comes from 
\cite{knill2012graph,MR2676658} at first.  
The current proof is modified after reading 
\cite{auroux2022lagrangian}.}.
We also follow the notation used in 
\cite{auroux2022lagrangian}.
Some proposition which is proved is in a special case
of the previous section, but we write a short proof 
for simplicity.

\begin{theorem}
\label{theorem-MRR-metric-graph}
Let $C$ be a compact tropical curve with 
no $1$-valent vertex and 
$\mathcal{L}$ be a line bundle on $C$.
Let $s$ be a smooth admissible Cartier divisor which
represents $\mathcal{L}$ such that 
$s_0\cap s$ is finite. Then,
\begin{align}
  \chi(\opn{MF}^{\bullet}(C,s))=\opn{deg}(s)+
\chi_{\opn{top}}(C)=\opn{deg}(\mathcal{L})+1-g(C).
\end{align}
\end{theorem}

\begin{remark}
((1-valentに制限している理由説明))
\end{remark}

\begin{proposition}
\label{proposition-admissible-curve}
Let $\Gamma_{n+1}$ be a subset of $\mathbb{R}^{n}$
defined as follows: 
\begin{align}
\Gamma_{n+1}\deq \mathbb{R}_{\geq 0}(1,0,\ldots,0)\cup \cdots
\cup {\mathbb{R}}_{\geq 0}(0,\ldots,0,1)\cup 
{\mathbb{R}}_{\geq 0}(-1,\ldots,-1)
\end{align}
\begin{enumerate}
\item $\Gamma_{n+1}$ satisfies
\cref{condition-good-linearity-space} at $x=(0,\ldots,0)$.
\item Let $f\colon \Gamma_{n+1}\to \mathbb{R}$ be a 
$(0,0)$-superform on $\Gamma_{n+1}$. Then, 
$f$ is admissible at $x=(0,\ldots,0)$ if and only if 
$df(x)\in (\mathcal{F}^{1}_{\mathbb{Z},\Gamma_{n+1}})_x\simeq (\mathbb{Z}^{n})^{\vee}$.
\end{enumerate}
\end{proposition}

\begin{proof}
Obviously, $\opn{dim}_{\mathbb{R}}\opn{Lin}(\Gamma_{n+1},x)=0$.
Let $x_i^{*}$ be the $i$-th dual linear form on 
$\mathbb{R}^{n}$ for the standard coordinate system on 
$\mathbb{R}^{n}$ and 
$h=\sum_{i=1}^{n} a_i x^{*}_i$ be a linear form
such that $a_i<0$ for any $a_i$.
Then, the lower set $\Gamma_{n+1}\cap \{h< 0\}$ is disconnected.
Thus, 
$\opn{span}_{\mathbb{R}}(\opn{SS}(\mathbb{Z}_{S\subset X})_x)
=\mathbb{R}^{n}$ where $X=\mathbb{R}^{n}$ and $S=\Gamma_{n+1}$.
\end{proof}



\begin{proposition}


Let $s_{p,q}\colon \Gamma_{n+1}\to \mathbb{R}$ be 
an admissible $(0,0)$-superform on $\Gamma_{n+1}$ 
such that $\opn{Crit}(s_{p,q})=\{x\}$ where
$x=(0,\ldots,0)$ and
\begin{align}
p=\sharp(\pi_0(\{s_{p,q}>0\})), \quad 
q=\sharp(\pi_0(\{s_{p+q}<0\})).
\end{align}

Then, 
\begin{align}
\opn{ind}_v(s_{p,q})=1-q ,\quad \opn{ind}_v(-s_{p,q})=1-p.
\end{align}

\end{proposition}

\begin{proof}
From definition, $f$ is a monotone function except 
at $x$.
\end{proof}

\begin{example}
When $p+q=3$, 
\begin{align}
\opn{ind}_v(s_{3,0})=1, \quad \opn{ind}_v(s_{2,1})=0, \quad \opn{ind}_v(s_{1,2})=-1, \quad \opn{ind}_v(s_{0,3})=-2.
\end{align}
\end{example}

\begin{definition}[{Continuous section}]
\label{definition-continuous-section}
Let $C$ be a tropical curve and 
$C_{0}\deq \{x\in C\mid \opn{val}(x)=2\}$.
We set the following spaces:
\begin{align}
\check{X}(C_0)\deq T^{*}C_0/T^{*}_{\Z}C_0, \quad 
\check{X}_0(C)\deq \check{X}(C_0)\sqcup_{i,s}C.
\end{align}
Obviously, $\check{X}_0(C)$ has a canonical projection
$\check{\pi}_C \colon \check{X}_0(C)\to C$.
\end{definition}

\begin{example}
If $C=\mathbb{T}P^{1}$, then 
$\check{X}_0(C_0)$ is just a 
cylinder with infinity length.
$\check{X}_0(\mathbb{R})$ has a canonical homeomorphism:
$\Phi \colon \check{X}_0(\mathbb{R})\to 
\mathbb{R}\times \mathbb{R}^{\vee}/\mathbb{Z}^{\vee};
(p,q dx_p)\mapsto (p,q)$.
\begin{align}
\check{X}_0(\mathbb{T}P^{1})\simeq 
\{(-\infty,0)\}\cup(\mathbb{R}\times \mathbb{R}^{\vee}/\mathbb{Z}^{\vee})
\cup \{(+\infty,0)\}.
\end{align}
The negation map
$\iota \colon\mathbb{T}P^{1}\to \mathbb{T}P^{1}; x\mapsto -x$
induces the canonical automorphism induced from the pullback of cotangent bundles:
\begin{align}
\iota^{*}\colon \check{X}_0(\mathbb{T}P^{1})
\to \check{X}_0(\mathbb{T}P^{1}); (x;y)\mapsto (-x;-y). 
\end{align}
This is a symplectic automorphism on 
$\check{X}_0(\mathbb{R}) (\subset \check{X}_0(\mathbb{T}P^{1}))$ since 
$dx\wedge dy=d(-x)\wedge d(-y)$.
This automorphism can be visualized as the 180-degree rotation of the 
cylinder.
\end{example}

\begin{proposition}[{continuous sections}]
\label{proposition-admissible-section}
Let $s$ be an admissible Cartier divisor 
$s=\{(U_i,f_i)\}_{i\in I}$ on a tropical curve with 
no $1$-valent vertex. 
Then, 
\begin{enumerate}
\item There exists the following continuous map:
\begin{align}
s'\colon C\to \check{X}_0 (C); x\mapsto (x,df_{i}(x))
\end{align}
\item If $s_0'\colon C\to \check{X}_0 (C)$ be the 
zero section, then $s_0\cap s=s_0'\cap s'$.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item First, we check $s'$ is well-defined.
Choose $(U_i,f_i)$ and $(U_j,f_j)$ such that
$U_i\cap U_j\neq \emp$. 
Then, $df_i(x)-df_j(x)\in 
(\mathcal{F}_{\mathbb{Z},C}^{1})_x$ and
$df_i(x)\in (\mathcal{F}_{\mathbb{Z},C}^{1})_x$
from \cref{proposition-admissible-curve} (2).
Therefore, the construction of $s'$ is well-defined.
$s'$ is continuous, obviously.
\item Omit.
\end{enumerate}
\end{proof}

\begin{proposition}
Let $s=\{(U_i,f_i)\}_{i\in I}$ be a smooth Cartier divisor on a compact
tropical curve $C$ with no 1-valent vertex.
Then, there exists
an admissible Cartier divisor $s'$ which is linearly
equivalent to $s$ and
$s_0\cap s'$ is a finite set. 
\end{proposition}

\begin{proof}

\end{proof}

As like \cite{auroux2022lagrangian},
we also use the notion of the rotation number of 
admissible Cartier divisor.
Fix a connected smooth tropical curve $C$
 and $C_0$ the 
regular part of $C$.
If $C$ is not isomorphic to a circle, then
$C_0$ is a disjoint union of open interval:
\begin{align}
  C_0\simeq \coprod_{e\in E} (a_e,b_e), \quad
(a_e\in \mathbb{T}, b_e\in \mathbb{R}\cup\{+\infty\}).
\end{align}

$\check{X}(C_0)$ has a canonical symplectic structure
and thus there exists a canonical orientation induced
from the symplectic form on $\check{X}(C_0)$.
This form defines an orientation number of 
section defined in \cref{proposition-admissible-section}.
%NEXT: TP1のローテーションを定義する。 

\begin{definition}[{Rotation number}]
Let $s\colon  (\subset \mathbb{T}P^{1}\times \mathbb{R}^{\vee}/\mathbb{Z}^{\vee})$
\end{definition}

\begin{proposition}
$\opn{rot}(s)=\opn{rot}(\iota^{*}\circ s)$
\end{proposition}

\begin{proof}

\end{proof}

\begin{definition}[{rotation number}]
Fix a closed interval $[a,b]$ in $\mathbb{T}P^{1}$.
Let $s\colon [a,b]\to [a,b]\times \mathbb{R}/\mathbb{Z}$ be 
a continuous section of the canonical projection
$p\colon [a,b]\times \mathbb{R}/\mathbb{Z} \to [a,b]$
such that $s(a)=(a,0)$ and $s(b)=(b,0)$. 
The rotation number
is the homotopy class of the closed path
$q\circ s\colon [a,b]\to \mathbb{R}/\mathbb{Z}$
induced from $s$ and the canonical projection
$q\colon [a,b]\times \mathbb{R}/\mathbb{Z} 
\to \mathbb{R}/\mathbb{Z}$. Here, 
we identify $\pi_1(\mathbb{R}/\mathbb{Z},0)\simeq \mathbb{Z}$
via the canonical orientation.
\end{definition}

\begin{proposition}
Fix an affine isomorphism $e\simeq [a,b]$ 
\end{proposition}

From the above proposition, we can define the 
rotation number for every admissible smooth 
Cartier divisors.
\begin{definition}

\begin{align}
\opn{rot}(s)\deq \sum_{e\in \pi_0(C_0)}
\opn{rot}(s|_{\opn{cl}(e)})
\end{align}

\end{definition}

\begin{definition}
Let $s\in \opn{CDiv}^{\infty}(C)$ be a smooth Cartier
divisor and $(U_i,f_i)_{i\in I}$ smooth Cartier data
of $s$. The data is \emph{good} if 
every $U_i$ is contractible.
\end{definition}
If a smooth Cartier data $(U_i,f_i)_{i\in I}$ of $s$ 
is good,
we can calculate the divisor class $D_s$ of $s$ easily
by using \v{C}ech cohomology of sheaves:
\begin{align}
D_s=\{(f_j-f_i)\}_{i,j\in I}
\end{align}

\begin{proposition}
Let $s$ be an admissible smooth Cartier divisor on $C$.
\begin{align}
\opn{rot}(s)=\opn{deg}(D_s)(= c_1(D_s))
\end{align}
\end{proposition}

\begin{proof}[{Proof of \cref{theorem-MRR-metric-graph}}]

\end{proof}
\subsection{MRR for general tropical curves}

We will prove MRR for compact tropical curve 
without assumption of valency. 
For general tropical curve $C$ with $1$-valent
vertex and smooth Cartier divisor 
$s\in\Gamma(C;\mathcal{A}^{0,0}_C/\mathcal{O}^{\times}_C)$,
we cannot choose a Cartier divisor $s'$ which
is linearly equivalent to $s$ and $s_0\cap s'<\infty$. 
The reason of this fact is that every 
$(0,0)$-superform on $C$ is constant on a sufficiently
small open neighborhood of $1$-valent vertex.
In this subsection, we extend smooth functions
on tropical curves for generalization of 
\cref{theorem-MRR-metric-graph} for general 
tropical curves.

\begin{definition}
Let $\opn{exp}\colon \mathbb{T}^{n}\to 
\mathbb{R}_{\geq 0}^{n}$ be an exponential map of 
$\mathbb{T}^{n}$ and $U$ an open subset of 
$\mathbb{T}^{n}$.
A continuous function $f\colon U\to \mathbb{R}$
is a \emph{weak-smooth} if 
$f=\opn{log}\circ g\circ \opn{exp}$ for some 
smooth function $g\colon V\to \mathbb{R}_{>0}$ on 
an open subset $V$ of $\mathbb{R}^{n}$.
Let $\mathcal{A}_{\mathbb{T}^{n}}^{\mathrm{weak}}(U)$ 
be the set of weak-smooth functions on $U$.
\end{definition}
Since $\opn{log}\circ g\circ\opn{exp}+\opn{log}\circ h
\circ \opn{exp}=\opn{log}\circ(gh)\circ\opn{exp}$ and 
the condition is local, 
$\mathcal{A}_{\mathbb{T}^{n}}^{\opn{weak}}(U)$ forms a 
sheaf of Abelian groups on $\mathbb{T}^{n}$. 
The following property says that every weak-smooth 
function is constant at the origin of $\mathbb{T}^{n}$.
\begin{proposition}
Let $U$ be an open neighborhood of the origin of 
$\mathbb{T}^{n}$ and 
 $f\in \mathcal{A}_{\mathbb{T}^{n}}^{\mathrm{weak}}(U)$.
For a given $\vep >0$, there exists $\delta\in \mathbb{R}$
such that $|\frac{\partial f}{\partial x_i}(x)|<\vep$
for any $x \in (-\infty,\delta]^{n}$ and $i=1,\ldots,n$. 
Here, $\frac{\partial f}{\partial x_i}(x)$ is the $i$-th partial 
differential on $U\cap \mathbb{R}^{n}$.
\end{proposition}
\begin{proof}
For sufficiently small $\delta\in \mathbb{R}$, 
$[-\infty,\delta]^{n}$ is in $U$. 
We can assume $f=\opn{log}\circ g\circ \opn{exp}$ for
some smooth function 
$g\colon V\to \mathbb{R}_{>0}$ of $\mathbb{R}^{n} 
(\supset \mathbb{R}_{\geq 0}^{n})$.
\begin{align}
\frac{\partial f}{\partial x_i}(x)=(g\circ \opn{exp}(x))^{-1} 
\frac{\partial g}{\partial y_i}(\opn{exp}(x))\opn{exp}(x_i)
\end{align}
$g\circ \opn{exp}(x)$ is bounded on $[-\infty,\delta]^{n}$.
$\frac{\partial g}{\partial y_i}$ can be defined 
on $V$, so $\frac{\partial g}{\partial y_i}\circ \opn{exp}$
is also bounded on $[-\infty,\delta]^{n}$.
Therefore, there exists a real number $r$ such that
$|(g\circ \opn{exp}(x))^{-1} 
\frac{\partial g}{\partial y_i}(\opn{exp}(x))|<r$ for any 
$x\in [-\infty,\delta]^{n}$.
Therefore, if $x_i$ is sufficiently small, so is 
$\frac{\partial f}{\partial x_i}$. 
\end{proof}
From now on, we mainly discuss the case when $n=1$.

Let $C$ be a tropical curve. 
Let $\mathcal{A}_C^{\opn{weak}}$ be the sheaf 
of weak-smooth functions on $C$. From definition,
$\mathcal{A}_C^{(0,0)}\subset \mathcal{A}_C^{\opn{weak}}$
and $\mathcal{A}_C^{\opn{weak}}$ is also a fine sheaf.


\begin{definition}
A \emph{weak-smooth Cartier divisor} of $C$ is a 
element of $\Gamma(C;\mathcal{A}_C^{\opn{weak}}/
\mathcal{O}^{\times}_C)$.
\end{definition}

Since $\mathcal{A}_C^{\opn{weak}}$ is fine, 
the connected homomorphism 
$\delta\colon \Gamma(C;\mathcal{A}_C^{\opn{weak}}/
\mathcal{O}^{\times}_C)\to \opn{Pic}(C)$ is 
surjective.


We can extend admissibility condition for
weak-smooth functions and weak-smooth Cartier 
divisors on $C$ but in this case every 
weak-smooth function is admissible at $1$-valent
vertex.

\begin{definition}
Let $s$ be an admissible weak-smooth Cartier divisor 
of $C$ such that $s_0\cap s<\infty$.
The Morse complex of $s$ the following graded module:
\begin{align}
  \opn{MF}^{\bullet}(C;s)=\bigoplus_{p\in s_0\cap s} 
\tilde{H}^{\bullet-1}
(U_p\cap \{\tilde{f_p}<\tilde{f_p}(p)\};\mathbb{Z})
\end{align}
Here, $(U_p,\tilde{f}_p)_{p\in s_0\cap s}$ is an 
essential system of $s$.
\end{definition}

From construction, the following theorem is just a
repetition of the proof of 
\cref{theorem-MRR-metric-graph}.

\begin{theorem} \label{theorem-MRR-tropical-curve}
Let $C$ be a compact tropical curve and 
$s$ an admissible weak-smooth Cartier divisor 
of $C$ such that $s_0\cap s<\infty$. Then,
\begin{align}
  \chi(\opn{MF}^{\bullet}(C,s))=\opn{deg}(s)+
\chi_{\opn{top}}(C)=\opn{deg}(\mathcal{L})+1-g(C).
\end{align}
\end{theorem}

\begin{remark} \label{rmk: curve_mirror}
When $C$ is a trivalent metric graph, 
our Lagrangian sections are 
almost the same with that of fiberwise wrapped Fukaya category 
$\mcal{F}(M)$ \cite[3.1]{auroux2022lagrangian}.
Here, $M$ is the
union of $\C P^{1}$'s whose intersection complex is $C$, 
i.e., every edge of $C$ corresponds
$\C P^{1}$ and every trivalent vertex of $C$ corresponds
to the intersection points of some three $\C P^{1}$'s.
The mirror manifold of $M$ is an algebraic curve $X_K$
from Mumford's construction using the dual intersection
complex $C$.

The local model of $M$ comes from the critical locus
of the potential function of a (A-side) Landau--Ginzburg 
model $(\C^{3},-xyz)$. There exists a (Orlov) functor
from $\opn{Fuk}(\C^{3},-xyz)$ 
to $\opn{wFuk}((\C^{\times})^2)$ which is compatible
with the pushforward 
$i_*\colon \opn{Perf}(V(1+x_1+x_2))\to \opn{Perf}((K^{\times})^{2})$. 
of the inclusion $i\colon V(1+x_1+x_2)\hookto (K^{\times})^2$
via mirror functors (see \cite[2.]{auroux2022lagrangian}
for more details). 

The mirror space $M$ of $X_K$ can be considered as a 
topological compactification of $\check{X}_0(C)$.

By a slight modification of $\check{X}_0(C)$, every 
stratified smooth Lagrangian section of $\check{X}(C)$ 
can be considered as an object of $\mcal{F}(M)$

The main difference between our setting and 
that of \cite{auroux2022lagrangian} 
is the definition of graded space $\opn{CF}(C,s)$. 
Our approach has no good definition 
of $m^{d}$-operations but we define $\opn{CF}(C,s)$ 
without Hamiltonian
perturbations.
\end{remark}

The stratified torus fibration of Riemann surface is 
closely related with pants decomposition, and thus
Auroux--Efimov--Katzarkov in \cite{auroux2022lagrangian} expect the mirror symmetry 
for projective hypersurfaces since they have higher 
dimensional pants decomposition \cite{MR2079993} along
tropical hypersurfaces.
As a toy model of this question, we also pose a 
following question as a higher version of the 
correspondence above.
\begin{question}
Is there exists an analog of the correspondence of the 
localization of index for
hypersurfaces of projective space and pants decomposition 
in \cite{MR2079993}?
\end{question}
We also expect that the question above has a generalization
for more general algebraic varieties.
\begin{definition} \label{def: weighted_lattice_points}

\end{definition}



\begin{remark}
We explain the reason why we add admissible condition for 
smooth Cartier divisors. 
One of reasons is that there exists smooth function $f$
on a polyhedral space $S$ and 
$x\notin\opn{Crit}(f|_S)$ such that
$\opn{MF}^{\bullet}(A_S,f|_{S},x)$ is nontrivial.
Another reason is that we could not create 
convenient continuous sections like 
\cref{definition-continuous-section} easily.

%TODO: admissbileという条件がいる第三の理由例を挙げる。

The third reason is the most critical:
Let $\overline{\Gamma}_3$ be the canonical 
compactification of $\Gamma_3$ as a projective tropical 
curve and
$g$ a weak-smooth function on 
$\overline{\Gamma}_3$
such that 
\begin{enumerate}
\item $dg=(\frac{1}{2},\frac{1}{2})$
\item $\opn{Crit}(g)=\overline{\Gamma}_3\setminus \Gamma_3$
\item $\sum_{p\in \opn{Crit}(g)}\opn{ind}_p(g)=2$
\end{enumerate}
$g$ is admissible except $x=(0,0)$.
There exists the following equation for local Morse index:
\begin{align}
\sum_{p\in \opn{Crit}(g)}\opn{ind}_p(g)+
\opn{ind}_x(g)=1=\chi_{\opn{top}}(\overline{\Gamma}_3).
\end{align}
Therefore, if we generalize 
\cref{theorem-MRR-tropical-curve} for non-admissible
functions, we need to add the index at each non-admissible 
point. At least, \cref{theorem-MRR-tropical-curve} is not
true without correction the effect at non-admissible point
of $g$.
In this case, $\opn{ind}_x(g)$ should be $-1$.
This condition is independent of the choice
of $g$ satisfying the above condition.
On the other hand, the index of smooth Cartier
divisor should be independent of the choice of
Cartier data.
Since $\opn{ind}_x(g+m)$ depends on the choice
of monomials $m$, we need to choose a choice $m_0$
of monomials with integer slope to 
define the index of $g$ as a divisor.
The author consider there is no canonical choice
of $m_0$ for $g$ as a principal divisor without
assumption admissibility.
Every admissible function $f$ has a canonical choice
of monomials which is determined by the condition 
whether $x\in \opn{Crit}(f+m)$ or not.
We could not use this condition for $g$ since 
$x\notin \opn{Crit}(g+m)$ for every monomial with
integer slope.
\end{remark}

\subsection{Relationships between a localization of 
index on compact Riemann surfaces.}

We mention the relationship between 
\cref{theorem-MRR-tropical-curve} and
\cite[6]{MR2676658}.
For simplicity,
we assume $C$ is a compact trivalent tropical curve.

On the other hand, we can construct a typical tropical curve
(Reeb graph) from a Morse function on Riemann surface
\cite[3.2.2]{MR2181810}.

$X_0(C)$  can be considered as a subset of a compact 
Riemann surface $X$.
\myfootnote{By philosophy of SYZ mirror symmetry,
we should consider Lagrangian section as a mirror of complex line bundle
and we also explain about it for tropical tori in \cref{a}.
}

Under the above interpretation, a very admissible Lagrangian section can be considered as a data of $U(1)$-holonomy of each fiber $\check{\pi}_{B_0}^{-1}(p)$.
The following equation is a correspondence about local index $\opn{ind}_v$ and the Local Riemann-Roch number under the above identification \cite[Theorem 6.7]{MR2676658}.
\begin{align}
& [BS^{+}]=\opn{ind}_v(s_{2,0})=1, 
&& [BS^{-}]=\opn{ind}_v(s_{0,2})=-1,\notag \\
& [D^{+}]=\opn{ind}_v(s_{1,0})=1,
&& [D^{-}]=\opn{ind}_v(s_{0,1})=0, \\
& [P^{S}]=\opn{ind}_v(s_{2,1})=0,
&& [P^{L}]=\opn{ind}_v(s_{1,2})=-1 \notag.
\end{align}
From this our theorem for tropical curve can be proved from the theory of localization of index and classical Riemann-Roch formula.
\begin{question}
  Can we generalize the above correspondence for pants decomposition of
  complex algebraic hypersurfaces in \cite{MR2079993} and line bundles?
\end{question}

\section{Proof for integral affine manifold with Hessian form.}

In this section,
we recall the notion of affine manifolds from
\cite{MR2293045,
goldmanRadianceObstructionParallel1984a,
MR2181810,
grossMirrorSymmetryLogarithmic2006a} and 
\cite[Chapter 6]{MR2567952}.

\begin{definition}

\end{definition}


\begin{example}
((トーリック幾何に関するヘッセ幾何の説明))
Let $f\colon \mathbb{R}^{n}\to \mathbb{R}$ be 
a smooth function 
is smooth and convex 
on $\mathbb{R}^{n}$.
Therefore, $(\mathbb{R}^{n},f)$ form an integral 
Hessian manifold which is homeomorphic to a domain.

See also \cite[Appendix 2]{MR1301331} for general theory for
the relationships for Hessian form and the induced K\"{a}hler potential for
toric manifolds.
\end{example}

\begin{remark}
The following fact is one of most important things 
for closed integral affine manifold with a Hessian form.
By \cite[Corollary 2.3]{MR714338} and 
\cite[Corollary 8.3.4 (2)]{MR2293045},
every closed special Hessian manifold $B_0$ has 
a flat Riemannian metric $g$ such that 
its Levi--Civita connection is 
equal to affine connection of $B_0$ \cite[Corollary 8.3.7]{MR2293045}. 
By Bieberbach theorem, every closed flat Riemannian manifold 
is covered by a Riemannian flat torus and thus every closed 
integral Hessian manifold is an unramified cover of 
a tropical torus as mentioned in \cite[5.2]{MR1882331}.
\end{remark}

\begin{remark}
The integral affine structure itself is a very strict condition.

\ind{Chern's conjecture}{Chern's conjecture} states every closed affine manifold $B_0$ has zero topological Euler number $\chi_{\opn{top}}(B_0)$.
If $B_0$ is a closed flat Riemannian manifold, Chern's conjecture is true from Chern--Gauss--Bonnet formula.
This conjecture is true for special affine manifold \cite{MR3665000}.
Therefore, every closed integral affine manifold satisfies Chern's conjecture since the orientable double over of an integral affine manifold has a compatible special integral affine structure.

\ind{Markus's conjecture}{Markus conjecture} states every closed
special affine manifold is complete (in the sense of $(G,X)$-manifold)
if and only if its orientable double cover 
has a compatible special affine structure \cite[p.53]{markus1963cosmological}.

\footnote{We have not checked the original source of Chern's conjecture yet. Our knowledge about these conjectures
  mainly comes from \cite{goldmanRadianceObstructionParallel1984a}
  and \cite{MR3665000}.
}
\end{remark}

\begin{remark}[{Relationships between symplectic geometry}]
Integral affine manifolds naturally appear 
as a base space of Lagrangian torus fibration 
\cite{duistermaatGlobalActionangleCoordinates1980a}. 
Besides, the deformation space of 
special Lagrangian submanifolds of
a Calabi-Yau $n$-fold with a nowhere vanishing 
holomorphic $n$-form has 
an integral affine structure with 
a Hessian metric by McLean's theorem \cite{MR1664890}.

Every integral affine manifold has the following canonical
\end{remark}

We can consider the sheaf theoretic definition of 
integral affine manifold as explained 
in \cite[2.1]{MR2181810} 
and thus integral affine manifold is a special case of 
tropical manifold.

From now on, we follow about tropical homology and sheaf 
theory for tropical manifolds
from \cite{MR3903579,gross2019sheaftheoretic}.

\subsection{Verdier duality}
The Verdier duality holds for the following general form
\cite[Proposition 3.1.10]{MR1299726}


\begin{theorem}[{Verdier duality}]
Let $f\colon X\to Y$ be a continuous map between locally 
compact Hausdorff space s. If $f_!$ has finite cohomological
dimension, 
\begin{align}
  R\opn{Hom}_{A_Y}(R f_!\mcal{F}^{\bullet},\mcal{G}^{\bullet})    & \simeq R\opn{Hom}_{A_X}(\mcal{F}^{\bullet},f^{!}\mcal{G}^{\bullet})        \\
  R \mcal{H}om_{A_Y}(R f_! \mcal{F}^{\bullet},\mcal{G}^{\bullet}) & \simeq Rf_* R\mcal{H}om_{A_X}(\mcal{F}^{\bullet},f^{!}\mcal{G}^{\bullet}).
\end{align}
\end{theorem}

The dualizing complex over $A$ of $X$ is 
$\upomega_{A_X}\deq a^{!}_{X}A_{\{\opn{pt}\}}$.

$\mathcal{D}_{A_X}(\mathcal{F}^{\bullet})
\deq R\mathcal{H}om_{A_X}(\mathcal{F}^{\bullet},\upomega_{A_X})$


\subsection{Tropical homology, Tropical superform and Cartier data}

In the case of affine manifold, this sheaf is already
studied in the field of Hessian geometry as a vector bundle
with a flat connection
(e.g. \cite[Chapter 7]{MR2293045}).


Here, $\mcal{F}_{\Z, B}^{0}={\mathbb{R}}_B$. 
$\mcal{F}_{B}^{\bullet}$ is a certain analog of analytic
de Rham complex of complex manifold.
\begin{remark}

\end{remark}

\footnote{以下では\cite{gross2019sheaftheoretic}での結果を
用いるがその定理は$\mcal{F}_X^{p}$に対してではなく
\cite{gross2019sheaftheoretic}における
$\Omega_X^{p}$に対するものである。だが、両者
は loopless matroid から由来する場合は両者は一致する。
\cite[Remark 2.8]{gross2019sheaftheoretic}}

$\Omega_X^{\bullet}$ has a canonical dga structure, 
and thus its hypercohomology 
$\mb{H}^{\bullet}(B;\mcal{F}_{B}^{\bullet})$ is a 
graded-commutative algebra. 
This is a tropical analog of the singular cohomology
$H^{\bullet}(X;\C)$ for a complex manifold $X$ since 
the analytic de Rham theorem $\C_X \simeq \Omega_X^{\bullet}$ 
gives isomorphism 
$H^{\bullet}(X;\C)\simeq \mb{H}^{\bullet}(X;\Omega_X^{\bullet})$
of graded algebras. 

An elementary but remarkable fact of 
$\mcal{F}_{B}^{\bullet}$ is that $\mcal{F}_{B}^{\bullet}\simeq 
\bigoplus_{i\in \Z}\mcal{F}_B^{i}[-i]$, i.e., the differential 
of $\mcal{F}_{B}^{\bullet}$ is trivial unlike the analytic de Rham complex
of complex manifolds, see \cite[Corollary 2.15]{epub36262}.
Therefore, we can calculate the multiplication of 
$\mb{H}^{\bullet}(B;\mcal{F}_B^{\bullet})$ by 
cup product of each $H^{q}(B;\mcal{F}_B^{p})$.

Let $f\colon B\to B'$ be a morphism of rational polyhedral 
space. Then, this induces the pullback $f^{-1}\colon 
\mb{H}^{\bullet}(B';\mcal{F}_{\Z, B'}^{\bullet})\to 
\mb{H}^{\bullet}(B;\mcal{F}_{\Z, B}^{\bullet})$
and this is a graded ring homomorphism \cite[Proposition 4.17]{gross2019sheaftheoretic}. 
\subsubsection{Tropical Cartier data}

We recall some results about tropical superforms from
\cite{MR3903579,epub36262}.

In particular, 
$\mathcal{A}^{0,0}_B$ can be considered as the sheaf 
of smooth functions on $B$.

Then, $\mcal{L}^{p}_{B}$ has the following acyclic resolution
and isomorphism \cite[Corollary 3.18, Lemma 3.21]{MR3903579}:
\begin{align}
  0 \to \mcal{L}^{p}_{B} \to \mcal{A}^{p,0}_{B}\xto{d''} \mcal{A}^{p,1}_{B} \xto{d''}\cdots ,\quad \mcal{L}^{p}_{B} \simeq \mcal{F}_B^{p}
\end{align}

Let $\mcal{Z}^{q}_{B}\deq
  \opn{Ker}(d'': \mcal{A}^{0,q}\to \mcal{A}^{0,q+1})$.

The canonical monomorphism $\mcal{O}^{\times}_B \to \mcal{A}^{0,0}_B$
induces the following commutative diagram 
\footnote{Several similar diagrams for some special tropical spaces and 
similar spaces appear
  in literature, e.g. \cite[p.468]{MR2567952}
 and \cite[Definition 1.45]{grossMirrorSymmetryLogarithmic2006a}}:

\begin{equation} \label{equation-smooth-cartier-diagram}
  \begin{tikzcd}
    & 0 \arrow[d]    & 0 \arrow[d]           &                      &   \\
    & \mb{R}_{B} \arrow[r,equal] \arrow[d]                & \mb{R}_{B} \arrow[d]           &                      &   \\
    0 \arrow[r] & \mcal{O}_{B}^{\times} \arrow[r] \arrow[d]         & \mcal{A}^{0,0}_B \arrow[r] \arrow[d] & \mcal{A}^{0,0}_B / \mcal{O}_{B}^{\times}  \arrow[r] \arrow[d,equal] & 0 \\
    0 \arrow[r] & \FBZ^{1} \arrow[r] \arrow[d] & \mcal{Z}^{1}_{B} \arrow[r] \arrow[d]  & \mcal{Z}^{1}_{B}/\FBZ^{1} \arrow[r]   & 0 \\
    & 0 & 0 &  &
  \end{tikzcd}
\end{equation}
Here every row and column of the diagram (\ref{equation-smooth-cartier-diagram}) is exact
and $\mcal{A}_{B}^{0,0}/\mcal{O}^{\times}_B
  \simeq \mcal{Z}^{1}_B/\mcal{F}_{\Z,B}^{1}$ from the snake lemma.
The right column exact sequence of \cref{equation-smooth-cartier-diagram} is called
the \ind{tropical exponential sequence}{tropicalexponentialexactsequence}, 
(e.g. \cite{MR3894860}).

Let $f\colon X\to Y$ be a morphism of 
two rational polyhedral spaces.
From definition of morphism of rational polyhedral space
and a natural morphism of superforms 
\cite[Lemma 2.21]{MR3903579},
$f$ induces the pullback 
$f^{*}\colon \opn{CaDiv}^{\infty}(Y)\to \opn{CaDiv}^{\infty}(X)$ 
and $c_1(f^{*}s)=f^{*}(c_1(s))$ from the diagram
(\ref{equation-smooth-cartier-diagram}). 
In particular, we have
$c_1(f^{*}(s)^{n}=f^{*}(c_1(s)^{n})$ for every $D\in\opn{CaDiv}^{\infty}(Y)$.

\subsection{Verdier duality and Borel--Moore homology
for tropical spaces}



There exists a natural isomorphism $\mcal{F}_X^{n-p}[n]\to 
\mcal{D}(\mcal{F}_{X}^{p})$ where 
$\mcal{D}(\mcal{F}^{\bullet})
=R\mcal{H}om(\mcal{F};\upomega_X^{\bullet})$
\cite[Theorem 6.2]{gross2019sheaftheoretic}.

In particular, the natural isomorphism $\mcal{F}_{\Z, X}^{n}[n]\to 
\mcal{D}(\mcal{F}_{\Z, X}^{0})=\upomega_B^{\bullet}$
can be considered as the element of $H_{n,n}^{\opn{BM}}(X;\Z)$ 
from definition. 
We call this element as the \emph{fundamental class} of $X$ 
and it denotes by $[X]$. The fundamental class of tropical
manifold was defined from the locally constant function on 
$X_{\opn{reg}}$. (See \cite[Definition 4.8]{MR3894860}.)
If $X=\opn{pt}$, $H_{0,0}^{\opn{BM}}(\opn{pt};\Z)=\opn{End}(\Z)\simeq \Z$.
Therefore, $H^{n,n}(X;\Z)\xto{\cdot \cap [X]} H_{0,0}^{\opn{BM}}(X;\Z)
\xto{f_!} H_{0,0}^{\opn{BM}}(\opn{pt};\Z)$ defines
the 
When $B$ is an integral affine manifold of dimension $n$, 
$\upomega^{\bullet}_{B}\simeq \opn{or}_{B}^{\Z}[n]$ 
\cite[]{}.
and the fundamental class of $B$ is a $\Z$-orientation of $B$
when $B$ is orientable.



If $B_0$ is a integral affine manifold, 
$\mcal{O}^{\times}_{B_0}$ is a locally constant sheaf and the quotient sheaf $\mcal{W}^{1}_{\Z,B_0}$ is a $\Z$-local system on $B_0$.

\begin{Not}
  Usually, integral affine manifolds are used as a special case of integral affine manifold with singularities and we also want to treat like this in many cases.
  Therefore, we write $\AffS_{\Z,B_0}\deq \mcal{O}^{\times}_{B_0}$, $\mcal{T}_{\Z,B_0}\deq \mcal{W}_{\Z,B_0}^{1}$ in this section for integral affine manifolds. We also use this notation for integral affine manifold with singularities.
\end{Not}

From now on we recall the commutative diagram (\ref{equation-smooth-cartier-diagram})
 for integral affine manifolds.

Of course, $\mcal{A}_{B_0}^{0,0}=\mcal{C}^{\infty}(B_0)$ and
 $\mcal{Z}^{1}_{B_0}$ is the sheaf of closed $1$-form on $B_0$.



We note the sheaf $\mcal{Z}^{1}_{B_0}$ can be considered as the sheaf 
$\opn{Lag}(T^{*}B_0)$ of Lagrangian sections 
$s:U \to T^{*}U$ for open set $U \subset B_0$, 
see some standard textbook for symplectic geometry 
such as \cite[3.2]{MR1853077}.

Another important thing is that 
$\mcal{Z}^{1}(B_0)/\mcal{T}_{\Z,B_0}^{\vee}$
 (resp. $\mcal{C}^{\infty}(T^{*}B_0)/\mcal{T}_{\Z,B_0}^{\vee}$) 
is isomorphic to the sheaf of germs of Lagrangian sections 
(resp. smooth sections ) of the Lagrangian torus fibration 
$\check{f}_{B_0}\colon \check{X}(B_0)\to B_0$ 
\cite[(2.7), (2.11)]{duistermaatGlobalActionangleCoordinates1980a}.


Thus, the commutative diagram (\ref{equation-smooth-cartier-diagram}) is written like this 
(e.g. \cite[p.468]{MR2567952}):

\begin{equation} \label{eq:affinecartier}
  \begin{tikzcd}
    & 0 \arrow[d]    & 0 \arrow[d]           &                      &   \\
    & \mb{R}_{B_0} \arrow[r,equal] \arrow[d]                & \mb{R}_{B_0} \arrow[d]           &                      &   \\
    0 \arrow[r] & \AffS_{\Z,B_0} \arrow[r] \arrow[d]         & \mcal{C}^{\infty}(B_0) \arrow[r] \arrow[d] & \mcal{C}^{\infty}(B_0)/\AffS_{\Z,B_0}  \arrow[r] \arrow[d,equal] & 0 \\
    0 \arrow[r] & \mcal{T}_{\Z,B_0}^{\vee} \arrow[r] \arrow[d] & \opn{Lag}(T^{*}B_0) \arrow[r] \arrow[d]  & \opn{Lag}(\check{X}(B_0)) \arrow[r]   & 0 \\
    & 0 & 0 &  &
  \end{tikzcd}
\end{equation}


\begin{remark}
When $s=\vep df$ for a sufficiently small $\vep >0$ and 
a Morse function, $\chi(B,s)=\chi_{\opn{top}}(B)=0$ is 
truly a special case of Poincar\'e--Hopf theorem for $B$.
We also note there exists another tropical analog of Poincar\'e--Hopf theorem
  \cite{rau2020tropical}. This analogue is about tropical Euler characteristic
$\chi_{\opn{trop}}(B)\deq \chi(\mb{H}^{\bullet}(B;\mcal{F}_B^{\bullet}))$
  but not for topological Euler characteristic $\chi_{\opn{top}}(B)$.
\end{remark}

\begin{definition}
Let $B,B'$ be an integral affine manifold.
\end{definition}



\begin{remark}
Our condition of \'etale is different from that of 
\cite[Definition 1.1]{grossMirrorSymmetryLogarithmic2006a}.

If $f\colon B\to B'$ be an affine local diffeomorphism,
then $X(f)\colon X(B) \to X(B')$ is a local isomorphism of
complex manifolds.
When $f$ is not an \'etale in our sense, however,
$\opn{deg}(f)\ne \opn{deg}(X(f))$ in general.

\end{remark}

\begin{lemma}
  Let $f:B\to B'$ be a proper tropical morphism.
  \begin{align}
    \int_{B} f^{*}c\frown \alpha=\int_{B'} f_*(f^{*}c\frown \alpha)
    =\int_{B'}c \frown f_*\alpha=\opn{deg}(f)\int_{B'} c\frown \alpha
  \end{align}
\end{lemma}

\begin{proposition} \label{thm: intetale}
Let $f\colon B'\to B$ be a finite \'etale covering of a compact integral affine 
manifold $B$ of dimension $n$. Then,
(i) $\chi(B',f^{*}(s))=\opn{deg}(f)\chi(B,s)$

(ii) (Projection formula) 
$\frac{c_1(f^{*}(D_s))^{n}}{n!}=
\opn{deg}(f)\frac{c_1(D_s)^{n}}{n!}$.
\end{proposition}
\begin{proof}
(i) We can see this from definition.

(ii) Since $f^{!}=f^{-1}$ 
\cite[]{iversenCohomologySheaves1986a}
, $\opn{deg}(f)$ is the same with degree of 
mapping of closed manifolds.

\end{proof}

\begin{theorem} \label{thm: HesseRR}
  Let $B_0$ be a $n$-dimensional compact integral affine manifold and
  $s$ a smooth Lagrangian section
  which intersect transversely. Then,
  \begin{align} \label{eq: HesseRR}
    \chi(B_0,s)=\frac{1}{n!}\int_{B_0}c_1(D_s)^{n}.
  \end{align}
\end{theorem}

\begin{proof}

From Cheng-Yau's result \cite{MR714338}, $B_0$ is a finite unramified cover of tropical tori.
Fix an \'etale cover $p:T \to B_0$ of $B_0$.

If \cref{thm: HesseRR} is true for tropical tori,
then \cref{thm: HesseRR} is also true for compact
integral manifold with a Hessian form from
\cref{thm: intetale} for $p$.

From now on, we assume $B_0=T$.
Let $s$ be an element of 
$H^{0}(T;\mcal{C}^{\infty}(T)/\mcal{O}_{T}^{\times})\simeq
\Gamma(T;\opn{Lag}(\check{X}(T)))$.

$s$ is linearly equivalent to a Lagrangian section
defined from the differential $dq_s$ of a quadratic polynomial
$q_s$ function on the universal cover $\tilde{T}$ of $T$.

Let $D_s$ is the divisor class of $s$.
From explicit calculation of the ring structure of
$H^{\bullet}(T;\Omega_B^{\bullet})$ or Sumi's result
\cite[Theorem 47]{MR4229604}, we get 
$\frac{1}{n!}c_1(D_s)^{n}$ is equal to the determinant
of the linear part of $dq_s$.

Next, we mention the following well-known fact:

Let $s$ be a Lagrangian section of 
$\check{\pi}_{B_0}\colon \check{X}(B_0) \to B_0$.
The intersection number of the image $L_s$ Lagrangian
section and the zero section $L_0$ is equal to
$\chi(\opn{CF}^{\bullet}(L_s,L_0))$ up to 
signature\footnote{The signature only depends on
the choice of 
an orientation of $\check{X}(B_0)$. 
The definition of the intersection number of smooth 
submanifolds is in \cite[5.2]{MR1336822} or 
\cite[0.4]{griffithsPrinciplesAlgebraicGeometry1994a}}. 

Every linearly equivalent 
class is given by a one-time Hamiltonian flow on 
$\check{X}(B_0)$ by the pullback $\check{\pi}_{B_0}^{*}(h)$
of a smooth function $h$ on $B_0$.
We note one-time flow of submanifold of $\check{X}(B_0)$ does not change
the homology class in $H^{\bullet}(\check{X}(B_0);\Z)$ and
the intersection number \cite[5.2.1. Theorem]{MR1336822}.

As remarked in \cref{eg: MF=CF}, 
$\opn{MF}^{\bullet}(T,s)\otimes_{\Z}\Lambda_{\opn{nov}}
=\opn{CF}^{\bullet}(L_s,L_0)$ if $L_s$ intersects with
$L_0$ transversely. Therefore, 
the Euler number $\chi(\opn{MF}^{\bullet}(T,s))$ is 
invariant to the choice of linearly equivalent 
Lagrangian sections which intersect transversely.

We can calculate $\chi(\opn{MF}^{\bullet}(T,s))$ as follows:

(i) If $\det dq_s\ne 0$, $dq_s$ intersects to 
the zero section transversely. We can see that 
$\sharp(L_s\cap L_0)=|\det dq_s|$ directly, and thus
we get \cref{eq: HesseRR}. 

(ii) If $\det dq=0$, we can choose a smooth vector bundle $v$ on 
$\check{X}(T)$ such that the one-time flow $\phi$ of $v$ make 
$\phi(L_{dq_s})\cap L_0=\emp$. 
Thus, $\chi(\opn{MF}^{\bullet}(T,s))=0$.



\end{proof}

\begin{remark}

\end{remark}

\begin{remark} \label{rmk: integral_mirror}
This theorem also can be considered as
a special case of \cite{MR4301560}.
Abouzaid assumed $\pi_{2}(B_0)=0$ for $B_0$
in \cite{MR4301560}.
\end{remark}

\begin{remark}

According to \cite[5.3]{mikhalkinTropicalGeometryIts2006},
the support of $k$-th Chern class of tropical manifold is 
the $k$-skeleton of it.
We don't know the definition of higher Chern class of tropical manifold $B$ except
$n=1$ or $n=\dim B_0$. 
On the other hand, $\opn{ch}(B_0)$ should be trivial when $B$ is
an integral affine manifold, since $B$ has empty
$k$-skeleton except $k=n$.
Thus, $c_{k}(B_0)$ should be $1$ except $k=0$, 
i.e., $\opn{td}(B_0)=1$. 

On the other hand, $\hat{\mcal{A}}(X(B_0))=\opn{td}(X(B_0))=1$
since the tangent bundle of $X(B_0)$ is flat.
    From semi-flat SYZ mirror symmetry, the above conjecture should be true. In the case of tropical tori, see \ref{}.
\end{remark}

\begin{remark}[{Kodaira--Thurston surface}]
There exists a complete and compact integral affine manifold
  which has no Hessian form.
As pointed out in \cite[Example 1.14]{grossMirrorSymmetryLogarithmic2006a}
and \cite[p.403]{MR1461965}, there exists an integral affine manifold
$B_0$ such that
$X(B_0)$ is a primary Kodaira surface and $X(B_0),\check{X}(B_0)$
are diffeomorphic to Thurston's example of a symplectic but
not K\"ahler manifold in \cite{MR402764}.
Hence, $\check{X}(B_0)$ is not K\"ahler and $B_0$ has no
Hessian form since every Hessian form on $B_0$ induces a 
standard K\"ahler form
on torus fibration.
See also \cite{MR1422337} for tropical primary Kodaira surfaces.
\end{remark}

\section{For more examples}
In the last section, we mention more examples of 
tropical analog of the Euler number of 
the sheaf cohomology of line bundles.
 K\"unneth formula for
the direct product of tropical curves and 
integral affine manifold for some special cases.





Let $\mcal{F}\in \opn{Ob}(\opn{Mod}(A_X))$ 
\cite[Proposition 2.4.12]{MR1299726}.

This theorem comes from the following sheaf 
theoretic Thom--Sebastiani formula.



This is different from those of microlocal sheaf theory \cite[Definition 4.2.2, Definition 4.3.1]{MR1299726} but deeply related with them,
see \cite[Remark 1.1.1]{MR2031639}.



In some case we write $f_1\dot{+} f_2\deq \pi_1^{*}f_1+\pi_2^{*}f_2$.

\begin{theorem}[{Thom--Sebastiani Theorem for sheaves \cite[Theorem 1.2.2]{MR2031639}}]
Let $i=1,2$.
Fix locally compact Hausdorff spaces $X_i$ and 
sheaves $\mathcal{F}_i$ on $X_i$.
For continuous functions $f_i\colon X_1 \to\mathbb{R}$,
and closed $S_i$ of $X_i$ contained in $\{f_i=0\}$.

the condition of cohomological version of a Milnor 
fibration \cite[Assumption 1.1.1]{MR2031639}.
Then there exists the following
where $\mcal{F}_1\boxtimes^{L} \mcal{F}_2\deq p_1^{*}\mcal{F}_1\otimes^{L}p^{*}_2\mcal{F}_2$.
  \begin{align}
    R\Gamma(S_1\times S_2,\mu_{f_1\dot{+}f_2}(\mcal{F}_1\boxtimes^{L} \mcal{F}_2))
    \simeq R\Gamma(S_1,\mu_{f_1}(\mcal{F}_1))
    \otimes^{L}_{A_X}R\Gamma(S_2,\mu_{f_2}(\mcal{F}_2)).
  \end{align}

\end{theorem}


\begin{example}
  If $S_1=\set{v},S_2=\set{w}$ and $\mcal{F}_1=\Z_V, \mcal{F}_2=\Z_{W}$,
  the Thom-Sebastiani theorem gives
  a certain K\"unneth formula for
  $\opn{MF}^{\bullet}(\Z_{V\times W},f_1\dot{+}f_2,(v,w))$:
\begin{align}
\opn{MF}^{\bullet}(f_1\dot{+}f_2,\Z_{V\times W},(v,w))
\simeq \opn{MF}^{\bullet}(f_1,\Z_{V})
\otimes_{\Z} \opn{MF}^{\bullet}(f_2,\Z_{W}), \quad \\
\opn{ind}_{(v,w)}(f_1\dot{+}f_2)=\opn{ind}_v(f_1)\cdot \opn{ind}_v(f_2).
\end{align}
  From instance, if $f_1(x)=x_1^{2}+\cdots x_{m}^{2}$
  and $f_2(x)=-x_{m+1}^{2}-\cdots - x_{m+n}^{2}$ then we have
\begin{align}
    \opn{MF}^{\bullet}(f_1\dot{+}f_2,\Z_{{\mathbb{R}}^{n+m}})
    \simeq \tilde{H}^{\bullet}(S^{n-1},\Z)
    \simeq \Z[-\opn{ind}_{\mathrm{Morse}}(f_1\dot{+}f_2,0)]
\end{align}
  where $\opn{ind}_{\mathrm{Morse}}(f,0)$ is the Morse index
  of a Morse function $f$ at the origin.
\end{example}

We recall some facts of tensor product of sheaves 
and derived tensor products of sheaves from \cite{MR1299726}.
As like flat morphisms of schemes, the notion of flatness
is defined for any ringed space 
\cite[Definition 2.4.11]{MR1299726}.

\begin{example}

If $\mcal{F}$ is a $A_X$-flat then $p_1^{-1}\mcal{F}$ is also 
$A_Y$-flat. From \cite[(2.2.7)]{}, 
Obviously, $A_{Z\subset X}$ is $A_X$-flat for any locally 
closed subset $Z$ of $X$. 
\end{example}

We don't state for the K\"unneth type formula in a fully
general setting but it is enough to perform the Euler number of
generic locally analytic  behaves as expected.
\begin{corollary}[{K\"unneth formula}]
Fix compact rational polyhedral spaces $X,Y$.
Let $s$ and $s'$ a admissible smooth Cartier divisor of $X$ and $Y$ 
satisfying the condition of cohomological version of a Milnor 
fibration \cite[Assumption 1.1.1]{MR2031639} locally.
Then, the induced external tensor product 
$s\boxtimes s'\deq \opn{pr}_X^{*} (s)+\opn{pr}_Y^{*}(s')
\in \opn{CaDiv}^{\infty}(X\times Y)$ is also admissible and
has the following equations:
\begin{align}
\chi(\opn{MF}^{\bullet}(X\times Y;s\boxtimes s'))=
\chi(\opn{MF}^{\bullet}(X,s))\chi(\opn{MF}^{\bullet}(Y,s')).
\end{align}

\end{corollary}
\begin{proof}
Since 
$\opn{SS}(F\boxtimes^{L} G)\subset \opn{SS}(F)\times \opn{SS}(G)$
\cite[Proposition 5.4.1]{MR1299726},
$s\boxtimes s'$ is also admissible.
From sheaf theoretic Thom-Sebastiani theorem for constructible sheaves 
\cite[Corollary 1.2.1]{MR2031639}, we get an isomorphism of 
graded modules;

\begin{align}
\opn{MF}^{\bullet}(X\times Y;s\boxtimes s') 
& =\bigoplus_{(v,w)\in s_0\cap s\boxtimes s'}
(R^{\bullet}_{\{f_v\boxplus g_w\geq 0\}}\Z_{U_{(v,w)}})_{(v,w)} \\
& \simeq \bigoplus_{(v,w)\in s_0\cap s\boxtimes s'}
(R^{\bullet}_{\{f_v\geq 0\}}\Z_{U_v})_v
\otimes_{\Z} (R^{\bullet}_{\{g_w\geq 0\}}\Z_{U_w})_w \\
& \simeq
\opn{MF}^{\bullet}(X,s)\otimes_{\Z} \opn{MF}^{\bullet}(Y,s') 
\end{align}

\end{proof}

\begin{remark}
In the proof of the above corollary, we only use
the condition of cohomological version of Milnor fibre. 
Besides, we can find many smooth Cartier data satisfying 
the condition, see \cite[p.35]{MR2031639}.  
\end{remark}

We will develop this paper for integral affine manifold
with singularities. As an example we also gives the 
following analog for (ADE type) tropical Kummer surfaces.

\begin{proposition}[{For the proof for Tropical Kummer surfaces}]
Let $L=q(L')$ be the image of a Lagrangian 
section $L'$ of $\check{f}_{T}\colon \check{X}(T)\to T$ such 
that $L'$ is invariant under the negation map. 
\end{proposition}
\begin{proof}

\end{proof}


\section{Future works}
We need to consider the extension of scalar of 
$\opn{MF}^{\bullet}(B,s)$ by 
Novikov ring or Novikov field.
More difficult problem is about what is the differential $m_1$ or higher multiplication $m_d$ for tropical manifolds.
If such $m_d$ exists, this should be determined by the contribution of the moduli space of tropical Morse tree for tropical manifold.
\begin{question}
  Is there a Morse $A_{\infty}$-precategory for tropical manifolds?
\end{question}

\begin{remark}
Our approach is similar with the theory of constructible sheaves 
on algebraic varieties.
We expect
\end{remark}

We also expect that we can define a graded module for a given
not only smooth admissible Cartier divisor but also 
an ordinary Cartier divisor directly.



\appendix

\section{Historical notes for index}

\begin{remark}
We remark about a historical note of the local index.
in \cite[p.246]{MR225327}.
This index is also defined for affine linear map $f:{\mathbb{R}}^{n}\to {\mathbb{R}}$ and embedded convex cell complex
$M$.
The definition of the index $a(v,f)$
  may seem different from that of us but as written .

  We also note generic affine linear function defines a Morse function
  on an embedded smooth manifold as the restriction of it.

  $a(v,f)=1-\chi_{\mathrm{top}}(\opn{lk}(v)_{\leq f(v)})$. Therefore, $a(v,f)$ is a combinatorial version of our local index.

  Banchoff proves a polyhedral complex version of Poincar\'e--Hopf theorem
  for height functions (Banchoff's critical point theorem) \cite[Theorem 1]{MR225327}.

  the condition for function is weaker than that of us but we need that condition for our goals.

  We also note this combinatorial local index $1-\chi(\opn{lk}(v)_{\leq f(v)})$ is defined in
  \cite[3]{knill2012graph}
  for (abstract) graphical analogue of Poincar\'e-Hopf theorem.
\end{remark}

\section{Radiance obstruction and geometric prequantization}
\label{sec: BSRR}
\label{appendix-geometric-quantization}

In this subsection, we recall the relationships lattice points of 
strongly integral affine manifolds and geometric quantization 
from \cite{1999math......2027T,MR3112817,MR3525095}.

\begin{example}
This 
\end{example}

Every compact integral affine manifold has no infinite volume face,
 i.e., has a nontrivial finite volume.

If $B_0$ is a strongly integral affine manifold,
we can define the set of lattice points $B_0(\Z)$ 
on $B_0$ for a fixed strongly integral affine structure from 
the inverse image $\phi^{-1}_i(U_i\cap M)$ of each atlas.
In other words, we can define 
"$\underline{\Z}_{\max}$-rational point" of $B$.


We can create a canonical section 
$s_{B_0}\colon B_0 \to X(B_0)$ of the torus fibration
 $\pi_B:X(B_0)\to B_0$
induced from the graph of the composition map of developing map
$\opn{dev}_{B_0}\colon \widetilde{B_0}\to M_{{\mathbb{R}}}$ 
\cite[p.641]{goldmanRadianceObstructionParallel1984a} and projection
$p:M_{{\mathbb{R}}}\to M_{{\mathbb{R}}}/M$. 
Then, we can consider $B_0(\Z)$ as the intersection of 
$s_{B_0}$ and the zero section of $\pi_{B_0}:X(B_0)\to B_0$.
If $B_0$ has a Hessian potential (multivalued) function $K$, then $s_{B_0}$ can be 
considered as a Lagrangian section of the dual torus 
fibration $\pi_{\check{B}_0}\colon \check{X}(\check{B}_0)\to \check{B}_0$ of dual Hessian
manifold $\check{B}_0$ \cite[Proposition 6.9]{MR2567952}.
The associated smooth Cartier divisor is 
given from the dual Hessian potential function
$\check{K}$ on $\check{B_0}$ 
\cite[p.429]{MR2567952}.
A similar result for projective toric manifolds 
and the prequantum line bundle on them
is in \cite[Theorem 3.20]{yamaguchimaster}.

\begin{remark}
  We stress that the $\sharp \mathrm{BS}=\mathrm{RR}$ is true for closed integral affine manifold such that $X(B_0)$ is not K\"ahlerian, i.e., not Calabi-Yau type.
\end{remark}



\section{Etc of HMS and SYZ}

\subsection{A crash course of SYZ mirror for tropical 
geometer}

\begin{remark}[{Reason why Calabi--Yau's condition is needed}]

We explain why we need Calabi--Yau's condition is needed for
homological mirror symmetry in the sense of \cref{a}.

We note Abouzaid constructed ($\Z/2\Z$-graded)
Fukaya categories of higher genus closed surfaces in
\cite{MR2383898}. 
\end{remark}

In usual, homological mirror symmetry 
for non-Calabi--Yau manifolds has three ways:



\subsection{Integral affine manifold and Floer cohomology}

\subsubsection{Semi-flat SYZ mirror pair}

We add some notes about integral affine manifolds $B_0$, and its SYZ-pair $\check{X}(B_0), X(B_0)$ from \cite[Chapter 6]{MR2567952} and \cite{MR2737696,MR3079343}



From construction, $\check{X}(B_0), X(B_0)$ have the zero section.

Let's see the topological properties of $X(B_0)$ and $\check{X}(B_0)$.

Since integral affine condition is very strict, so $X(B_0)$ (resp. $\check{X}(B_0)$) is a special class of complex (resp. symplectic) manifold.

Since each fiber of the fibration $f_{B_0}$ and $\check{f}_{B_0}$ are compact, $f_{B_0}$ and $\check{f}_{B_0}$ are proper maps. In particular, if $B_0$ is compact then $\check{X}(B_0)$ and $X(B_0)$ are compact.

\begin{proposition}
%TODO: 適切な箇所で引用
\label{proposition-unobstructed-lagrangian}
Let $B_0$ be a connected integral affine manifold. 
Then,
$\pi_i(B_0)\simeq \pi_i(\check{X}(B_0))$ 
for $i\geq 2$.
In particular, 
$\pi_i(B_0)=\pi_i(\check{X}(B_0))=0$ if 
$B_0$ is complete.
\end{proposition}
\begin{proof}
We note $\pi_{i}(X,p)\simeq \pi_{i}(\widetilde{X},\tilde{p})$ and $\pi_{i}(X\times Y,(p,q))\simeq \pi_i(X,p)\times \pi_i(Y,q)$ and thus
\begin{align}
  \pi_{i}(\check{X}(B_0))\simeq \pi_{i}(\widetilde{\check{X}(B_0)})\simeq \pi_{i}(\widetilde{T^{*}B_0})\simeq \pi_{i}(T^{*}\widetilde{B_0})\simeq  \pi_{i}(T_p^* B_0)\times \pi_{i}(\widetilde{B_0})\simeq \pi_{i}(B_0)
\end{align}
Thus, we have $\pi_{i}(B_0)\simeq \pi_{i}(\check{X}(B_0))\simeq \pi_{i}(X(B_0))$. In particular, if $B_0$ is complete then $\pi_{i}(B_0)\simeq \pi_{i}(T_{p}B_0)=0$. See \cite[Chapter 4]{hatcherAlgebraicTopology2002a} for fundamental properties of homotopy groups and relative homotopy groups.
\end{proof}
From Leray spectral sequence, $(R^{p}\check{f}_{B_0}\Z_{\check{X}(B_0)})_{x}=H^{p}(T^{*}_xB_0/(\TBZ^{\vee})_x;\Z)\simeq \bigwedge_{i=1}^{p}(\TBZ)_{x}$, i.e.,

\begin{align}
  R^{p}\check{f}_{B_0}\Z_{\check{X}(B_0)}\simeq \bigwedge_{i=1}^{p} \TBZ=\mcal{W}^{p}_{\Z,B_0}, \quad R^{p}f_{B_0}\Z_{X(B_0)}\simeq \bigwedge_{i=1}^{p} \TBZ^{\vee}=\mcal{F}_{\Z,B_0}^{p}
\end{align}



\begin{example}
If $B_0$ is an integral Hessian manifold, 
$X(B_0)$ and $\check{X}(B_0)$ has a K\"ahler structure.

Let $f:B_0' \to B_0$ be a finite unramified covering of $B_0$ such that $B_0'$ is a tropical torus.

Then, $X(B_0',K')$ (resp. $\check{X}(B_0',K')$) 
is a complex torus and an unramified finite cover 
of $X(B_0,K)$ (resp. $\check{X}(B_0,K)$).

\end{example}
If two smooth Cartier divisors $s,s'$ are linearly equivalent, 
i.e., $f=s-s'\in C^{\infty}(B_0)$, 
then $s$ is the image of a time-one Hamiltonian flow of $s'$
on $\check{X}(B_0)$
\cite[Exercise 6.65]{MR2567952}.



\bibliography{lattice_points_surface}
\bibliographystyle{halpha}

\printindex

\end{document}